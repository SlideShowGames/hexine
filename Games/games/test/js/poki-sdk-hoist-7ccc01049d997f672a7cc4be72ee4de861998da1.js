(()=>{"use strict";const e={ready:"pokiAppReady",adblocked:"pokiAppAdblocked",startLoading:"pokiAppStartLoading",ads:{completed:"pokiAdsCompleted",error:"pokiAdsError",impression:"pokiAdsImpression",durationChange:"pokiAdsDurationChange",limit:"pokiAdsLimit",ready:"pokiAdsReady",requested:"pokiAdsRequested",prebidRequested:"pokiAdsPrebidRequested",skipped:"pokiAdsSkipped",started:"pokiAdsStarted",stopped:"pokiAdsStopped",busy:"pokiAdsBusy",position:{preroll:"PP",midroll:"PM",rewarded:"PR",display:"DP"},video:{clicked:"pokiVideoAdsClicked",firstQuartile:"pokiVideoAdsFirstQuartile",midPoint:"pokiVideoAdsMidPoint",thirdQuartile:"pokiVideoAdsThirdQuartile",error:"pokiVideoAdsError",loaderError:"pokiVideoAdsLoaderError",paused:"pokiVideoAdsPauseTriggered",resumed:"pokiVideoAdsResumedTriggered",progress:"pokiVideoAdsProgress",buffering:"pokiVideoAdsBuffering",startHouseAdFlow:"pokiVideoAdsStartHouseAdFlow"},display:{error:"pokiDisplayAdsError"}},info:{messages:{timeLimit:"The ad-request was not processed, because of a time constraint",prerollLimit:"The ad-request was cancelled, because we're not allowed to show a preroll (PokiSDK.commercialBreak before PokiSDK.gameplayStart)",disabled:"The ad-request was cancelled, because we've disabled this format for this specific configuration"}},playtest:{startVideo:"pokiPlaytestStartVideo",stopVideo:"pokiPlaytestStopVideo"},message:{event:"pokiMessageEvent",sdkDetails:"pokiMessageSdkDetails",setPokiURLParams:"pokiMessageSetPokiURLParams",sendGameScreenshot:"pokiMessageSendScreenshot",sendGameRawScreenshot:"pokiMessageSendRawScreenshot",sendUploadScreenshot:"pokiMessageSendUploadScreenshot",sendCommand:"pokiMessageSendCommand",sendInspectorCookies:"pokiMessageSendInspectorCookies",sendInspectorConsole:"pokiMessageSendInspectorConsole"},tracking:{custom:"pokiTrackingCustom",measure:"pokiTrackingMeasure",debugTrueInProduction:"pokiMessageDebugTrueProduction",screen:{gameplayStart:"pokiTrackingScreenGameplayStart",gameplayStop:"pokiTrackingScreenGameplayStop",gameLoadingFinished:"pokiTrackingScreenGameLoadingFinished",commercialBreak:"pokiTrackingScreenCommercialBreak",rewardedBreak:"pokiTrackingScreenRewardedBreak",firstRound:"pokiTrackingScreenFirstRound",roundStart:"pokiTrackingScreenRoundStart",roundEnd:"pokiTrackingScreenRoundEnd",displayAd:"pokiTrackingScreenDisplayAdRequest",destroyAd:"pokiTrackingScreenDisplayAdDestroy",playerActive:"pokiTrackingScreenPlayerActive"},playtest:{showModal:"pokiTrackingPlaytestShowModal",accepted:"pokiTrackingPlaytestAccepted",rejected:"pokiTrackingPlaytestRejected",noCanvas:"pokiTrackingPlaytestNoCanvas",starting:"pokiTrackingPlaytestStarting",connected:"pokiTrackingPlaytestConnected",closed:"pokiTrackingPlaytestClosed",error:"pokiTrackingPlaytestError"},sdk:{status:{initialized:"pokiTrackingSdkStatusInitialized",failed:"pokiTrackingSdkStatusFailed"}},ads:{status:{busy:"pokiTrackingAdsStatusBusy",completed:"pokiTrackingAdsStatusCompleted",error:"pokiTrackingAdsStatusError",impression:"pokiTrackingAdsStatusImpression",limit:"pokiTrackingAdsStatusLimit",ready:"pokiTrackingAdsStatusReady",requested:"pokiTrackingAdsStatusRequested",prebidRequested:"pokiTrackingAdsStatusPrebidRequested",skipped:"pokiTrackingAdsStatusSkipped",started:"pokiTrackingAdsStatusStarted",buffering:"pokiTrackingAdsStatusBuffering"},video:{clicked:"pokiTrackingAdsVideoClicked",error:"pokiTrackingAdsVideoError",loaderError:"pokiTrackingAdsVideoLoaderError",progress:"pokiTrackingAdsVideoProgress",paused:"pokiTrackingAdsVideoPaused",resumed:"pokiTrackingAdsVideoResumed"},display:{requested:"pokiTrackingScreenDisplayAdRequested",impression:"pokiTrackingScreenDisplayAdImpression"},rewardedWeb:{request:"pokiTrackingRewardedWebRequest",ready:"pokiTrackingRewardedWebReady",impression:"pokiTrackingRewardedWebImpression",closedGranted:"pokiTrackingRewardedWebClosedGranted",closedDeclined:"pokiTrackingRewardedWebclosedDeclined",empty:"pokiTrackingRewardedWebEmpty"}}}};function t(e){var t=new RegExp("".concat(e,"=([^;]+)(?:;|$)")).exec(document.cookie);return t?t[1]:""}function n(e,t,n){document.cookie="".concat(e,"=").concat(t,"; path=/; samesite=lax; max-age=").concat(Math.min(n||15552e3,15552e3))}function o(){for(var e=Math.floor(Date.now()/1e3),t="",n=0;n<4;n++)t=String.fromCharCode(255&e)+t,e>>=8;if(window.crypto&&crypto.getRandomValues&&Uint32Array){var o=new Uint32Array(12);crypto.getRandomValues(o);for(var r=0;r<12;r++)t+=String.fromCharCode(255&o[r])}else for(var i=0;i<12;i++)t+=String.fromCharCode(Math.floor(256*Math.random()));return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function r(e,t,n){console.error(e);var o=[{k:"where",v:t},{k:"error",v:e.name&&e.message?"".concat(e.name,": ").concat(e.message):JSON.stringify(e)}];if(void 0!==n){var r=n;"string"!=typeof e&&(r=JSON.stringify(e)),o.push({k:"extra",v:r})}!function(e,t){if(navigator.sendBeacon){var n=navigator.sendBeacon.bind(navigator);try{if(n(e,t))return}catch(e){console.error(e)}}try{var o="XMLHttpRequest"in window?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");o.open("POST",e,!0),o.setRequestHeader("Content-Type","text/plain"),o.send(t)}catch(e){}}("https://t.poki.io/l",JSON.stringify({c:"observer-error",ve:7,d:o}))}window._pokiUserGlobalName=window._pokiUserGlobalName||"user";var i="poki_session";window._pokiSessionGlobalName=window._pokiSessionGlobalName||"session";var a=["poki.at","poki.be","poki.by","poki.ch","poki.cn","poki.co.id","poki.co.il","poki.com.br","poki.com","poki.cz","poki.de","poki.dk","poki.fi","poki.it","poki.jp","poki.nl","poki.pl","poki.pt","poki.se","www.trochoi.net"];function s(){try{var e=new URL(document.referrer).hostname;return a.indexOf(e)>-1?"poki":e}catch(e){}return""}function c(e,t){if(!e)return!1;if(!(e&&e.page&&e.landing_page&&e.previous_page))return!1;if(!e.tab_id)return!1;if(!e.expire||Date.now()>e.expire)return!1;if(e.expire>Date.now()+18e5)return!1;if(t){if(void 0!==e.referrer_domain){var n=s();if("poki"!==n&&n!==e.referrer_domain)return!1}var o=new URLSearchParams(window.location.search);if(["gclid","msclkid","yclid","ttclid","fbclid","utm_campaign","campaign","adgroup","creative","utm_term"].some((function(e){return o.has(e)}))||"web_app_manifest"===o.get("utm_source")||"bing"===o.get("utm_source")||"cpc"===o.get("utm_medium")||"rtb-cpm"===o.get("utm_medium"))return!1}return!0}function u(){var e=null;c(window[window._pokiSessionGlobalName],!1)&&(e=window[window._pokiSessionGlobalName]);try{var t=sessionStorage.getItem(i);if(t){var n=JSON.parse(t);c(n,!0)&&(!e||n.depth>e.depth)&&(e=n)}}catch(e){try{r(e,"getSession",sessionStorage.getItem(i))}catch(t){r(e,"getSession",t)}}return e}function l(){var e=0;window[window._pokiSessionGlobalName]&&window[window._pokiSessionGlobalName].count&&(e=window[window._pokiSessionGlobalName].count);try{var n=sessionStorage.getItem(i);if(n){var o=JSON.parse(n);o&&o.count&&o.count>e&&(e=o.count)}}catch(e){try{r(e,"getPreviousSessionCount",sessionStorage.getItem(i))}catch(t){r(e,"getPreviousSessionCount",t)}}try{var a=t(i);if(a){var s=JSON.parse(a);s&&s.count&&s.count>e&&(e=s.count)}}catch(e){try{r(e,"getPreviousSessionCount",t(i))}catch(t){r(e,"getPreviousSessionCount",t)}}return e}function d(){if(window[window._pokiSessionGlobalName]&&window[window._pokiSessionGlobalName].tab_id)return window[window._pokiSessionGlobalName].tab_id;try{var e=sessionStorage.getItem(i);if(e){var t=JSON.parse(e);if(t&&t.tab_id)return t.tab_id}}catch(e){}return o()}function p(){var e=0,n=u();n&&(e=n.depth);try{var o=t(i);if(o){var a=JSON.parse(o);!c(a,!0)||n&&a.id!==n.id||(e=Math.max(e,a.depth))}}catch(e){var s=null;try{s=t(i)||null}catch(e){}r(e,"getSessionDepth",s)}return e}const f=function(e,t){var n=!1;return Object.keys(t).forEach((function(o){t[o]===e&&(n=!0)})),n};var h=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","GB","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","IS","LI","NO"];const v=function(e,t){var n;if("undefined"==typeof window&&!t)return"";e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var o=new RegExp("(?:[\\?&]|^)".concat(e,"=([^&#]*)")).exec(t||(null===(n=null===window||void 0===window?void 0:window.location)||void 0===n?void 0:n.search)||"");return null===o?"":decodeURIComponent(o[1].replace(/\+/g," "))},m=function(){return"undefined"!=typeof navigator&&/(?:phone|windows\s+phone|ipod|blackberry|(?:android|bb\d+|meego|silk|googlebot) .+? mobile|palm|windows\s+ce|opera\smini|avantgo|mobilesafari|docomo)/i.test(navigator.userAgent)},g=function(){return"undefined"!=typeof navigator&&/(?:ipad|playbook|(?:android|bb\d+|meego|silk)(?! .+? mobile))/i.test(navigator.userAgent)};var y,w,b,k=v("url_referrer")||"",S={bot:"1"===v("bot"),categories:v("categories")||"",device:m()?"mobile":g()?"tablet":"desktop",experiment:v("experiment")||"",forceAd:v("force_ad")||!1,isPokiIframe:(parseInt(v("site_id"),10)||0)>0,siteID:parseInt(v("site_id"),10)||3,tag:v("tag")||"",versionID:v("game_version_id"),debugMode:"true"===v("pokiDebug"),logMode:""!==v("pokiLogging"),testVideos:"true"===v("testVideos"),referrer:k,isPlayground:!!window.isPokiPlayground,isInspector:"inspector-uploads.poki-user-content.com"===(null===(y=null===window||void 0===window?void 0:window.location)||void 0===y?void 0:y.host)||(null===(w=null===document||void 0===document?void 0:document.referrer)||void 0===w?void 0:w.includes("inspector.poki.dev"))||"1"===v("inspector"),ccpaApplies:v("ccpaApplies"),country:(v("country")||"").toUpperCase(),gameID:v("game_id"),gdprApplies:(b=(v("country")||"").toUpperCase(),h.includes(b)),contentGameID:void 0,specialCondition:v("special_condition"),iabcat:void 0,nonPersonalized:"y"===v("nonPersonalized"),familyFriendly:"y"===v("familyFriendly"),kioskMode:"y"===v("kioskMode")||!!(null===window||void 0===window?void 0:window.kioskMode),forceBidder:v("force_bidder")||""};const A=S;const T=function(){function t(){}return t.sendMessage=function(t,n,o){if(void 0===o&&(o=window.parent),!f(t,e.message)){var r=Object.keys(e.message).map((function(e){return"poki.message.".concat(e)}));throw new TypeError("Argument 'type' must be one of ".concat(r.join(", ")))}var i=n||{};A.gameID&&A.versionID&&(i.pokifordevs={game_id:A.gameID,game_version_id:A.versionID}),null==o||o.postMessage({type:t,content:i},"*")},t}();var x=function(){function e(){}return e.debug=!1,e.log=!1,e.init=function(t,n){var o,r,i=window.location.hostname;void 0===t&&("test"===(null===(r=null===(o=null===window||void 0===window?void 0:window.process)||void 0===o?void 0:o.env)||void 0===r?void 0:r.NODE_ENV)?(t=!1,void 0===n&&(n=!1)):"localhost"===i||"127.0.0.1"===i||"[::1]"===i?(t=!0,void 0===n&&(n=!1)):(t=!1,void 0===n&&(n=!1))),A.isInspector||"qa-files.poki.com"===i?(t=!0,n=!0):i.endsWith(".poki-gdn.com")&&(t=!1,n=!1),A.debugMode&&(t=!0),A.logMode&&(n=!0),void 0===n&&(n=t),e.debug=t,e.log=n},e}();const E=x;var P=function(e){var t=new Array;return Object.keys(e).forEach((function(n){"object"==typeof e[n]?t=t.concat(P(e[n])):t.push(e[n])})),t};const I=P;var _=function(){return _=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},_.apply(this,arguments)},C=function(){function e(){}return e.clearEventListeners=function(){this.listeners={}},e.removeEventListener=function(e,t){if(Object.prototype.hasOwnProperty.call(this.listeners,e)){var n=this.listeners[e].indexOf(t);-1!==n&&this.listeners[e].splice(n,1)}},e.addEventListener=function(e,t,n){var o=this;if(void 0===n&&(n=!1),n=!!n,Object.prototype.hasOwnProperty.call(this.listeners,e)||(this.listeners[e]=[]),n){var r=function(n){o.removeEventListener.bind(o)(e,r),t(n)};this.listeners[e].push(r)}else this.listeners[e].push(t)},e.dispatchEvent=function(e,t){var n,o;void 0===t&&(t={}),E.debug&&"test"!==(null===(o=null===(n=null===window||void 0===window?void 0:window.process)||void 0===n?void 0:n.env)||void 0===o?void 0:o.NODE_ENV)&&console.info(e,t);for(var r=Object.keys(this.listeners),i=0;i<r.length;i++){var a=r[i];if(e===a)for(var s=this.listeners[a],c=0;c<s.length;c++)s[c](_(_({},this.videoDataAnnotations),t))}},e.addVideoDataAnnotations=function(e){this.videoDataAnnotations=_(_({},this.videoDataAnnotations),e)},e.getVideoDataAnnotations=function(){return this.videoDataAnnotations},e.clearVideoDataAnnotations=function(){this.videoDataAnnotations={}},e.listeners={},e.videoDataAnnotations={},e}();const L=C;var D=function(){return D=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},D.apply(this,arguments)};const M=function(e){var t;if("undefined"!=typeof window&&"undefined"!=typeof fetch){var n=L.getVideoDataAnnotations(),o=e.size;(null===(t=e.event)||void 0===t?void 0:t.startsWith("video-"))&&(o="640x360v");var r=D(D({},e),{size:o,opportunity_id:e.opportunityId||n.opportunityId,ad_unit_path:e.adUnitPath||n.adUnitPath,p4d_game_id:A.gameID,p4d_version_id:A.versionID,bidder:e.bidder||n.bidder,bid:e.bid||n.bid||0,error_code:e.errorCode,creative_id:e.creativeId||n.creativeId,experiment:A.experiment});E.debug?console.log("PokiAdServer Tracking: ",r):fetch("https://t.poki.io/adserver",{method:"POST",mode:"no-cors",body:JSON.stringify(r)})}};const R=function(e){return new Promise((function(t,n){var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src=e;var r=function(){o.readyState&&"loaded"!==o.readyState&&"complete"!==o.readyState||(t(),o.onload=null,o.onreadystatechange=null)};o.onload=r,o.onreadystatechange=r,o.onerror=n,document.head.appendChild(o)}))};var O=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},N=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},B=function(e,t,n){if(n||2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)!o&&r in t||(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))};var G,V=(G=0,function(){return G+=1,"u".concat("0000".concat((0|Math.pow(36*Math.random(),4)).toString(36)).slice(-4)).concat(G)});function F(e){for(var t=[],n=0,o=e.length;n<o;n++)t.push(e[n]);return t}function j(e){return"style"in e}var H=function(e,t){if(e instanceof t)return!0;var n=Object.getPrototypeOf(e);return null!==n&&(n.constructor.name===t.name||H(n,t))},z=new Set(["cx","cy","x","y","r","rx","ry","d","fill","alignment-baseline","baseline-shift","clip-rule","color-interpolation","color-interpolation-filters","color-rendering","dominant-baseline","fill-opacity","fill-rule","flood-color","flood-opacity","glyph-orientation-horizontal","glyph-orientation-vertical","lighting-color","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","vector-effect"]),q={html:void 0,svg:void 0};function U(e,t){var n;void 0===t&&(t={});var o=H(e,SVGElement)?"svg":"html",r=q[o];if(r)return r;var i=null!==(n=t.includeStyleProperties)&&void 0!==n?n:F(window.getComputedStyle(document.documentElement)),a="html"===o?i.filter((function(e){return!z.has(e)})):B([],i,!0);return q[o]=a,a}function W(e,t){var n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function J(e,t){void 0===t&&(t={});var n,o,r,i=t.width||(o=W(n=e,"border-left-width"),r=W(n,"border-right-width"),n.clientWidth+o+r),a=t.height||function(e){var t=W(e,"border-top-width"),n=W(e,"border-bottom-width");return e.clientHeight+t+n}(e);return{width:i,height:a}}var K=16384;function Q(e){return new Promise((function(t,n){var o=new Image;o.decode=function(){return t(o)},o.onload=function(){return t(o)},o.onerror=n,o.crossOrigin="anonymous",o.decoding="async",o.src=e}))}function Y(e){return O(this,void 0,void 0,(function(){return N(this,(function(t){return[2,Promise.resolve().then((function(){return(new XMLSerializer).serializeToString(e)})).then(encodeURIComponent).then((function(e){return"data:image/svg+xml;charset=utf-8,".concat(e)}))]}))}))}function X(e,t,n){return O(this,void 0,void 0,(function(){var o,r,i;return N(this,(function(a){return o="http://www.w3.org/2000/svg",r=document.createElementNS(o,"svg"),i=document.createElementNS(o,"foreignObject"),r.setAttribute("width","".concat(t)),r.setAttribute("height","".concat(n)),r.setAttribute("viewBox","0 0 ".concat(t," ").concat(n)),i.setAttribute("width","100%"),i.setAttribute("height","100%"),i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("externalResourcesRequired","true"),r.appendChild(i),i.appendChild(e),[2,Y(r)]}))}))}function Z(e,t,n,o){var r=".".concat(e,":").concat(t),i=n.cssText?function(e){var t=e.getPropertyValue("content");return"".concat(e.cssText," content: '").concat(t.replace(/'|"/g,""),"';")}(n):function(e,t){return U(document.documentElement,t).map((function(t){var n=e.getPropertyValue(t),o=e.getPropertyPriority(t);return"".concat(t,": ").concat(n).concat(o?" !important":"",";")})).join(" ")}(n,o);return document.createTextNode("".concat(r,"{").concat(i,"}"))}function $(e,t,n,o){var r=window.getComputedStyle(e,n),i=r.getPropertyValue("content");if(""!==i&&"none"!==i){var a=V();try{t.className="".concat(t.className," ").concat(a)}catch(e){return}var s=document.createElement("style");s.appendChild(Z(a,n,r,o)),t.appendChild(s)}}var ee="application/font-woff",te="image/jpeg",ne={woff:ee,woff2:ee,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:te,jpeg:te,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function oe(e){var t=function(e){var t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}(e).toLowerCase();return ne[t]||""}var re=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},ie=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function ae(e){return-1!==e.search(/^(data:)/)}function se(e,t){return"data:".concat(t,";base64,").concat(e)}function ce(e,t,n){return re(this,void 0,void 0,(function(){var o,r;return ie(this,(function(i){switch(i.label){case 0:return[4,fetch(e,t)];case 1:if(404===(o=i.sent()).status)throw new Error('Resource "'.concat(o.url,'" not found'));return[4,o.blob()];case 2:return r=i.sent(),[2,new Promise((function(e,t){var i=new FileReader;i.onerror=t,i.onloadend=function(){try{e(n({res:o,result:i.result}))}catch(e){t(e)}},i.readAsDataURL(r)}))]}}))}))}var ue={};function le(e,t,n){return re(this,void 0,void 0,(function(){var o,r,i,a,s;return ie(this,(function(c){switch(c.label){case 0:if(o=function(e,t,n){var o=e.replace(/\?.*/,"");return n&&(o=e),/ttf|otf|eot|woff2?/i.test(o)&&(o=o.replace(/.*\//,"")),t?"[".concat(t,"]").concat(o):o}(e,t,n.includeQueryParams),null!=ue[o])return[2,ue[o]];n.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+(new Date).getTime()),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,ce(e,n.fetchRequestInit,(function(e){var n=e.res,o=e.result;return t||(t=n.headers.get("Content-Type")||""),function(e){return e.split(/,/)[1]}(o)}))];case 2:return i=c.sent(),r=se(i,t),[3,4];case 3:return a=c.sent(),r=n.imagePlaceholder||"",s="Failed to fetch resource: ".concat(e),a&&(s="string"==typeof a?a:a.message),s&&console.warn(s),[3,4];case 4:return ue[o]=r,[2,r]}}))}))}var de=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},pe=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function fe(e){return de(this,void 0,void 0,(function(){var t;return pe(this,(function(n){return"data:,"===(t=e.toDataURL())?[2,e.cloneNode(!1)]:[2,Q(t)]}))}))}function he(e,t){return de(this,void 0,void 0,(function(){var n,o,r,i;return pe(this,(function(a){switch(a.label){case 0:return e.currentSrc?(n=document.createElement("canvas"),o=n.getContext("2d"),n.width=e.clientWidth,n.height=e.clientHeight,null==o||o.drawImage(e,0,0,n.width,n.height),[2,Q(n.toDataURL())]):(r=e.poster,i=oe(r),[4,le(r,i,t)]);case 1:return[2,Q(a.sent())]}}))}))}function ve(e,t){var n;return de(this,void 0,void 0,(function(){return pe(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),(null===(n=null==e?void 0:e.contentDocument)||void 0===n?void 0:n.body)?[4,we(e.contentDocument.body,t,!0)]:[3,2];case 1:return[2,o.sent()];case 2:return[3,4];case 3:return o.sent(),[3,4];case 4:return[2,e.cloneNode(!1)]}}))}))}var me=function(e){var t;return"SLOT"===(null===(t=e.tagName)||void 0===t?void 0:t.toUpperCase())},ge=function(e){return null!=e.tagName&&"SVG"===e.tagName.toUpperCase()};function ye(e,t,n){return function(e,t,n){var o=t.style;if(o){var r=window.getComputedStyle(e);r.cssText?(o.cssText=r.cssText,o.transformOrigin=r.transformOrigin):U(e,n).forEach((function(n){var i=r.getPropertyValue(n);if("font-size"===n&&i.endsWith("px")){var a=Math.floor(parseFloat(i.substring(0,i.length-2)))-.1;i="".concat(a,"px")}H(e,HTMLIFrameElement)&&"display"===n&&"inline"===i&&(i="block"),"d"===n&&t.getAttribute("d")&&(i="path(".concat(t.getAttribute("d"),")")),o.setProperty(n,i,r.getPropertyPriority(n))}))}}(e,t,n),H(e,HTMLElement)&&H(t,HTMLElement)&&(function(e,t){H(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),H(e,HTMLInputElement)&&t.setAttribute("value",e.value)}(e,t),function(e,t){if(H(e,HTMLSelectElement)){var n=t,o=Array.from(n.children).find((function(t){return e.value===t.getAttribute("value")}));o&&o.setAttribute("selected","")}}(e,t),function(e,t,n){$(e,t,":before",n),$(e,t,":after",n)}(e,t,n),n.patchScroll)?function(e,t){if(0===e.scrollTop&&0===e.scrollLeft||!t.children)return t;for(var n=0;n<t.children.length;n+=1){var o=t.children[n];if(o.children){var r=o.style.transform,i=new DOMMatrix(r),a=i.a,s=i.b,c=i.c,u=i.d;i.a=1,i.b=0,i.c=0,i.d=1,i.translateSelf(-e.scrollLeft,-e.scrollTop),i.a=a,i.b=s,i.c=c,i.d=u,o.style.transform=i.toString()}}return t}(e,t):t}function we(e,t,n){return de(this,void 0,void 0,(function(){return pe(this,(function(o){return n||!t.filter||t.filter(e)?j(e)?[2,Promise.resolve(e).then((function(e){return function(e,t){return de(this,void 0,void 0,(function(){return pe(this,(function(n){return H(e,HTMLCanvasElement)?[2,fe(e)]:H(e,HTMLVideoElement)?[2,he(e,t)]:H(e,HTMLIFrameElement)?[2,ve(e,t)]:[2,e.cloneNode(ge(e))]}))}))}(e,t)})).then((function(n){return function(e,t,n){var o,r;return de(this,void 0,void 0,(function(){var i;return pe(this,(function(a){switch(a.label){case 0:return ge(t)?[2,t]:(i=[],0===(i=me(e)&&e.assignedNodes?F(e.assignedNodes()):H(e,HTMLIFrameElement)&&(null===(o=e.contentDocument)||void 0===o?void 0:o.body)?F(e.contentDocument.body.childNodes):F(("shadowRoot"in e&&null!==(r=e.shadowRoot)&&void 0!==r?r:e).childNodes)).length||H(e,HTMLVideoElement)?[2,t]:[4,i.reduce((function(e,o){return e.then((function(){return we(o,n)})).then((function(e){e&&t.appendChild(e)}))}),Promise.resolve())]);case 1:return a.sent(),[2,t]}}))}))}(e,n,t)})).then((function(n){return ye(e,n,t)})).then((function(e){return function(e,t){return de(this,void 0,void 0,(function(){var n,o,r,i,a,s,c,u,l,d,p,f,h;return pe(this,(function(v){switch(v.label){case 0:if(0===(n=e.querySelectorAll?e.querySelectorAll("use"):[]).length)return[2,e];o={},h=0,v.label=1;case 1:return h<n.length?(r=n[h],(i=r.getAttribute("xlink:href"))?(a=e.querySelector(i),s=document.querySelector(i),a||!s||o[i]?[3,3]:(c=o,u=i,[4,we(s,t,!0)])):[3,3]):[3,4];case 2:c[u]=v.sent(),v.label=3;case 3:return h++,[3,1];case 4:if((l=Object.values(o)).length){for(d="http://www.w3.org/1999/xhtml",(p=document.createElementNS(d,"svg")).setAttribute("xmlns",d),p.style.position="absolute",p.style.width="0",p.style.height="0",p.style.overflow="hidden",p.style.display="none",f=document.createElementNS(d,"defs"),p.appendChild(f),h=0;h<l.length;h++)f.appendChild(l[h]);e.appendChild(p)}return[2,e]}}))}))}(e,t)}))]:[2,e.cloneNode(!1)]:[2,null]}))}))}var be=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},ke=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},Se=/url\((['"]?)([^'"]+?)\1\)/g,Ae=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Te=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function xe(e,t,n,o,r){return be(this,void 0,void 0,(function(){var i,a,s,c;return ke(this,(function(u){switch(u.label){case 0:return u.trys.push([0,5,,6]),i=n?function(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;var n=document.implementation.createHTMLDocument(),o=n.createElement("base"),r=n.createElement("a");return n.head.appendChild(o),n.body.appendChild(r),t&&(o.href=t),r.href=e,r.href}(t,n):t,a=oe(t),s=void 0,r?[4,r(i)]:[3,2];case 1:return c=u.sent(),s=se(c,a),[3,4];case 2:return[4,le(i,a,o)];case 3:s=u.sent(),u.label=4;case 4:return[2,e.replace((l=t,d=l.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1"),new RegExp("(url\\(['\"]?)(".concat(d,")(['\"]?\\))"),"g")),"$1".concat(s,"$3"))];case 5:return u.sent(),[3,6];case 6:return[2,e]}var l,d}))}))}function Ee(e){return-1!==e.search(Se)}function Pe(e,t,n){return be(this,void 0,void 0,(function(){var o,r;return ke(this,(function(i){return Ee(e)?(o=function(e,t){var n=t.preferredFontFormat;return n?e.replace(Te,(function(e){for(;;){var t=Ae.exec(e)||[],o=t[0],r=t[2];if(!r)return"";if(r===n)return"src: ".concat(o,";")}})):e}(e,n),r=function(e){var t=[];return e.replace(Se,(function(e,n,o){return t.push(o),e})),t.filter((function(e){return!ae(e)}))}(o),[2,r.reduce((function(e,o){return e.then((function(e){return xe(e,o,t,n)}))}),Promise.resolve(o))]):[2,e]}))}))}var Ie=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},_e=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function Ce(e,t,n){var o;return Ie(this,void 0,void 0,(function(){var r,i;return _e(this,(function(a){switch(a.label){case 0:return(r=null===(o=t.style)||void 0===o?void 0:o.getPropertyValue(e))?[4,Pe(r,null,n)]:[3,2];case 1:return i=a.sent(),t.style.setProperty(e,i,t.style.getPropertyPriority(e)),[2,!0];case 2:return[2,!1]}}))}))}function Le(e,t){return Ie(this,void 0,void 0,(function(){return _e(this,(function(n){switch(n.label){case 0:return[4,Ce("background",e,t)];case 1:return n.sent()?[3,3]:[4,Ce("background-image",e,t)];case 2:n.sent(),n.label=3;case 3:return[4,Ce("mask",e,t)];case 4:return n.sent()?[3,6]:[4,Ce("mask-image",e,t)];case 5:n.sent(),n.label=6;case 6:return[2]}}))}))}function De(e,t){return Ie(this,void 0,void 0,(function(){var n,o,r,i;return _e(this,(function(a){switch(a.label){case 0:return n=H(e,HTMLImageElement),o=H(e,SVGImageElement),n&&!ae(e.src)||o&&!ae(e.href.baseVal)?[4,le(r=n?e.src:e.href.baseVal,oe(r),t)]:[2];case 1:return i=a.sent(),[4,new Promise((function(t,o){e.onload=t,e.onerror=o;var r=e;r.decode&&(r.decode=t),"lazy"===r.loading&&(r.loading="eager"),n?(e.srcset="",e.src=i):e.href.baseVal=i}))];case 2:return a.sent(),[2]}}))}))}function Me(e,t){return Ie(this,void 0,void 0,(function(){var n,o;return _e(this,(function(r){switch(r.label){case 0:return n=F(e.childNodes),o=n.map((function(e){return Re(e,t)})),[4,Promise.all(o).then((function(){return e}))];case 1:return r.sent(),[2]}}))}))}function Re(e,t){return Ie(this,void 0,void 0,(function(){return _e(this,(function(n){switch(n.label){case 0:return j(e)?[4,Le(e,t)]:[3,4];case 1:return n.sent(),[4,De(e,t)];case 2:return n.sent(),[4,Me(e,t)];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))}var Oe=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},Ne=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},Be={};function Ge(e){return Oe(this,void 0,void 0,(function(){var t,n;return Ne(this,(function(o){switch(o.label){case 0:return null!=(t=Be[e])?[2,t]:[4,fetch(e)];case 1:return[4,o.sent().text()];case 2:return n=o.sent(),t={url:e,cssText:n},Be[e]=t,[2,t]}}))}))}function Ve(e,t){return Oe(this,void 0,void 0,(function(){var n,o,r,i,a=this;return Ne(this,(function(s){return n=e.cssText,o=/url\(["']?([^"')]+)["']?\)/g,r=n.match(/url\([^)]+\)/g)||[],i=r.map((function(r){return Oe(a,void 0,void 0,(function(){var i;return Ne(this,(function(a){return(i=r.replace(o,"$1")).startsWith("https://")||(i=new URL(i,e.url).href),[2,ce(i,t.fetchRequestInit,(function(e){var t=e.result;return n=n.replace(r,"url(".concat(t,")")),[r,t]}))]}))}))})),[2,Promise.all(i).then((function(){return n}))]}))}))}function Fe(e){if(null==e)return[];for(var t=[],n=e.replace(/(\/\*[\s\S]*?\*\/)/gi,""),o=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");;){if(null===(a=o.exec(n)))break;t.push(a[0])}n=n.replace(o,"");for(var r=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");;){var a;if(null===(a=r.exec(n))){if(null===(a=i.exec(n)))break;r.lastIndex=i.lastIndex}else i.lastIndex=r.lastIndex;t.push(a[0])}return t}function je(e,t){return Oe(this,void 0,void 0,(function(){var n,o;return Ne(this,(function(r){return n=[],o=[],e.forEach((function(n){if("cssRules"in n)try{F(n.cssRules||[]).forEach((function(e,r){if(e instanceof CSSImportRule){var i=r+1,a=Ge(e.href).then((function(e){return Ve(e,t)})).then((function(e){return Fe(e).forEach((function(e){try{n.insertRule(e,e.startsWith("@import")?i+=1:n.cssRules.length)}catch(t){console.error("Error inserting rule from remote css",{rule2:e,error:t})}}))})).catch((function(e){console.error("Error loading remote css",e.toString())}));o.push(a)}}))}catch(i){var r=e.find((function(e){return null==e.href}))||document.styleSheets[0];null!=n.href&&o.push(Ge(n.href).then((function(e){return Ve(e,t)})).then((function(e){return Fe(e).forEach((function(e){r.insertRule(e,n.cssRules.length)}))})).catch((function(e){console.error("Error loading remote stylesheet",e)}))),console.error("Error inlining remote css file",i)}})),[2,Promise.all(o).then((function(){return e.forEach((function(e){if("cssRules"in e)try{F(e.cssRules||[]).forEach((function(e){n.push(e)}))}catch(t){console.error("Error while reading CSS rules from ".concat(e.href),t)}})),n}))]}))}))}function He(e){return e.filter((function(e){return e instanceof CSSFontFaceRule})).filter((function(e){return Ee(e.style.getPropertyValue("src"))}))}function ze(e,t){return Oe(this,void 0,void 0,(function(){return Ne(this,(function(n){switch(n.label){case 0:if(null==e.ownerDocument)throw new Error("Provided element is not within a Document");return[4,je(F(e.ownerDocument.styleSheets),t)];case 1:return[2,He(n.sent())]}}))}))}function qe(e,t){return Oe(this,void 0,void 0,(function(){var n;return Ne(this,(function(o){switch(o.label){case 0:return[4,ze(e,t)];case 1:return n=o.sent(),[4,Promise.all(n.map((function(e){var n=e.parentStyleSheet?e.parentStyleSheet.href:null;return Pe(e.cssText,n,t)})))];case 2:return[2,o.sent().join("\n")]}}))}))}function Ue(e,t){return Oe(this,void 0,void 0,(function(){var n,o,r,i,a;return Ne(this,(function(s){switch(s.label){case 0:return null==t.fontEmbedCSS?[3,1]:(o=t.fontEmbedCSS,[3,5]);case 1:return t.skipFonts?(r=null,[3,4]):[3,2];case 2:return[4,qe(e,t)];case 3:r=s.sent(),s.label=4;case 4:o=r,s.label=5;case 5:return(n=o)&&(i=document.createElement("style"),a=document.createTextNode(n),i.appendChild(a),e.firstChild?e.insertBefore(i,e.firstChild):e.appendChild(i)),[2]}}))}))}var We=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},Je=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function Ke(e,t){return void 0===t&&(t={}),We(this,void 0,void 0,(function(){var n,o,r,i;return Je(this,(function(a){switch(a.label){case 0:return n=J(e,t),o=n.width,r=n.height,[4,we(e,t,!0)];case 1:return[4,Ue(i=a.sent(),t)];case 2:return a.sent(),[4,Re(i,t)];case 3:return a.sent(),function(e,t){var n=e.style;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width="".concat(t.width,"px")),t.height&&(n.height="".concat(t.height,"px"));var o=t.style;null!=o&&Object.keys(o).forEach((function(e){n[e]=o[e]}))}(i,t),[4,X(i,o,r)];case 4:return[2,a.sent()]}}))}))}function Qe(e,t){return void 0===t&&(t={}),We(this,void 0,void 0,(function(){var n,o,r,i,a,s,c,u,l;return Je(this,(function(d){switch(d.label){case 0:return n=J(e,t),o=n.width,r=n.height,[4,Ke(e,t)];case 1:return[4,Q(d.sent())];case 2:return i=d.sent(),a=document.createElement("canvas"),s=a.getContext("2d"),c=window.devicePixelRatio||1,u=t.canvasWidth||o,l=t.canvasHeight||r,a.width=u*c,a.height=l*c,t.skipAutoScale||function(e){(e.width>K||e.height>K)&&(e.width>K&&e.height>K?e.width>e.height?(e.height*=K/e.width,e.width=K):(e.width*=K/e.height,e.height=K):e.width>K?(e.height*=K/e.width,e.width=K):(e.width*=K/e.height,e.height=K))}(a),a.style.width="".concat(u),a.style.height="".concat(l),t.backgroundColor&&(s.fillStyle=t.backgroundColor,s.fillRect(0,0,a.width,a.height)),s.drawImage(i,0,0,a.width,a.height),[2,a]}}))}))}function Ye(e,t){return void 0===t&&(t={}),We(this,void 0,void 0,(function(){return Je(this,(function(n){switch(n.label){case 0:return[4,Qe(e,t)];case 1:return[2,n.sent().toDataURL()]}}))}))}function Xe(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return e instanceof Error}}var Ze,$e=[],et=function(e){var t=!1,n=0;return function(o){if(t)n++;else{t=!0,setTimeout((function(){t=!1}),e);var r=n;n=0,o(r)}}}(100),tt=console.error,nt=["Audio callback had starved sending audio by"],ot=!1,rt=Math.random().toString(36).substr(2,9);function it(e,t){void 0===t&&(t=!0),A.gameID&&!A.isPlayground?et((function(t){try{var n=e.message||JSON.stringify(e);$e.push({n:e.name,m:n,s:JSON.stringify(e.stack)}),Ze&&Ze({name:e.name,message:n,stack:e.stack});var o=JSON.stringify({gid:A.gameID,vid:A.versionID,ve:7,n:e.name,m:n+(t?" (skipped ".concat(t," errors)"):""),s:JSON.stringify(e.stack),ui:rt}),r="https://t.poki.io/ge";if(navigator.sendBeacon)navigator.sendBeacon(r,o);else{var i=new XMLHttpRequest;i.open("POST",r,!0),i.send(o)}}catch(e){console.error(e)}})):t&&console.log(e)}function at(e){Xe(e.reason)?it(e.reason):it({name:"unhandledrejection",message:JSON.stringify(e.reason)||JSON.stringify(e)})}function st(e){Xe(e.error)?it(e.error):it(e)}function ct(){if(!ot){ot=!0,window.addEventListener("unhandledrejection",at),window.addEventListener("error",st);try{console.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=JSON.stringify(e);nt.some((function(e){return n.includes(e)}))||it({name:"console.error",message:n},!1),tt.apply(console,e)}}catch(e){}}}"undefined"==typeof window||A.isPlayground||ct();var ut=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},lt=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},dt=function(e){return void 0===e&&(e=null),ut(void 0,void 0,void 0,(function(){var t;return lt(this,(function(n){switch(n.label){case 0:return[4,vt()];case 1:return(t=n.sent())&&t.length>10?e?[4,ft(t,e)]:[3,3]:[3,5];case 2:t=n.sent(),n.label=3;case 3:return[4,pt({screenshot:t})];case 4:return[2,n.sent()];case 5:return[2,null]}}))}))},pt=function(e){return ut(void 0,void 0,void 0,(function(){var t,n,o,r;return lt(this,(function(i){switch(i.label){case 0:return t=e.screenshot,"https://api.poki.io/screenshot",n="https://poki-user-content.com/",[4,fetch("https://api.poki.io/screenshot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:t})})];case 1:o=i.sent(),i.label=2;case 2:return i.trys.push([2,5,,6]),200!==o.status?[3,4]:[4,o.json()];case 3:return r=i.sent(),[2,n+r.source];case 4:return[3,6];case 5:return i.sent(),[3,6];case 6:return[2,null]}}))}))},ft=function(e,t){return ut(void 0,void 0,void 0,(function(){var n,o,r,i,a,s,c,u,l,d,p,f,h,v,m,g,y,w,b,k,S,A,T;return lt(this,(function(x){switch(x.label){case 0:return n=t.title,o=t.thumbnail,(r=new Image).crossOrigin="Anonymous",i=new Promise((function(e){r.onload=function(){return e(r)}})),r.src=e,(a=new Image).crossOrigin="Anonymous",s=new Promise((function(e){a.onload=function(){return e(a)}})),a.src="https://a.poki.com/images/screenshot-frame.png",(c=new Image).crossOrigin="Anonymous",u=new Promise((function(e){c.onload=function(){return e(c)}})),128,c.src="https://img.poki.com/cdn-cgi/image/quality=78,width=".concat(128,",height=").concat(128,",fit=cover,f=auto/").concat(o),l=new FontFace("TorusBold","url(https://a.poki.com/fonts/torus-bold-latin.woff2)"),d=l.load(),[4,Promise.all([i,s,u,d])];case 1:return p=x.sent(),f=p[0],h=p[1],v=p[2],m=p[3],(g=document.createElement("canvas")).width=f.width,g.height=f.height,(y=g.getContext("2d")).drawImage(f,0,0),w=g.width/h.width,b=h.height*w,k=g.height-b,y.drawImage(h,0,k,g.width,b),S=v.height*w,ht(y,v,64*w,k+20*w,S,S,24*w),document.fonts.add(m),A=226*w,T=k+68*w,y.textAlign="left",y.textBaseline="top",y.fillStyle="#002b50",y.font="700 ".concat(56*w,"px TorusBold,sans-serif"),y.fillText(n,A,T),[2,g.toDataURL()]}}))}))},ht=function(e,t,n,o,r,i,a){e.save(),e.beginPath();var s=n+r,c=o+i;e.moveTo(n+a,o),e.lineTo(s-a,o),e.quadraticCurveTo(s,o,s,o+a),e.lineTo(s,c-a),e.quadraticCurveTo(s,c,s-a,c),e.lineTo(n+a,c),e.quadraticCurveTo(n,c,n,c-a),e.lineTo(n,o+a),e.quadraticCurveTo(n,o,n+a,o),e.closePath(),e.clip(),e.drawImage(t,n,o,r,i),e.restore()},vt=function(){return ut(void 0,void 0,void 0,(function(){var e,t,n,o,r;return lt(this,(function(i){switch(i.label){case 0:return e=function(e){return!["VIDEO","TEXTAREA","SCRIPT","NOSCRIPT","INPUT","IFRAME"].includes(e.nodeName)&&!("IMG"===e.nodeName&&!e.getAttribute("src"))},t=document.body.style.minWidth,n=document.body.style.minHeight,document.body.style.minWidth="100%",document.body.style.minHeight="100%",[4,Ye(document.body,{filter:e,width:window.innerWidth,height:window.innerHeight})];case 1:return(o=i.sent())&&o.length<10?(r=document.body.style.position,document.body.style.position="fixed",[4,Ye(document.body,{filter:e,width:window.innerWidth,height:window.innerHeight})]):[3,3];case 2:o=i.sent(),document.body.style.position=r,i.label=3;case 3:return document.body.style.minWidth=t,document.body.style.minHeight=n,[2,o]}}))}))},mt=function(e){return ut(void 0,void 0,void 0,(function(){var t,n,o,r,i,a,s;return lt(this,(function(c){switch(c.label){case 0:t=["VIDEO","TEXTAREA","SCRIPT","NOSCRIPT","INPUT","IFRAME"],e||t.push("CANVAS"),n=function(e){return!t.includes(e.nodeName)&&!("IMG"===e.nodeName&&!e.getAttribute("src"))},o=document.body.style.minWidth,r=document.body.style.minHeight,i=document.body.style.backgroundColor,document.body.style.minWidth="100%",document.body.style.minHeight="100%",document.body.style.backgroundColor="transparent",c.label=1;case 1:return c.trys.push([1,3,,4]),[4,Ke(document.body,{filter:n,width:window.innerWidth,height:window.innerHeight})];case 2:return a=c.sent(),[3,4];case 3:return s=c.sent(),console.error(s),[3,4];case 4:return document.body.style.minWidth=o,document.body.style.minHeight=r,document.body.style.backgroundColor=i,[2,a]}}))}))};var gt=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},yt=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},wt=!1,bt=[],kt=document.createElement("canvas"),St=null,At=null,Tt=null,xt=null,Et=null,Pt=null,It=null;kt.setAttribute("data-no-playtest","true");var _t={x:0,y:0},Ct=!1,Lt=!1,Dt="",Mt=1,Rt=1,Ot=function(e){if(bt.length&&kt){var t=bt[0];_t.x=e.clientX-t.offsetLeft,_t.y=Math.max(0,Math.min(e.clientY-t.offsetTop,kt.height))}},Nt=function(e){1===e.buttons?Ct=!0:2===e.buttons?Lt=!0:3===e.buttons&&(Ct=!0,Lt=!0)},Bt=function(e){1===e.buttons?Lt=!1:2===e.buttons?Ct=!1:0===e.buttons&&(Ct=!1,Lt=!1)},Gt=!1,Vt=new Image;Vt.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAdCAYAAACqhkzFAAADE2lDQ1BJQ0MgcHJvZmlsZQAAeNp9kk9s21Qcxz+2X92qCh4qYRqoqnIAKqoNma6gbkAhadI/tOuyJB1t4IDrOHUSx7ZsZyw9IuAIk+AAJ1BXCQ4cOMDWgZDQDttlEoi/EkIc0DQuO1ExTYIqHOKsOfEu7/s++r7v7/d+eiB2DN93BNB0o6Awn0mtrZdTg38i8TAjPMghwwz9dD6/DNDb+5YEd35GAvjhmOH7zpWvPt3rnJoYe2f/8/GxV3N3+f81XLFCE/gX5C9NP4hA2QXyr0V+BGIISAZr62UQo0Bys6t1ILnR1VkgGZQKsyDWgJRpGxUQ54GjG318s083nZYZ9zAGJIJWYRXQQDofNopLsX7LNHJF4H6Q3rOtxWVAgLTjR5lC7PmkGsytxp5Ldmuhl3OtFi2WYv1jw1sqAMMg/WGGs+XeXXdj5TSQAOl2q7GajvndipXN9TyBV4g9srpll14CVJBHwnPFHDAC8pEte3Yl5hN148V87NctZz6uKz/rR/nT9+o6K8vAYZDnrPDgjZFdWuhq+ZUoKPXuOtXa3GKcec4OFgqxft138su9TCPIzQNJkN+23NVil8vbFSO7FOd8JkbFjHhOTIuMmBEvkKVGiI+DRZ08Bi4RBg4OxsCtge85hYdLjQiPoO9k0SJgiRp1LBy2pDMUMbGxCGjifZG8uvNTYnfoekSRBvUuF0kxLdLiefGMeEqcIE2VmvwQBvX3vfbJszYZajhUCGlwk4BmdaZ98qytX9cv6lf0X/Tb+o7yobKr3FC+Vi6TwcKK/fdqa0PaMS2tTWhJbVAb1R4lR4MAA5cVbtImIuIOZQxCHDxcdUodV6fUx0mp42pWPaE+qT7dNxuDNkUa3CKgCX1/VwIS8ayngFFm8fBpE1BjE5uIFGn8eMYpFnExeYKjpJhEZ5Lja+vlVDdu7wwSIB2+ccC8bZj+G5QLB2zjA7j8Jhz59YA98hEcegMufesbgQGAAsjVKvz1Mdy3Dg98B8Mvh9Xjk93uExkY+L3T2XsMBt+F/Qudzj/bnc7+RVB+g2/c/wD2jOYIAU+O+QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAQpSURBVHjapFZLLFx9FD9z74x2COod72eQUCLSSGhrPOoRFhY23xcaYtdWx6O0lSbNJxQpY6ZtpG2w6aIWFgRhiIVHLBoiLLxJBB2PIMSMx2B6zr+9k2lSH6Mnubn/3HPv75zzO68rSklJKQoPD1fs7u6CwWCAs7MzEIlExvv5+Tl7TufT09PfdPSc9CR6vR54ngd+YWFhxMrK6lZgYKBaq9UaPza9kwjgpjoSQU86juOAx/PLxcXFu9bW1qd+fn5DBwcHfw0ox8tyfn4+3tLSUu/v7z+k0+n+CvA5AdJD9DQBPT1B0GFTT80B5PAsIWVcXBxT9PT0vJmYmHjh5OQE1xEC5MlKU1MTtLa2sofd3d1Vk5OT1wJlScHLIicnB+Lj45nrg4ODFH6ira2tztvbe4Q4NYfDMgJMS0uDoKAgFvrx8TEMDw8DJuqBjY2NlkAPDw+vxqHol0YsFhvdrqqqguLiYnZWq9Vvp6ennzk4OFwpZPFFitraWmakpqaGEvWWnMDiV+zs7FyalAuluroaioqKhOzXzczMFF/mKXdZCHV1dcbwe3t7a+fm5uT/B8pdhRcKv6CgQCgp5ezsbAGBCgkxG5Ckvr4eCgsL2bmvr68eh0r+nzzlzClahUIBcrlc8PQdltVTe3v73zzlzO0EpVIJZWVlAqeqpaWlJ6aectfp18rKSmhoaBDq9D2CPrazs2Oeii/7mKY01SMNX+qWlZUV2NzcBBx1gF0E+/v7BPohNjZWjFNKJaZO+VO2BNne3obk5GRYX1/Xb2xsSC56b2BgQImGpRd6mJeXB1lZWay3iSMcaQxMKpVuHx0d6XASLXt6eq7iLllFL1fRO42Hh8eeEVBYNjQYSktLobm5Gdra2piH7e3tgIOXNT/2eTb2dndXVxckJSXByckJ0Nnd3R0QEHiM+BWGLFGpVGBhYQGRkZFnHR0dLFnEGYWL1mFtbQ3GxsaIT9uKioqvBI4UgEajgeXlZXB1dWW8klUt0djS0mJITEzU0UTCLaiJiIhQ0xmtGkhwJRDR7GpsbJRRcvAbyM/PBy8vL2a4pKSEVin/HN+/QdMa0y9BS98x5HsxMTHv+vv7X+N0EaWmpoKvry84OjpSQdPwvY27/DNFEBAQwAAp20QbhVyKBymFiB98y8jIuB8VFbVKSxvJd8a+vYOh6mUyGd/Z2Qmjo6OwtbXlhpwthYWFTe7t7TFKcAX/nIf4F8DA0tPTW3De/Yt8GMgaJSchIeE/9OjR+Pi4JDg42FgBPj4+A7gevru4uBj/LJydnRmPRP5NtP6xvLz8H+KSwCg5tEcwlE38VWkQgHBFDGVnZydlZmbK3Nzc+smoRCJh7wuVIs7NzX2IJfEFC5d1A2WPSoE2A/3vREdHv5+amgoPCQn5FBoa+oWooMzSu6blJsgPAQYACgtfMJolu7EAAAAASUVORK5CYII=",Vt.onload=function(){Gt=!0};var Ft=function(e){if(kt&&bt.length){var t=bt[0],n=t.width,o=t.height,r=t.getBoundingClientRect(),i=r.width,a=r.height;0!==i&&0!==a||(i=n,a=o),1===bt.length?(Mt=n/i,Rt=o/a,i=n,a=o):(Mt=1,Rt=1),(e||kt.width!==i||kt.height!==a)&&St&&(kt.width=i,kt.height=a,At=null,Et=null)}};function jt(e){return gt(this,void 0,void 0,(function(){var t,n,o;return yt(this,(function(r){switch(r.label){case 0:if(!kt)return[2];Pt||(Pt=document.createElement("canvas"),0===bt.length?(Pt.width=kt.width,Pt.height=kt.height):(Pt.width=bt[0].width,Pt.height=bt[0].height),Pt.addEventListener("contextlost",(function(){Pt=null}))),It||(It=Pt.getContext("2d")),r.label=1;case 1:return r.trys.push([1,5,,6]),performance.now(),[4,mt(e)];case 2:return(t=r.sent())&&t.length>10?[4,new Promise((function(e,n){var o=new Image;o.decode=function(){return e(o)},o.onload=function(){return e(o)},o.onerror=n,o.crossOrigin="anonymous",o.decoding="async",o.src=t}))]:[3,4];case 3:n=r.sent(),requestAnimationFrame((function(){Pt&&It&&(It.clearRect(0,0,Pt.width,Pt.height),It.drawImage(n,0,0,Pt.width,Pt.height,0,0,Pt.width,Pt.height))})),r.label=4;case 4:return[3,6];case 5:return o=r.sent(),console.error("%cPOKI_PLAYTEST:%c ui canvas error: ".concat(o),"font-weight: bold",""),[3,6];case 6:return[2]}}))}))}function Ht(e){Dt=e}function zt(e){if(!kt)return null;bt=e,Ft(!0);var t=kt.captureStream(24);window.addEventListener("pointermove",Ot,{capture:!0,passive:!0}),window.addEventListener("pointerdown",Nt,{capture:!0,passive:!0}),window.addEventListener("pointerup",Bt,{capture:!0,passive:!0});var n=null,o=null,r=null,i=null,a=null,s=0;if(An.__playtestCaptureHTML===bn){var c=0;a=setInterval((function(){if(kt){bt[0].width===window.innerWidth&&bt[0].height===window.innerHeight||(bt[0].width=window.innerWidth,bt[0].height=window.innerHeight);var e=function(e){for(var t=3&e.length,n=e.length-t,o=3432918353,r=461845907,i=0,a=0,s=0;s<n;)a=255&e.charCodeAt(s)|(255&e.charCodeAt(++s))<<8|(255&e.charCodeAt(++s))<<16|(255&e.charCodeAt(++s))<<24,++s,i=5*(i=(i^=a=(65535&(a=(a=(65535&a)*o+(((a>>>16)*o&65535)<<16)&4294967295)<<15|a>>>17))*r+(((a>>>16)*r&65535)<<16)&4294967295)<<13|i>>>19)+3864292196&4294967295;switch(a=0,t){case 3:a^=(255&e.charCodeAt(s+2))<<16;case 2:a^=(255&e.charCodeAt(s+1))<<8;case 1:i^=a=(65535&(a=(a=(65535&(a^=255&e.charCodeAt(s)))*o+(((a>>>16)*o&65535)<<16)&4294967295)<<15|a>>>17))*r+(((a>>>16)*r&65535)<<16)&4294967295}return i^=e.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}(document.body.innerHTML);c!==e&&(c=e,jt(!0))}}),1e3)}var u=function(){var e,t,c,l,d,p;if(wt||!kt||!bt.length||s>10)return window.removeEventListener("pointermove",Ot),window.removeEventListener("pointerdown",Nt),window.removeEventListener("pointerup",Bt),a&&(clearInterval(a),a=null),An.__playtestCaptureHTML="",kt=null,St=null,bt=[],Vt=null,At=null,Et=null,Pt=null,It=null,o&&(r&&o.deleteTexture(r),i&&o.deleteFramebuffer(i),null===(t=null===(e=o.getExtension("WEBGL_lose_context"))||void 0===e?void 0:e.loseContext)||void 0===t||t.call(e)),o=null,r=null,void(i=null);if(!(n&&o&&r&&i)){if(!(n=document.createElement("canvas")))return s++,void setTimeout(u,100);if(n.addEventListener("webglcontextlost",(function(){n=null})),o=null===(c=null==n?void 0:n.getContext)||void 0===c?void 0:c.call(n,"webgl"),r=null===(l=null==o?void 0:o.createTexture)||void 0===l?void 0:l.call(o),i=null===(d=null==o?void 0:o.createFramebuffer)||void 0===d?void 0:d.call(o),!o||!r||!i)return n=null,s++,void setTimeout(u,100);o.bindTexture(o.TEXTURE_2D,r),o.bindFramebuffer(o.FRAMEBUFFER,i)}if(!St&&!(St=kt.getContext("2d")))return s++,void setTimeout(u,100);if(s=0,requestAnimationFrame(u),Ft(!1),An.__playtestCaptureHTML===wn?(An.__playtestCaptureHTML="",jt(!1)):An.__playtestCaptureHTML===kn&&(An.__playtestCaptureHTML="",Pt=null,It=null),1===bt.length){At||(At=St.getImageData(0,0,kt.width,kt.height));var f=bt[0];o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,f),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,r,0),o.readPixels(0,0,f.width,f.height,o.RGBA,o.UNSIGNED_BYTE,new Uint8Array(At.data.buffer)),St.putImageData(At,0,0)}else if(Tt&&xt||(Tt=document.createElement("canvas")).addEventListener("contextlost",(function(){Tt=null})),xt||(xt=Tt.getContext("2d")),xt){Et||(Tt.width=bt[0].width,Tt.height=bt[0].height,Et=xt.getImageData(0,0,Tt.width,Tt.height)),St.clearRect(0,0,kt.width,kt.height);for(var h=0;h<bt.length;h++)St.drawImage(bt[h],0,0,kt.width,kt.height)}Pt&&St.drawImage(Pt,0,0,kt.width,kt.height),function(){if(Gt&&St&&Vt){var e=Math.max(Mt,Rt),t=8*e;St.strokeStyle="black",St.lineWidth=2;var n=Math.PI/2;Ct&&(St.beginPath(),St.arc(_t.x*Mt,_t.y*Rt,t,n,Math.PI+n),St.stroke(),St.closePath()),Lt&&(St.beginPath(),St.arc(_t.x*Mt,_t.y*Rt,t,Math.PI+n,n),St.stroke(),St.closePath());var o=.5*e;St.drawImage(Vt,0,0,Vt.width,Vt.height,_t.x*Mt,_t.y*Rt,Vt.width*o,Vt.height*o)}}(),(p=Dt)&&kt&&St&&(St.fillStyle="rgba(255, 255, 255, 0.5)",St.fillRect(0,0,kt.width,kt.height),St.font="48px Arial",St.fillStyle="#009cff",St.textAlign="center",St.fillText(p,kt.width/2,kt.height/2))};return requestAnimationFrame(u),t}function qt(e){return Math.round(100*e)/100}var Ut=function(){function e(e){var t=this;this.seconds=[],this.frameCounter=0,Math.random()>e||window.requestAnimationFrame&&-1!==window.requestAnimationFrame.toString().indexOf("[native code]")&&(this.nextSecond=performance.now()+1e3,window.requestAnimationFrame((function(){t.frame()})))}return e.prototype.frame=function(){for(var e=this,t=performance.now();t>=this.nextSecond;)this.seconds.unshift(this.frameCounter),this.seconds.length>10&&this.seconds.pop(),this.frameCounter=0,this.nextSecond+=1e3;this.frameCounter++,window.requestAnimationFrame((function(){e.frame()}))},e.prototype.stats=function(){var e=this;if(0!==this.seconds.length){var t=Math.min.apply(Math,this.seconds),n=Math.max.apply(Math,this.seconds),o=qt(this.seconds.reduce((function(e,t){return e+t}),0)/this.seconds.length),r=qt(this.seconds.slice(1).map((function(t,n){return Math.abs(t-e.seconds[n])})).reduce((function(e,t){return e+t}),0)/(this.seconds.length-1));return isNaN(r)&&(r=0),"".concat(t,"|").concat(n,"|").concat(o,"|").concat(r)}},e}();var Wt=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},Jt=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},Kt=function(e,t,n){if(n||2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)!o&&r in t||(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},Qt=function(e){},Yt=null,Xt=Kt(Kt([],Object.values(e.tracking.screen),!0),[e.tracking.ads.status.completed,e.tracking.ads.status.error,e.tracking.ads.status.limit,e.tracking.ads.video.progress],!1);function Zt(t){console.info("%cPOKI_PLAYTEST:%c start recording","font-weight: bold","");var n=zt(t);n&&((Yt=new WebSocket("wss://playtest-recorder.poki.io/ws")).binaryType="blob",Yt.addEventListener("error",(function(t){an.track(e.tracking.playtest.error,{message:t.message}),console.info("%cPOKI_PLAYTEST:%c error","font-weight: bold","",t)})),Yt.addEventListener("open",(function(){if(Yt){Yt.addEventListener("message",(function(t){try{var n=JSON.parse(t.data);n&&n.videoID&&an.track(e.tracking.playtest.connected,{playtest_id:n.videoID})}catch(e){}})),Yt.send(JSON.stringify({type:"save",game_id:A.gameID,version_id:A.versionID}));var t=new MediaRecorder(n,{mimeType:"video/webm;codecs=vp9",videoBitsPerSecond:35e4});t.start(500);var o=performance.now(),r=function(){return Math.round(performance.now()-o)};t.addEventListener("dataavailable",(function(e){Yt&&Yt.readyState===Yt.OPEN&&Yt.send(e.data)}));var i={},a=!1;document.addEventListener("keydown",(function(e){i[e.code]||(i[e.code]=!0,a=!0)})),document.addEventListener("keyup",(function(e){i[e.code]&&(i[e.code]=!1,a=!0)}));var s=setInterval((function(){var e=Object.keys(i);a&&e.length>0&&Yt&&Yt.readyState===Yt.OPEN&&Yt.send(JSON.stringify({type:"keyboard",offset:r(),keys:i})),a=!1,e.forEach((function(e){i[e]||delete i[e]}))}),50);Qt=function(e){Yt&&Yt.readyState===Yt.OPEN&&Yt.send(JSON.stringify({type:"sdk-event",offset:r(),event:e.event}))},Ze=function(e){Yt&&Yt.readyState===Yt.OPEN&&Yt.send(JSON.stringify({type:"error",offset:r(),error:e}))};try{var c=function(e){console[e]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Yt&&Yt.readyState===Yt.OPEN&&Yt.send(JSON.stringify({type:"console",offset:r(),level:e,message:t.join(" ")}))}};c("log"),c("warn"),c("error")}catch(e){}var u=function(t){var n=t.position;if(Yt&&Yt.readyState===Yt.OPEN){var o=e.tracking.screen.commercialBreak,i="Commercial Break";n===e.ads.position.rewarded&&(o=e.tracking.screen.rewardedBreak,i="Rewarded Break"),Ht(i),Yt.send(JSON.stringify({type:"sdk-event",offset:r(),event:o}))}};L.addEventListener(e.playtest.startVideo,u);var l=function(){Ht("")};L.addEventListener(e.playtest.stopVideo,l);var d=new Ut(1),p=setInterval((function(){Yt&&Yt.readyState===Yt.OPEN&&Yt.send(JSON.stringify({type:"fps",offset:r(),stats:d.stats()}))}),1e3);Yt.addEventListener("close",(function(n){Qt=function(){},L.removeEventListener(e.playtest.startVideo,u),L.removeEventListener(e.playtest.stopVideo,l),clearInterval(s),clearInterval(p),t.stop(),wt=!0,Yt=null,an.track(e.tracking.playtest.closed,{reason:"".concat(n.reason,":").concat(n.code,":").concat(n.wasClean)})}))}})))}function $t(){var e=An.__playtestCanvas;if(null==e?void 0:e.length)return e;if(An.__playtestCaptureHTML===bn){var t=document.createElement("canvas");return t.width=window.innerWidth,t.height=window.innerHeight,[t]}var n=0,o=Array.from(document.getElementsByTagName("canvas")),r=[];return o.forEach((function(e){if("true"!==e.getAttribute("data-no-playtest")){var t=getComputedStyle(e),o=t.width,i=t.height,a=parseInt(o,10)*parseInt(i,10);a>=n&&function(e){if(!e)return!1;for(var t=e,n=!0;t&&t!==document.body;){var o=window.getComputedStyle(t);if("none"===o.display)return!1;if("hidden"===o.visibility)return!1;if(n&&(0===t.offsetWidth||0===t.offsetHeight))return!1;"absolute"===o.position&&(n=!1),t=t.parentElement}var r=e.getBoundingClientRect(),i=window.innerHeight||document.documentElement.clientHeight,a=window.innerWidth||document.documentElement.clientWidth;return!(r.right<0||r.bottom<0||r.left>a||r.top>i)}(e)&&(a>n&&(r=[]),r.push({canvas:e,style:t,index:r.length}),n=a)}})),r.sort((function(e,t){var n=parseInt(e.style.zIndex,10)||0,o=parseInt(t.style.zIndex,10)||0;return n<o?-1:n>o?1:e.index-t.index})),r.map((function(e){return e.canvas}))}function en(t){var n;(n=(null==t?void 0:t.gameTitle)||"this game",new Promise((function(e,t){return Wt(void 0,void 0,void 0,(function(){var o,r,i,a,s,c,u,l,d,p,f,h,v,m,g,y;return Jt(this,(function(w){switch(w.label){case 0:return console.info("%cPOKI_PLAYTEST:%c showing consent screen","font-weight: bold",""),(o=document.createElement("div")).classList.add("poki-stream-bg"),(r=document.createElement("div")).classList.add("poki-stream-consent"),(i=document.createElement("div")).classList.add("consent-content"),a=new FontFace("ProximaNova","url(https://a.poki.com/fonts/proxima-nova-regular-latin.woff2)").load(),s=new FontFace("ProximaNovaBold","url(https://a.poki.com/fonts/proxima-nova-bold-latin.woff2)").load(),c=new FontFace("Torus","url(https://a.poki.com/fonts/torus-bold-latin.woff2)").load(),[4,Promise.all([a,s,c])];case 1:return u=w.sent(),l=u[0],d=u[1],p=u[2],document.fonts.add(l),document.fonts.add(d),document.fonts.add(p),i.innerHTML='\n<h1>Hi there!</h1>\n<p>\nYou have been randomly selected for a Playtest. When you consent to participating in the Playtest, the game you are about to play will be recorded. The purpose of this recording is that it enables our developers to analyze the use of their game. This will enable the developer to determine where tweaks and improvements can be made. The recording of your gameplay activity will be deleted after 30 days.\n</p>\n<p>\nFor more information, please read our <a href="https://a.poki.com/playtest/2024.05.08_Poki_Playtest_Privacy_Statement.pdf" download="2024-05-08 Poki Playtest Privacy Statement.pdf">Privacy Statement Playtest</a>.\n</p>\n<p>\n<h2>Do you consent to the Playtest to help improve '.concat(n,"?</h2>\n</p>\n<p>\n*Please note that you will be able to play the game normally if you refuse the Playtest.\n</p>\n"),r.appendChild(i),(f=document.createElement("style")).textContent="\n.poki-stream-consent h2, .poki-stream-consent h1, .poki-stream-consent b, .poki-stream-consent a, .poki-stream-consent button, .poki-stream-consent svg  {\n\tall: revert;\n}\n\n.poki-stream-consent {\n\tall: revert;\n\tposition: fixed;\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n\tbackground-color: #fff;\n\tborder-radius: 12px;\n\tpadding: 16px;\n\tbox-shadow: rgb(9 30 66 / 7%) 0px 16px 16px, rgb(9 30 66 / 7%) 0px 0px 8px, rgb(9 30 66 / 7%) 0px 16px 32px;\n\twidth: 600px;\n\tborder-radius: 8px;\n\toverflow: hidden;\n\tbox-sizing: border-box;\n\tz-index: 99999;\n}\n\n.poki-stream-consent *{\n\tfont: 700 14px/20px ProximaNova, sans-serif;\n\tcolor: #5d6b84;\n\t// reset all inherited styles\n\tletter-spacing: normal;\n\ttext-align: left;\n\ttext-decoration: none;\n\ttext-indent: 0;\n\ttext-shadow: none;\n\ttext-transform: none;\n\twhite-space: normal;\n\tword-spacing: normal;\n}\n\n.poki-stream-bg{\n\tall: revert;\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\tbackground: #002B50AF;\n\twidth: 100%;\n\theight: 100%;\n\tz-index: 99998;\n}\n.poki-stream-consent .consent-content{\n\tmargin-bottom: 10px;\n}\n.poki-stream-consent h1 {\n\tfont: 700 21px/24px Torus, sans-serif;\n\tcolor: #002B50;\n\tmargin-top: 0;\n}\n.poki-stream-consent h2 {\n\tfont: 700 16px/24px ProximaNovaBold, sans-serif;\n\tcolor: #002B50;\n\tmargin-bottom: 0;\n}\n.poki-stream-consent b{\n\tfont: 700 14px/20px ProximaNovaBold, sans-serif;\n}\n.poki-stream-consent a{\n\tcolor: #009CFF;\n}\n.poki-stream-consent .poki-stream-close{\n\tposition: absolute;\n\ttop: 0;\n\tright: 0;\n\twidth: 32px;\n\theight: 32px;\n\tpadding: 4px;\n\tcursor: pointer;\n\tfill: #009cff;\n\tborder-radius: 50%;\n\tbox-sizing: border-box;\n\tmargin: 8px;\n}\n\n@media only screen and (max-width: 835px) {\n\t.poki-stream-consent {\n\t\ttransform: translate(-50%, -50%) scale(0.9);\n\t}\n}\n\n.poki-stream-consent .poki-stream-close:hover{\n\tbackground-color: #ffc9dd;\n\tfill: #ff7690;\n}\n.poki-stream-consent button {\n\tfont: 700 16px / 24px Torus, sans-serif;\n\tcolor: rgb(255, 255, 255);\n\tpadding: 6px 24px;\n\tborder-radius: 30px;\n\tbackground-color: #009cff;\n\tborder: none;\n\tmargin: 16px 16px 0 0;\n\tcursor: pointer;\n}\n.poki-stream-consent .poki-stream-star{\n\tposition:absolute;\n\tbottom:0;\n\tright:0;\n\twidth: 121.3px;\n\theight: 90.9px;\n}\n",document.head.appendChild(f),h=function(){o.remove(),r.remove()},(v=document.createElement("button")).innerText="I refuse",v.addEventListener("click",(function(){h(),t()})),r.appendChild(v),(m=document.createElement("button")).innerText="I consent",m.addEventListener("click",(function(){h(),e()})),r.appendChild(m),(g=document.createElementNS("http://www.w3.org/2000/svg","svg")).classList.add("poki-stream-close"),g.innerHTML='<rect x="8" y="24.971" width="24" height="4" rx="2" transform="rotate(-45 8 24.97)"></rect><rect x="10.828" y="8" width="24" height="4" rx="2" transform="rotate(45 10.828 8)"></rect>',g.setAttribute("viewBox","0 0 36 36"),g.addEventListener("click",(function(){h(),t()})),r.appendChild(g),(y=document.createElementNS("http://www.w3.org/2000/svg","svg")).innerHTML='<style>.st5{fill:#ffdb00}</style><path style="fill:#fece00" d="M121.3 0 90.7 33.5 72.4 21.3l-1.1 28.3L0 29l25.6 50.6L8.2 90.9h113.1z"/><path d="m81.9 43.1-9.5-21.8-1.2 28.3 3.7 1.2 7-7.7z" style="fill:#ffaf00"/><path d="M71.2 49.6 0 29l63.5 50.1L104 61 74.9 50.7l-3.7-1.1z" style="fill:#ffdc00"/><path d="m72.4 21.3 9.5 21.8 8.7-9.6-18.2-12.2z" style="fill:#ffc500"/><path style="fill:#ffab00" d="M8.3 90.9h23l-5.6-11.2z"/><path class="st5" d="M63.5 79.1 36.3 90.9H61z"/><path style="fill:#ffc200" d="M61 90.9h16.3L63.5 79.1z"/><path style="fill:#ffeb72" d="m104 61 17.3-55.4V0L74.9 50.7z"/><path class="st5" d="m104 61 17.3 29.9V0z"/></svg>',y.setAttribute("viewBox","0 0 121.3 90.9"),y.classList.add("poki-stream-star"),r.appendChild(y),document.body.appendChild(o),document.body.appendChild(r),[2]}}))}))}))).then((function(){an.track(e.tracking.playtest.accepted);var n=240,o=setInterval((function(){"977b60eb-ff81-4c3a-895b-b585410d6c0d"===(null==t?void 0:t.gameID)&&(An.__playtestCaptureHTML=bn);var r=$t();if(r.length){clearInterval(o),an.track(e.tracking.playtest.starting);try{Zt(r)}catch(e){}}0==--n&&(an.track(e.tracking.playtest.noCanvas),clearInterval(o),console.info("%cPOKI_PLAYTEST:%c no canvas found","font-weight: bold",""))}),500)})).catch((function(t){an.track(e.tracking.playtest.rejected),console.info("%cPOKI_PLAYTEST:%c rejected","font-weight: bold","",t)}))}var tn=function(){return tn=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},tn.apply(this,arguments)},nn=I(e.tracking),on=window,rn=function(){function a(){}return a.track=function(t,n){var o,r;void 0===n&&(n={});var i=tn({},n);if(-1===nn.indexOf(t))throw new TypeError("Invalid 'event', must be one of ".concat(nn.join(", ")));if("object"!=typeof i)throw new TypeError("Invalid data, must be an object");var s=L.getVideoDataAnnotations();if(null==s?void 0:s.pokiAdServer)switch(t){case e.tracking.ads.status.started:var c=s.creativeId;L.addVideoDataAnnotations({houseAdId:c}),i.houseAdId=c;break;case e.tracking.ads.status.impression:c=null==i?void 0:i.creativeId;M(tn(tn({},i),{event:"video-impression",creativeId:c})),L.addVideoDataAnnotations({houseAdId:c}),i.houseAdId=c;break;case e.tracking.ads.video.error:M(tn(tn({},i),{event:"video-error",errorCode:null==i?void 0:i.errorCode}));break;case e.tracking.ads.video.loaderError:M(tn(tn({},i),{event:"video-adsloader-error",errorCode:null==i?void 0:i.errorCode}));break;case e.tracking.ads.status.completed:M(tn(tn({},i),{event:"video-complete"}))}if(t.includes("pokiTrackingRewardedWeb")&&(i=s),E.log){if("test"===(null===(r=null===(o=null===window||void 0===window?void 0:window.process)||void 0===o?void 0:o.env)||void 0===r?void 0:r.NODE_ENV))return;Object.keys(i).length?console.info("%cPOKI_TRACKER:%c Tracked event '".concat(t,"' with data:"),"font-weight: bold","",i):console.info("%cPOKI_TRACKER:%c Tracked event '".concat(t,"'"),"font-weight: bold","")}!function(e){if(Xt.includes(e.event))try{Qt(e)}catch(e){console.error("%cPOKI_PLAYTEST:%c","font-weight: bold","",e)}}({event:t,data:i}),a.logToObserver?a.pushEvent("sdk","message",{content:{event:t,data:i,pokifordevs:{game_id:A.gameID,game_version_id:void 0}},type:e.message.event,origin:"game"}):T.sendMessage(e.message.event,{event:t,data:i})},a.setupDefaultEvents=function(){var t,n=((t={})[e.ready]=e.tracking.sdk.status.initialized,t[e.adblocked]=e.tracking.sdk.status.failed,t[e.ads.busy]=e.tracking.ads.status.busy,t[e.ads.completed]=e.tracking.ads.status.completed,t[e.ads.error]=e.tracking.ads.status.error,t[e.ads.impression]=e.tracking.ads.status.impression,t[e.ads.limit]=e.tracking.ads.status.limit,t[e.ads.ready]=e.tracking.ads.status.ready,t[e.ads.requested]=e.tracking.ads.status.requested,t[e.ads.prebidRequested]=e.tracking.ads.status.prebidRequested,t[e.ads.skipped]=e.tracking.ads.status.skipped,t[e.ads.started]=e.tracking.ads.status.started,t[e.ads.video.clicked]=e.tracking.ads.video.clicked,t[e.ads.video.error]=e.tracking.ads.video.error,t[e.ads.video.loaderError]=e.tracking.ads.video.loaderError,t[e.ads.video.buffering]=e.tracking.ads.status.buffering,t[e.ads.video.progress]=e.tracking.ads.video.progress,t[e.ads.video.paused]=e.tracking.ads.video.paused,t[e.ads.video.resumed]=e.tracking.ads.video.resumed,t);Object.keys(n).forEach((function(e){L.addEventListener(e,(function(t){a.track(n[e],t)}))}))},a.pushEvent=function(e,t,n){on.pokiGTM.push({event:"".concat(e,"-").concat(t),eventNoun:e,eventVerb:t,eventData:n||{}})},a.setRequireConsent=function(e){a.cmpRequired=e,a.setupObserverIfCMP()},a.setupObserverWithCMP=function(e){a.cmpIndex=e,a.setupObserverIfCMP()},a.setupObserverIfCMP=function(){if(void 0!==a.cmpRequired&&void 0!==a.cmpIndex)if(a.cmpRequired){if(!window.__tcfapi)return void console.error("POKI-SDK: enableEventTracking: a CMP is required but no CMP is present.");window.__tcfapi("addEventListener",2,(function(e,t){!t||"tcloaded"!==e.eventStatus&&"useractioncomplete"!==e.eventStatus||(window.__tcfapi("getNonIABVendorConsents",2,(function(e){e&&e.nonIabVendorConsents&&e.nonIabVendorConsents[a.cmpIndex||0]&&a.setupObserver()})),window.__tcfapi("removeEventListener",2,(function(){}),e.listenerId))}))}else a.setupObserver()},a.setupObserver=function(){on._pokiSessionGlobalName="pokiSession",on._pokiUserGlobalName="pokiUser",on._pokiContextGlobalName="pokiContext",on._pokiTrackerGlobalName="pokiTracker",function(e,a,f){var h=null;try{(h=u())?(h.previous_page.path=h.page.path,h.previous_page.type=h.page.type,h.previous_page.id=h.page.id,h.previous_page.start=h.page.start,h.previous_page.pageview_id=h.page.pageview_id,h.page.path=e,h.page.type=a,h.page.id=f,h.page.start=Date.now(),h.page.pageview_id=o(),h.depth=p()+1,h.expire=Date.now()+18e5):h=function(e,a,u){try{var f=t(i);if(f){var h=JSON.parse(f);if(c(h,!0))return h.previous_page.path=h.page.path,h.previous_page.type=h.page.type,h.previous_page.id=h.page.id,h.previous_page.start=h.page.start,h.previous_page.pageview_id=h.page.pageview_id,h.page.path=e,h.page.type=a,h.page.id=u,h.page.start=Date.now(),h.page.pageview_id=o(),h.depth=p()+1,h.expire=Date.now()+18e5,h.tab_id=d(),n(i,JSON.stringify(h)),h}}catch(e){var v=null;try{v=t(i)||null}catch(e){}r(e,"getSessionDepth",v)}var m=o();return{id:o(),expire:Date.now()+18e5,tab_id:d(),depth:1,count:l()+1,page:{path:e,type:a,id:u,start:Date.now(),pageview_id:m},previous_page:{},landing_page:{path:e,type:a,id:u,start:Date.now(),pageview_id:m},referrer_domain:s()}}(e,a,f),h.count>1&&(n("poki_uid_new","0"),window[window._pokiUserGlobalName]&&(window[window._pokiUserGlobalName].is_new=!1));var v=JSON.stringify(h);try{sessionStorage.setItem(i,v)}catch(e){r(e,"updateSession-1")}window[window._pokiSessionGlobalName]=h;try{n(i,v)}catch(e){r(e,"updateSession-4")}}catch(e){r(e,"updateSession-2")}}(window.location.pathname,"external",A.contentGameID),function(){var e,r,i=null===(e=window[window._pokiUserGlobalName])||void 0===e?void 0:e.id,a=(null===(r=window[window._pokiUserGlobalName])||void 0===r?void 0:r.is_new)||!1;i||(i=t("poki_uid"),a="1"===t("poki_uid_new")),i&&function(e){if(!/^[A-Za-z0-9-_]+$/.test(e))return!1;try{return 16===atob(e.replace(/-/g,"+").replace(/_/g,"/")).length}catch(e){return!1}}(i)||(i=o(),a=!0),n("poki_uid",i),n("poki_uid_new",a?"1":"0"),window[window._pokiUserGlobalName]={id:i,is_new:a}}(),on[on._pokiContextGlobalName]={tag:null,site:{id:null,domain:window.location.hostname,prefix:""},page:{id:A.contentGameID,type:"external",path:window.location.pathname,pageview_id:o()},user:on[on._pokiUserGlobalName],session:on[on._pokiSessionGlobalName]},on.pokiGTM=on.pokiGTM||[],R("https://a.poki.com/t2.js"),a.logToObserver=!0},a.logToObserver=!1,a.cmpRequired=void 0,a.cmpIndex=void 0,a}();const an=rn;const sn=function(){for(var e=Math.floor(Date.now()/1e3),t="",n=0;n<4;n++)t=String.fromCharCode(255&e)+t,e>>=8;if(window.crypto&&crypto.getRandomValues&&Uint32Array){var o=new Uint32Array(12);crypto.getRandomValues(o);for(n=0;n<12;n++)t+=String.fromCharCode(255&o[n])}else for(n=0;n<12;n++)t+=String.fromCharCode(Math.floor(256*Math.random()));return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")};var cn=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},un=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},ln=function(e,t,n){if(n||2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)!o&&r in t||(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},dn=Math.random().toString(36).substr(2,9);function pn(){return cn(this,void 0,void 0,(function(){var e,t,n;return un(this,(function(o){switch(o.label){case 0:return[4,window.cookieStore.getAll()];case 1:return e=o.sent(),window.indexedDB.databases?[4,window.indexedDB.databases()]:[3,3];case 2:return n=o.sent(),[3,4];case 3:n=[],o.label=4;case 4:return t=n,[2,ln(ln(ln([],e.map((function(e){return{name:e.name,expire_seconds:Math.round((e.expires-Date.now())/1e3),type:"cookie",domain:e.domain}})),!0),Object.keys(window.localStorage).map((function(e){return{name:e,expire_seconds:15552e3,type:"localStorage"}})),!0),t.map((function(e){return{name:e.name,expire_seconds:0,type:"idb"}})),!0)]}}))}))}var fn=function(){function e(){}return e.collectAndLog=function(){return cn(this,void 0,void 0,(function(){var e,t;return un(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t={},[4,pn()];case 1:return t.cookies=n.sent(),t.p4d_game_id=A.gameID,t.user_id=dn,e=t,window.fetch("https://t.poki.io/game-cookies",{method:"post",body:JSON.stringify(e)}).catch(),[3,3];case 2:return n.sent(),[3,3];case 3:return[2]}}))}))},e.trackSavegames=function(){window.cookieStore&&window.cookieStore.getAll&&A.gameID&&(Math.random()>.01||navigator.userAgent.indexOf("Safari")>-1&&navigator.userAgent.indexOf("Chrome")<=-1||(e.collectAndLog(),setInterval(e.collectAndLog,12e4)))},e}();const hn=fn;function vn(){var e;try{e=performance.getEntriesByType("resource").map((function(e){return e.transferSize})).reduce((function(e,t){return e+t})),e+=performance.getEntriesByType("navigation")[0].transferSize}catch(e){}return e}var mn=function(){return mn=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},mn.apply(this,arguments)},gn=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},yn=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},wn="once",bn="on",kn="off",Sn=function(){function t(n){var o=this;this.gameStarted=!1,this.duringGameplay=!1,this.fpsStats=new Ut(.01),this.lastInteractionTime=0,this.lastGamePlayStop=0,this.badEventsCounter=0,this.asyncScreenshotLoader=function(){window.addEventListener("message",(function(t){return gn(o,void 0,void 0,(function(){var n;return yn(this,(function(o){switch(o.label){case 0:return"pokiGenerateScreenshot"!==t.data.type?[3,1]:(r=t.data,ut(void 0,void 0,void 0,(function(){var t,n,o,i,a;return lt(this,(function(s){switch(s.label){case 0:return t=r.hasFrame,n=null,t?(o=r.title,i=r.thumbnail,[4,dt({title:o,thumbnail:i})]):[3,2];case 1:return n=s.sent(),[3,4];case 2:return[4,dt()];case 3:n=s.sent(),s.label=4;case 4:return a={screenshot:n,errors:$e},r.callback&&(a.callback=r.callback),T.sendMessage(e.message.sendGameScreenshot,{data:a}),[2]}}))})),[3,4]);case 1:return"pokiGenerateRawScreenshot"!==t.data.type?[3,2]:(ut(void 0,void 0,void 0,(function(){var t;return lt(this,(function(n){switch(n.label){case 0:return[4,vt()];case 1:return t=n.sent(),T.sendMessage(e.message.sendGameRawScreenshot,{data:{screenshot:t}}),[2]}}))})),[3,4]);case 2:return"pokiUploadScreenshot"!==t.data.type?[3,4]:[4,pt(t.data)];case 3:n=o.sent(),T.sendMessage(e.message.sendUploadScreenshot,{data:{screenshot:n}}),o.label=4;case 4:return[2]}var r}))}))}),!1)},this.setupInspector=function(){var t=0;if(window.addEventListener("message",(function(n){return gn(o,void 0,void 0,(function(){return yn(this,(function(o){var r,i;return"pokiInspectorRequestCookies"===n.data.type?pn().then((function(t){T.sendMessage(e.message.sendInspectorCookies,{data:{cookies:t}})})):"pokiInspectorSetFPS"===n.data.type&&(t=n.data.fps||0)&&(r=performance.now(),i=function(){if(t){for(var e=r+1e3/t;!((r=performance.now())>=e););requestAnimationFrame(i)}},requestAnimationFrame(i)),[2]}))}))}),!1),"desktop"!==A.device)try{var n=function(t){var n=console[t];console[t]=function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];T.sendMessage(e.message.sendInspectorConsole,{data:{level:t,message:o.join(" ")}}),n.apply(console,o)}};n("log"),n("warn"),n("error")}catch(e){}},this.initWithVideoHB=function(){return o.init()},this.setDebug=function(t){void 0===t&&(t=!0);var n=window.location.hostname;n.endsWith("poki-gdn.com")||"qa-files.poki.com"===n?t&&an.track(e.tracking.debugTrueInProduction):(E.debug=t,E.log=null!=t?t:E.log,t?function(){if(ot){ot=!1,window.removeEventListener("unhandledrejection",at),window.removeEventListener("error",st);try{console.error=tt}catch(e){}}}():ct())},this.setLogging=function(e){E.log=e},this.gameLoadingFinished=function(){var t,n,o,r;clearInterval(window.pokiCancelProgressInterval),an.track(e.tracking.screen.gameLoadingFinished,{transferSize:vn(),trackers:(o=window,r=[],"function"!=typeof o.ga&&"function"!=typeof o.gtag||r.push("ga"),o.mixpanel&&"function"==typeof o.mixpanel.track&&r.push("mixpanel"),"function"==typeof o.GameAnalytics&&r.push("gameanalytics"),(o.kongregateAPI||o.kongregate)&&r.push("kongregate"),o.FlurryAgent&&r.push("flurry"),o.Countly&&r.push("countly"),o.amplitude&&r.push("amplitude"),r).join(","),error_session_id:rt,now:Math.round(null===(n=null===(t=window.performance)||void 0===t?void 0:t.now)||void 0===n?void 0:n.call(t))||void 0})},this.gameplayStart=function(t){var n;o.ignoreEvents()?E.debug&&console.error("gameplayStart ignored because of too many events"):(o.duringGameplay=!0,o.gameStarted||(o.gameStarted=!0,an.track(e.tracking.screen.firstRound),o.monetization.startStartAdsAfterTimer()),performance.now()-o.lastInteractionTime<5e3&&(n=o.lastInteractionEvent),an.track(e.tracking.screen.gameplayStart,mn(mn({},t),{fps:o.fpsStats.stats(),badEvents:o.badEventsCounter,interaction:n})),clearTimeout(o.playerActiveTimeout),o.playerActiveTimeout=setTimeout((function(){window.addEventListener("pointermove",o.__playerIsActiveEvent),document.addEventListener("keydown",o.__playerIsActiveEvent)}),6e5),o.lastGamePlayStop&&(o.lastGamePlayStop>performance.now()-50&&o.badEventsCounter++,o.lastGamePlayStop=0))},this.gameplayStop=function(t){o.ignoreEvents()?E.debug&&console.error("gameplayStop ignored because of too many events"):(o.duringGameplay=!1,an.track(e.tracking.screen.gameplayStop,mn(mn({},t),{fps:o.fpsStats.stats()})),clearTimeout(o.playerActiveTimeout),window.removeEventListener("pointermove",o.__playerIsActiveEvent),document.removeEventListener("keydown",o.__playerIsActiveEvent),o.lastGamePlayStop=performance.now())},this.roundStart=function(t){void 0===t&&(t=""),o.ignoreEvents()?E.debug&&console.error("roundStart ignored because of too many events"):(t=String(t),an.track(e.tracking.screen.roundStart,{identifier:t}))},this.roundEnd=function(t){void 0===t&&(t=""),o.ignoreEvents()?E.debug&&console.error("roundEnd ignored because of too many events"):(t=String(t),an.track(e.tracking.screen.roundEnd,{identifier:t}))},this.measure=function(t,n,o){void 0===n&&(n=""),void 0===o&&(o=""),an.track(e.tracking.measure,{category:"".concat(t),action:"".concat(n),label:"".concat(o),p4d_game_id:A.gameID,p4d_version_id:A.versionID})},this.customEvent=function(t,n,r){void 0===r&&(r={}),t&&n?(t=String(t),n=String(n),r=mn({},r),"game"===t&&"segment"===n&&r.segment&&o.measure(r.segment),an.track(e.tracking.custom,{eventNoun:t,eventVerb:n,eventData:r})):o.error("customEvent","customEvent needs at least a noun and a verb")},this.commercialBreak=function(t){return new Promise((function(n){if(o.ignoreEvents())return E.debug&&console.error("commercialBreak ignored because of too many events"),void n();var r=o.gameStarted?e.ads.position.midroll:e.ads.position.preroll;o.monetization.requestAd({position:r,onFinish:n,onStart:t})}))},this.rewardedBreak=function(t,n,r,i){return new Promise((function(a){var s,c={};"function"==typeof t?(s=t,void 0!==n&&(c.category=n),void 0!==r&&(c.details=r),void 0!==i&&(c.placement=i)):(void 0!==t&&(c.category=t),void 0!==n&&(c.details=n),void 0!==r&&(c.placement=r)),setTimeout((function(){c.category&&performance.now()-o.lastInteractionTime<500&&(c.from=o.lastInteractionEvent);var t=e.ads.position.rewarded;o.monetization.requestAd({position:t,onFinish:function(e){a(!!(null==e?void 0:e.rewardAllowed))},onStart:s,rewardedKVs:c})}),0)}))},this.displayAd=function(t,n,r,i){var a=sn();an.track(e.tracking.screen.displayAd,{size:n,opportunityId:a,duringGameplay:o.duringGameplay});var s={container:t,opportunityId:a,size:n,duringGameplay:function(){return o.duringGameplay},onCanDestroy:r,onDisplayRendered:i};o.monetization.displayAd(s)},this.isAdBlocked=function(){return!1},this.muteAd=function(){o.monetization.muteAd()},this.logError=function(e){o.captureError(e)},this.setPlaytestCanvas=function(e){return o.playtestSetCanvas(e)},this.playtestSetCanvas=function(e){var n;e?(t.__playtestCanvas=[].concat(e),n=t.__playtestCanvas,bt=n,Ft(!0)):t.__playtestCanvas=[]},this.playtestCaptureHtmlOnce=function(){t.__playtestCaptureHTML=wn},this.playtestCaptureHtmlOn=function(){t.__playtestCaptureHTML=bn},this.playtestCaptureHtmlOff=function(){t.__playtestCaptureHTML=kn},this.getIsoLanguage=function(){return v("iso_lang")},this.shareableURL=function(t){return void 0===t&&(t={}),new Promise((function(n,o){var r=new URLSearchParams,i=Object.keys(t);if(A.isPokiIframe||A.isInspector){var a=v("poki_url");i.forEach((function(e){void 0!==t[e]&&null!==t[e]&&r.set("gd".concat(e),t[e])})),n("".concat(a,"?").concat(r.toString())),T.sendMessage(e.message.setPokiURLParams,{params:t})}else window.self===window.top?(i.forEach((function(e){void 0!==t[e]&&null!==t[e]&&r.set("".concat(e),t[e])})),n("".concat(window.location.origin).concat(window.location.pathname,"?").concat(r.toString()))):o(new Error("shareableURL only works on Poki or a top level frame"))}))},this.getURLParam=function(e){return v("gd".concat(e))||v(e)},this.captureError=function(e){it(e)},this.getLanguage=function(){return navigator.language.toLowerCase().split("-")[0]},this.generateScreenshot=function(){return gn(o,void 0,void 0,(function(){return yn(this,(function(e){return[2,dt()]}))}))},this.enableEventTracking=function(e){window.top===window&&an.setupObserverWithCMP(e||0)},this.error=function(e,t){console.error("PokiSDK.".concat(e,": ").concat(t))},this.__playerIsActiveEvent=function(){window.removeEventListener("pointermove",o.__playerIsActiveEvent),document.removeEventListener("keydown",o.__playerIsActiveEvent),an.track(e.tracking.screen.playerActive),o.playerActiveTimeout=setTimeout((function(){window.addEventListener("pointermove",o.__playerIsActiveEvent),document.addEventListener("keydown",o.__playerIsActiveEvent)}),6e5)},this.__interactionEvent=function(e){"mousedown"===e.type?o.lastInteractionEvent="mousedown":"pointerdown"===e.type?o.lastInteractionEvent="pointerdown":"keydown"===e.type&&(o.lastInteractionEvent="keydown-".concat(e.code)),o.lastInteractionTime=performance.now()},this.setDebugTouchOverlayController=function(){},this.gameInteractive=function(){},this.gameLoadingProgress=function(){},this.gameLoadingStart=function(){},this.getLeaderboard=function(){return Promise.resolve([])},this.happyTime=function(){},this.sendHighscore=function(){},this.setPlayerAge=function(){},this.monetization=n,this.SDK=this.monetization,setInterval((function(){o.badEventsCounter=Math.max(o.badEventsCounter-1,0)}),1e3)}return t.prototype.init=function(t){var n=this;return void 0===t&&(t={}),window.addEventListener("pointerdown",this.__interactionEvent),document.addEventListener("keydown",this.__interactionEvent),new Promise((function(o){n.monetization.init(mn({onReady:function(){v("preroll")&&n.monetization.forcePreroll(),o()}},t)),n.asyncScreenshotLoader(),A.isInspector&&n.setupInspector(),T.sendMessage(e.message.sdkDetails,{version:"7ccc01049d997f672a7cc4be72ee4de861998da1"})}))},t.prototype.ignoreEvents=function(){return this.badEventsCounter>=10},t.prototype.destroyAd=function(e){this.monetization.destroyAd(e)},t.prototype.setVolume=function(e){this.monetization.setVolume(e)},t.__playtestCaptureHTML="",t}();const An=Sn;var Tn=21682198607;const xn={adTagUrl:"//pubads.g.doubleclick.net/gampad/ads?sz=640x360|640x480&iu=/1053551/Pub-Poki-Generic&ciu_szs&impl=s&gdfp_req=1&env=vp&output=xml_vast2&unviewed_position_start=1&url={url}&description_url={descriptionUrl}&correlator={timestamp}&nofb=1",adTiming:{preroll:!1,timeBetweenAds:12e4,timePerTry:7e3,startAdsAfter:12e4},waterfallRetries:2};function En(e){var t="/".concat(Tn,"/debug-display/debug-display-").concat(e);return E.debug||(t=A.isPokiIframe?"/".concat(Tn,"/").concat(A.device,"_ingame_").concat(e,"/").concat(A.siteID,"_").concat(A.device,"_ingame_").concat(e):"/".concat(Tn,"/external_").concat(A.device,"_display_ingame/external_").concat(A.device,"_ingame_").concat(e)),t}var Pn=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},In=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};const _n=function(){var e=window.location.pathname;"/"!==e[0]&&(e="/".concat(e));var t=encodeURIComponent("".concat(window.location.protocol,"//").concat(window.location.host).concat(e).concat(window.location.search)),n=encodeURIComponent(document.referrer),o="https://devs-api.poki.com/gameinfo/@sdk?href=".concat(t,"&referrer=").concat(n);return fetch(o,{method:"GET",headers:{"Content-Type":"text/plain"}}).then((function(e){return Pn(void 0,void 0,void 0,(function(){var t;return In(this,(function(n){switch(n.label){case 0:return e.status>=200&&e.status<400?[4,e.json()]:[3,2];case 1:return(t=n.sent()).game_id?[2,{gameID:t.game_id,gameTitle:t.game_name,playtestLobbyID:t.playtest_lobby_id,playtestRecord:t.playtest_record,playtestVersion:t.playtest_version,cachedContentGameID:t.cached_content_game_id,specialConditions:t.ad_settings.special_conditions,adTiming:{preroll:t.ad_settings.preroll,timePerTry:t.ad_settings.time_per_try,timeBetweenAds:t.ad_settings.time_between_ads,startAdsAfter:t.ad_settings.start_ads_after}}]:[2,void 0];case 2:throw e}}))}))})).catch((function(e){return function(e){return Pn(this,void 0,void 0,(function(){var t,n,o,r,i,a,s,c,u,l,d,p;return In(this,(function(f){switch(f.label){case 0:console.error(e),f.label=1;case 1:return f.trys.push([1,4,,5]),"/"!==(t=window.location.pathname)[0]&&(t="/".concat(t)),r=(o=JSON).stringify,l={c:"sdk-p4d-error",ve:7},d={k:"error"},a=(i=JSON).stringify,p={status:e.status},(s=e.json)?[4,e.json()]:[3,3];case 2:s=f.sent(),f.label=3;case 3:if(n=r.apply(o,[(l.d=[(d.v=a.apply(i,[(p.json=s,p.body=JSON.stringify({href:"".concat(window.location.protocol,"//").concat(window.location.host).concat(t).concat(window.location.search)}),p.name=e.name,p.message=e.message,p)]),d)],l)]),c="https://t.poki.io/l",navigator.sendBeacon)navigator.sendBeacon(c,n);else try{(u=new XMLHttpRequest).open("POST",c,!0),u.send(n)}catch(e){}return[3,5];case 4:return f.sent(),[3,5];case 5:return[2]}}))}))}(e)}))};const Cn=function(e){return e instanceof Array?e:[e]};var Ln=function(){function t(t){void 0===t&&(t={}),this.setTimings(t),this.timingIdx={timePerTry:0},this.timers={timePerTry:void 0,timeBetweenAds:void 0,startAdsAfter:void 0},(null==t?void 0:t.fake)||(L.addEventListener(e.ads.requested,this.startTimeBetweenAdsTimer.bind(this)),L.addEventListener(e.ads.completed,this.startTimeBetweenAdsTimer.bind(this)),L.addEventListener(e.ads.stopped,this.startTimeBetweenAdsTimer.bind(this)))}return t.prototype.setTimings=function(e){var t=xn.adTiming,n=e.preroll,o=void 0===n?t.preroll:n,r=e.timePerTry,i=void 0===r?t.timePerTry:r,a=e.timeBetweenAds,s=void 0===a?t.timeBetweenAds:a,c=e.startAdsAfter,u=void 0===c?t.startAdsAfter:c;this.timings={preroll:!1!==o,timePerTry:Cn(i),timeBetweenAds:s,startAdsAfter:u}},t.prototype.resetAll=function(){this.timingIdx={timePerTry:0},this.stopTimer("timePerTry"),this.stopTimer("timeBetweenAds"),this.stopTimer("startAdsAfter")},t.prototype.startTimeBetweenAdsTimer=function(){this.startTimer("timeBetweenAds")},t.prototype.startStartAdsAfterTimer=function(){this.startTimer("startAdsAfter")},t.prototype.requestPossible=function(){return!this.timers.timeBetweenAds&&!this.timers.startAdsAfter},t.prototype.startWaterfallTimer=function(e){this.startTimer("timePerTry",e)},t.prototype.stopWaterfallTimer=function(){this.stopTimer("timePerTry")},t.prototype.nextWaterfallTimer=function(){this.nextTiming("timePerTry")},t.prototype.resetWaterfallTimerIdx=function(){this.resetTimingIdx("timePerTry")},t.prototype.stopTimer=function(e){this.timers[e]&&(clearTimeout(this.timers[e]),this.timers[e]=void 0)},t.prototype.startTimer=function(e,t){var n=this;void 0===t&&(t=function(){}),this.getTiming(e)<=0?t():(this.timers[e]&&clearTimeout(this.timers[e]),this.timers[e]=window.setTimeout((function(){n.stopTimer(e),t()}),this.getTiming(e)))},t.prototype.getTiming=function(e){var t=this.timings[e];return t instanceof Array?t[this.timingIdx[e]]:t},t.prototype.nextTiming=function(e){if(void 0===this.timingIdx[e])throw new Error("AdTimings Error: ".concat(e," does not have multiple timers"));this.timingIdx[e]=(this.timingIdx[e]+1)%this.timings[e].length},t.prototype.resetTimingIdx=function(e){if(void 0===this.timingIdx[e])throw new Error("AdTimings Error: ".concat(e," does not have multiple timers"));this.timingIdx[e]=0},t.prototype.prerollPossible=function(){return this.timings.preroll},t}();const Dn=Ln;var Mn="MacIntel"===window.navigator.platform&&void 0!==window.navigator.standalone&&navigator.maxTouchPoints>1,Rn=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},On=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function Nn(){var e;return Rn(this,void 0,void 0,(function(){var t;return On(this,(function(n){return A.isPokiIframe?["GB","NL"].includes(A.country)||m()||g()||"4g"!==(null===(e=navigator.connection)||void 0===e?void 0:e.effectiveType)||(null===navigator||void 0===navigator?void 0:navigator.hardwareConcurrency)<8||Mn?[2,!1]:(t=document.createElement("canvas").getContext("webgl2",{failIfMajorPerformanceCaveat:!0}))?t.getParameter(t.MAX_RENDERBUFFER_SIZE)<16384?[2,!1]:[2,!0]:[2,!1]:[2,!1]}))}))}function Bn(e){if(document.body&&document.body.appendChild){var t=document.createElement("iframe");t.style.display="none",document.body.appendChild(t),t.contentWindow&&(t.contentWindow.document.open(),t.contentWindow.document.write("<script>".concat(e,"<\/script>")),t.contentWindow.document.close())}else document.addEventListener("DOMContentLoaded",(function(){Bn(e)}))}function Gn(){Bn("\nwindow.addEventListener('storage', function(event) {\n\ttry {\n\t\tconst key = event.key;\n\n\t\t// key is null when localStorage.clear() is called.\n\t\tif (key === null) {\n\t\t\twindow.top.postMessage({\n\t\t\t\ttype: 'mutateSaveGame',\n\t\t\t\tcontent: {\n\t\t\t\t\taction: 'clear',\n\t\t\t\t},\n\t\t\t}, '*');\n\t\t\treturn;\n\t\t}\n\n\t\t// newValue is null when localStorage.removeItem() is called.\n\t\tif (event.newValue === null) {\n\t\t\twindow.top.postMessage({\n\t\t\t\ttype: 'mutateSaveGame',\n\t\t\t\tcontent: {\n\t\t\t\t\taction: 'delete',\n\t\t\t\t\tkey,\n\t\t\t\t},\n\t\t\t}, '*');\n\t\t} else {\n\t\t\twindow.top.postMessage({\n\t\t\t\ttype: 'mutateSaveGame',\n\t\t\t\tcontent: {\n\t\t\t\t\taction: 'set',\n\t\t\t\t\tkey,\n\t\t\t\t\tvalue: event.newValue,\n\t\t\t\t},\n\t\t\t}, '*');\n\t\t}\n\t} catch (e) {}\n});\n")}var Vn=function(){A.isPokiIframe&&(setTimeout(hn.trackSavegames,1e4),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&Gn())},Fn=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},jn=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},Hn="none",zn="requesting",qn=function(){function t(){var t=this;this.callbacks={},this.adTiming=xn.adTiming,this.mutationChecker=new MutationObserver(this.mutationObserved.bind(this)),this.videoState=Hn,this.adTimings=new Dn({fake:!0}),this.initializing=!1,this.init=function(n){if(!t.initializing){t.initializing=!0;var o=n.onReady,r=void 0===o?null:o;Vn(),A.kioskMode&&document.addEventListener("keydown",(function(e){"Escape"===e.key&&t.postSDKMessage("keydownEscape")}));var i=function(){var e,n=1;t.callbacks.playgroundInit=function(){clearTimeout(e),null==r||r()};var o=function(){t.postSDKMessage("adTiming",{adTiming:t.adTiming,specialConditions:t.specialConditions}),n++,e=setTimeout(o,100*n)};e=setTimeout(o,100*n)};if(A.forceAd)return t.adTiming={preroll:!0,timeBetweenAds:12e4,timePerTry:7e3,startAdsAfter:0},void i();E.debug?i():_n().then((function(n){t.adTiming=(null==n?void 0:n.adTiming)||xn.adTiming,t.specialConditions=(null==n?void 0:n.specialConditions)||[],i(),n&&function(t){return Rn(this,void 0,void 0,(function(){var n;return On(this,(function(o){switch(o.label){case 0:return t.playtestVersion&&t.playtestVersion!==A.versionID?[2,!1]:t.playtestRecord?[4,Nn()]:[2,!1];case 1:return n=o.sent(),an.track(e.tracking.playtest.showModal,{show:n}),[2,n]}}))}))}(n).then((function(e){e&&en(n)})).catch((function(e){console.error("%cPOKI_PLAYTEST:%c","font-weight: bold","",e)}))})).catch((function(){i()}))}},this.isAdBlocked=function(){return!1},this.postSDKMessage=function(n,o){return void 0===o&&(o={}),Fn(t,void 0,void 0,(function(){return jn(this,(function(t){return T.sendMessage(e.message.sendCommand,{event:n,data:o},window.top),[2]}))}))},this.handleMessageReceived=function(n){var o,r,i,a,s,c,u,l,d,p,f,h;switch(null===(o=null==n?void 0:n.data)||void 0===o?void 0:o.type){case"hoist_displayAd_onDisplayRendered":var v=null===(r=null==n?void 0:n.data)||void 0===r?void 0:r.data,m=v.opportunityId,g=v.isEmpty;null===(a=null===(i=t.callbacks[m])||void 0===i?void 0:i.onDisplayRendered)||void 0===a||a.call(i,g);break;case"hoist_displayAd_onCanDestroy":m=(null===(s=null==n?void 0:n.data)||void 0===s?void 0:s.data).opportunityId;null===(u=null===(c=t.callbacks[m])||void 0===c?void 0:c.onCanDestroy)||void 0===u||u.call(c);break;case"hoist_videoAd_onStart":m=(null===(l=null==n?void 0:n.data)||void 0===l?void 0:l.data).opportunityId;if(t.videoState!==zn)return;if(!t.callbacks[m])return;var y=t.callbacks[m],w=y.onStart,b=y.position;w&&w(),L.dispatchEvent(e.playtest.startVideo,{position:b}),t.videoState="playing";break;case"hoist_videoAd_onFinish":var k=null===(d=null==n?void 0:n.data)||void 0===d?void 0:d.data,S=(m=k.opportunityId,k.rewardAllowed);if(!t.callbacks[m])return;var A=t.callbacks[m],T=A.onFinish;b=A.position;if(t.videoState===zn)return T&&(b===e.ads.position.rewarded?T(!!S):T()),t.videoState=Hn,void delete t.callbacks[m];T&&T(S),L.dispatchEvent(e.playtest.stopVideo),t.videoState=Hn,delete t.callbacks[m];break;case"hoist_playgroundInit":null===(f=(p=t.callbacks).playgroundInit)||void 0===f||f.call(p),delete t.callbacks.playgroundInit;break;case"hoist_displayAd_destroy":var x=(null===(h=null==n?void 0:n.data)||void 0===h?void 0:h.data).containerID;t.cleanAdContainer(x)}},this.cleanAdContainer=function(e){var t=document.querySelector('*[data-poki-ad-container-id="'.concat(e,'"]'));if(t){for(;t.lastChild;)t.removeChild(t.lastChild);t.removeAttribute("data-poki-opportunity-id"),t.removeAttribute("data-poki-ad-container-id")}}}return t.prototype.forcePreroll=function(){this.postSDKMessage("forcePreroll")},t.prototype.startStartAdsAfterTimer=function(){this.postSDKMessage("startStartAdsAfterTimer")},t.prototype.muteAd=function(){this.postSDKMessage("muteAd")},t.prototype.setVolume=function(e){this.postSDKMessage("setVolume",{volume:e||1})},t.prototype.requestAd=function(t){var n=t.onStart,o=t.onFinish,r=t.position,i=t.customCriteria,a=sn();this.videoState===Hn?(this.videoState=zn,this.callbacks[a]={position:r,onStart:function(){n&&"function"==typeof n&&n()},onFinish:function(e){o&&"function"==typeof o&&o({rewardAllowed:e})}},this.postSDKMessage("requestVideoAd",{position:r,customCriteria:i,opportunityId:a})):o&&(r===e.ads.position.rewarded?o({rewardAllowed:!1}):o())},t.prototype.displayAd=function(e){var t;if(A.kioskMode)return!1;var n=e.container,o=e.size,r=e.opportunityId,i=e.onCanDestroy,a=e.onDisplayRendered;if(!n)return console.error("displayAd: given container doesn't exist"),!1;var s=n.getAttribute("data-poki-ad-container-id")||sn();this.cleanAdContainer(s),n.setAttribute("data-poki-ad-container-id",s),n.setAttribute("data-poki-opportunity-id",r);var c=o.split("x").map((function(e){return parseInt(e,10)})),u=c[0],l=c[1],d=document.createElement("div");d.style.width="".concat(u,"px"),d.style.height="".concat(l,"px"),d.style.overflow="hidden",d.style.position="relative",d.style.pointerEvents="none",n.appendChild(d);var p=n.getBoundingClientRect(),f={x:(null==p?void 0:p.x)||0,y:(null==p?void 0:p.y)||0,w:u||0,h:l||0};return this.callbacks[r]={onCanDestroy:function(){i&&"function"==typeof i&&i()},onDisplayRendered:function(e){a&&"function"==typeof a&&a(e)}},this.mutationChecker.observe(n.parentElement||document.body,{childList:!0}),this.mutationChecker.observe(n,{attributes:!0,attributeFilter:["style"]}),this.postSDKMessage("displayAd",{containerID:s,adUnitPath:En(o),size:e.size,opportunityId:r,duringGameplay:(null===(t=e.duringGameplay)||void 0===t?void 0:t.call(e))||!1,location:f}),!0},t.prototype.destroyAd=function(e){if(e){var t=e.getAttribute("data-poki-opportunity-id"),n=e.getAttribute("data-poki-ad-container-id");n&&(delete this.callbacks[t],this.cleanAdContainer(n),this.postSDKMessage("destroyAd",{containerID:n,opportunityId:t}))}else console.error("destroyAd: given container doesn't exist")},t.prototype.mutationObserved=function(e){var t=this;e.forEach((function(e){var n,o,r,i,a;"childList"===(null==e?void 0:e.type)&&(null===(o=null===(n=e.removedNodes)||void 0===n?void 0:n.forEach)||void 0===o||o.call(n,(function(e){var n;(null===(n=null==e?void 0:e.getAttribute)||void 0===n?void 0:n.call(e,"data-poki-ad-container-id"))&&t.destroyAd(e)}))),"attributes"===(null==e?void 0:e.type)&&(null===(i=null===(r=null==e?void 0:e.target)||void 0===r?void 0:r.getAttribute)||void 0===i?void 0:i.call(r,"data-poki-ad-container-id"))&&("none"===(null==(a=e.target)?void 0:a.style.display)||parseInt(a.style.opacity,10)<1||"hidden"===a.style.visibility)&&t.destroyAd(e.target)}))},t.prototype.stopVideoAd=function(){},t.prototype.resizeVideoAd=function(){},t.prototype.setAdTimings=function(e){},t.prototype.setSpecialConditions=function(e){},t}();const Un=qn;var Wn,Jn=(Wn=function(e,t){return Wn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Wn(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Wn(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Kn=function(e){function t(){var t=this,n=new Un;return(t=e.call(this,n)||this).SDK=n,window.addEventListener("message",t.monetization.handleMessageReceived),t}return Jn(t,e),t}(An);var Qn=new Kn;for(var Yn in Qn)window.PokiSDK[Yn]=Qn[Yn]})();