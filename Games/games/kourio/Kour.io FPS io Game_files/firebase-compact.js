const _0x4ceff7=_0x1d11;function version0004(){}!function(){for(var e=_0x1d11,n=_0x4f31();;)try{if(556487==+parseInt(e(586))+-parseInt(e(641))/2*(-parseInt(e(686))/3)+-parseInt(e(506))/4+-parseInt(e(512))/5*(-parseInt(e(644))/6)+parseInt(e(690))/7+parseInt(e(691))/8+-parseInt(e(597))/9*(parseInt(e(504))/10))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const _0x13ccd4=_0x4ceff7(709);var _0x24a88c={apiKey:_0x4ceff7(584),authDomain:_0x4ceff7(746),projectId:_0x4ceff7(732),databaseURL:_0x4ceff7(481),storageBucket:_0x4ceff7(603),messagingSenderId:_0x4ceff7(636),appId:_0x4ceff7(625),measurementId:_0x4ceff7(580)};firebase.initializeApp(_0x24a88c),window[_0x4ceff7(715)]=generateSessionId();const _0x18e573=firebase[_0x4ceff7(598)]();function loginWithUsernameAndPassword(t,e){const r=_0x4ceff7;firebase.auth()[r(607)](t+r(484),e)[r(596)](e=>{var n=r;window[n(536)]=e[n(536)],unityInstance.SendMessage(_0x13ccd4,n(675),n(485)),showUserDetails(e.user[n(623)]=t,e[n(536)])})[r(576)](n=>{var t=r;try{var e=JSON.parse(n[t(581)])[t(616)][t(581)];unityInstance[t(639)](_0x13ccd4,"UsernameLoginResultJS",formatErrorMessage(e)),console.error("Login failed:",e)}catch(e){unityInstance[t(639)](_0x13ccd4,t(675),n[t(581)]),console[t(616)](t(499),n.message)}})}function registerWithUsernameAndPassword(r,c){const o=_0x4ceff7,e=document[o(594)](o(503)),s=(e&&e[o(698)](),document[o(487)](o(523)));s[o(678)]("id",o(503)),s[o(757)][o(532)]=o(626);var n=document[o(487)](o(523));n[o(678)]("id",o(758)),s[o(613)](n),document[o(637)][o(613)](s),grecaptcha[o(497)]("recaptchaContainer",{sitekey:"6LcbHsEpAAAAANYI5zG8Locf0rVzqpS-rNfXZF1M",theme:o(477),callback:function(e){const t=o;fetch(t(495),{method:t(509),headers:{"Content-Type":t(642)},body:JSON[t(502)]({username:r,password:c,recaptchaToken:e})}).then(e=>e[t(472)]()).then(e=>{var n=t;e[n(618)]?(unityInstance[n(639)](_0x13ccd4,n(752),n(485)),loginWithUsernameAndPassword(r,c)):unityInstance[n(639)](_0x13ccd4,"UsernameRegisterResultJS",n(566)+e[n(581)])}).catch(e=>{var n=t;unityInstance[n(639)](_0x13ccd4,n(752),n(566)+e[n(581)])}).finally(()=>{var e=t;document[e(637)][e(741)](s)})}}),s[o(517)]("click",e=>{var n=o;e[n(749)]===s&&(unityInstance[n(639)](_0x13ccd4,"UsernameRegisterResultJS",n(659)),document.body[n(741)](s))}),n.addEventListener(o(585),e=>e[o(673)]())}function formatErrorMessage(e){const n=_0x4ceff7,t=e[n(742)](),r=t[n(490)]("_")[n(738)](e=>e[n(671)](0)[n(662)]()+e[n(730)](1)),c=r[n(528)](" ");return c}function GoogleLogin(){const t=_0x4ceff7;var e=new firebase[t(634)][t(648)];firebase[t(634)]()[t(595)](e)[t(596)](e=>{showUserDetails("",e.user)})[t(576)](e=>{var n=t;console[n(652)]("Google Login Error:"),console[n(652)](e)})}function EmailPasswordLogin(e){const n=_0x4ceff7;var[r,c]=e[n(490)](":");firebase[n(634)]()[n(607)](r,c)[n(596)](e=>{showUserDetails("",e[n(536)])})[n(576)](e=>{const t=n;e[t(711)]===t(685)?firebase[t(634)]()[t(633)](r,c).then(e=>{showUserDetails("",e[t(536)])}).catch(e=>{var n=t;console[n(652)]("Email and Password Registration Error:"),console[n(652)](e)}):(console.log(t(522)),console.log(e))})}function FacebookLogin(){const r=_0x4ceff7;var e=new firebase[r(634)][r(508)];firebase[r(634)]()[r(595)](e).then(e=>{const t=r;showUserDetails("",e[t(536)]);var n=firebase[t(634)]().currentUser,e=firebase[t(634)].FacebookAuthProvider[t(708)](e[t(708)][t(491)]);n[t(602)](e)[t(596)](function(){var e=t;console.log(e(492))}).catch(function(e){var n=t;console[n(652)]("Error linking Facebook account:",e)})})[r(576)](e=>{var n=r;console[n(652)](n(572)),console[n(652)](e)})}function TwitterLogin(){const t=_0x4ceff7;var e=new firebase[t(634)][t(680)];firebase[t(634)]()[t(595)](e)[t(596)](e=>{var n=t;console[n(652)](n(535)),showUserDetails("",e[n(536)])})[t(576)](e=>{var n=t;console.log(n(479)),console.log(e)})}function requestUserData(){var e=_0x4ceff7;window.blockedAds&&unityInstance[e(639)](e(493),"OnAdsBlocked"),typeof unityInstance!==e(695)&&typeof window[e(579)]!==e(695)&&unityInstance.SendMessage(_0x13ccd4,"OnLoggedInGoogle",window[e(579)])}function showUserDetails(e,n){const t=_0x4ceff7;setupOnlineStatusTracking();n.displayName||(e=e,{}[t(623)]=e);var e=extractUsername(n.email)+"|"+n[t(699)]+"|"+t(646)+"|"+n[t(674)];window[t(579)]=e,typeof unityInstance!==t(695)&&void 0!==window.loginData&&(e=_0x18e573[t(545)](t(701)+n.uid+t(643)),window[t(725)]||(window[t(725)]=!0,e[t(474)](window[t(715)])),e.on(t(601),e=>{var n=t,e=(window[n(725)]=!0,e[n(719)]());e&&e!==window.firebaseSessionId&&(console[n(616)]("Invalid session ID detected. Expected: "+window.firebaseSessionId+", Actual: "+e+n(692)),isNullOrWhitespace(window.firebaseSessionId)||isNullOrWhitespace(e)?console.error(n(693)):(console[n(616)](n(544)+window[n(715)]+n(682)+e+"."),unityInstance[n(639)](_0x13ccd4,n(514),n(627))))}),unityInstance[t(639)](_0x13ccd4,t(548),window.loginData))}function extractUsername(e){var n=_0x4ceff7;return e[n(704)]("@")?e[n(490)]("@")[0]:n(717)}let _0x29aaba=window[_0x4ceff7(725)]=!1,_0x1931b7=null;function setupOnlineStatusTracking(){const t=_0x4ceff7,e=firebase[t(634)]()[t(733)];if(e){var n=e[t(674)];_0x29aaba&&_0x1931b7&&(_0x1931b7.onDisconnect()[t(702)](),_0x29aaba=!1);const r=firebase.database().ref(t(476)+n);_0x1931b7=r,firebase[t(598)]()[t(545)](t(525)).on(t(601),e=>{var n=t;!1!==e[n(719)]()&&(r.onDisconnect()[n(698)](),r.set(!0))}),_0x29aaba=!0}}function tearDownOnlineStatusTracking(){var e=_0x4ceff7;_0x29aaba&&_0x1931b7&&(_0x1931b7[e(591)]()[e(702)](),_0x1931b7[e(698)](),_0x29aaba=!1)}function setUserEmail(e,n,t){const r=_0x4ceff7,c=t===r(606),o=firebase.database()[r(545)](r(543)+e+"/"+n);o[r(474)](c)[r(596)](()=>{console.log("Email consent for "+n+" set to "+c)})[r(576)](e=>{var n=r;console[n(616)](n(712),e)})}function signOutSessionError(){var e=_0x4ceff7;window.hasSetSession=!1,tearDownOnlineStatusTracking(),stopListeningForInvites(),firebase[e(634)]()[e(656)](),location[e(713)]()}function isNullOrWhitespace(e){return null==e||""===e.trim()}function checkIfAdmin(){const t=_0x4ceff7;window[t(536)]&&window[t(536)][t(549)]()[t(596)](e=>{var n=t;!0===e[n(567)][n(687)]?unityInstance[n(639)]("MainManager",n(655),"1"):unityInstance[n(639)]("MainManager","OnReceivedIsAdmin","0")})[t(576)](e=>{var n=t;console[n(616)]("Error getting ID token result:",e),unityInstance[n(639)]("MainManager",n(655),e[n(581)][n(565)]())})}function getPromoCode(t){const r=_0x4ceff7;_0x18e573[r(545)](r(511)+t)[r(501)](r(601)).then(function(e){var n=r,e=e[n(719)](),e=JSON[n(502)](e);console[n(652)]("Promo value: "+e),unityInstance[n(639)](_0x13ccd4,n(533),e)})[r(576)](e=>{var n=r;console[n(652)]("Error getting promo code for promo: "+t+n(556)+e),unityInstance[n(639)](_0x13ccd4,n(533),"Error")})}function setData(e,n,r,c,o){const s=_0x4ceff7;_0x18e573[s(545)](e).update({[r]:c},e=>{const t=s;e?unityInstance[t(639)](_0x13ccd4,"OnSetData",JSON[t(502)]({err:e})+"&"+o):n?_0x18e573[t(545)](n)[t(524)]({[r]:c},e=>{var n=t;unityInstance[n(639)](_0x13ccd4,"OnSetData",JSON[n(502)]({err:e})+"&"+o)}):unityInstance[t(639)](_0x13ccd4,t(721),JSON[t(502)]({err:null})+"&"+o)})}function setDataNew(e,n,t,r){const c=_0x4ceff7;t=isNaN(t)||""===t[c(658)]()?t:parseInt(t);_0x18e573[c(545)](e)[c(524)]({[n]:t},e=>{var n=c;unityInstance[n(639)](_0x13ccd4,n(721),JSON[n(502)]({err:e})+"&"+r)})}function createClan(e,n,t,r){create_Clan(e,n,t).then(e=>{var n=_0x1d11;e?(console[n(652)]("Clan created with key: "+e),unityInstance[n(639)](_0x13ccd4,n(670),e+"&"+r)):(console.log(n(689)),unityInstance[n(639)](_0x13ccd4,n(670),n(537)+r))})}function create_Clan(n,r,c){const o=_0x4ceff7,s=_0x18e573[o(545)](o(510))[o(553)](n);return s[o(501)]("value")[o(596)](e=>{const t=o;return e[t(729)]()?(console[t(616)](t(681)),Promise[t(568)](t(700))):(e={name:n,leader:r,color:c,requests:{},members:{[r]:!0}},s[t(474)](e)[t(596)](()=>{var e=t;return console[e(652)]("Clan created successfully!"),n})[t(576)](e=>{var n=t;return console[n(616)](n(716),e),null}))}).catch(e=>{var n=o;return console[n(616)](n(638),e),null})}function addMember(c,o,t,s){const a=_0x4ceff7,i=(console[a(652)]("ERROR CAPTURING: addMember: clanName="+c+a(588)+o+a(754)+t+a(539)+s),_0x18e573.ref(a(510)).child(c));i[a(553)](a(540))[a(501)](a(601))[a(596)](e=>{const r=a,n=e[r(719)]();n===t?i[r(553)](r(609))[r(553)](o)[r(501)](r(601))[r(596)](e=>{const t=r;e.exists()?i[t(553)](t(684))[t(553)](o)[t(474)](!0).then(()=>{const r=t;console.log("Member "+o+r(743)+c),_0x18e573.ref("users/"+o+r(710)).set(c).then(()=>{const t=r;e[t(545)][t(698)]()[t(596)](()=>{var e=t;unityInstance.SendMessage(_0x13ccd4,e(670),e(558)+s)}).catch(e=>{var n=t;console[n(616)](n(728),e),unityInstance[n(639)](_0x13ccd4,n(670),n(537)+s)})}).catch(e=>{var n=r;console[n(616)](n(714),e),unityInstance[n(639)](_0x13ccd4,n(670),n(537)+s)})}).catch(e=>{var n=t;console.error("Error adding member to clan: ",e),unityInstance[n(639)](_0x13ccd4,n(670),n(537)+s)}):(console[t(616)](t(589)),unityInstance[t(639)](_0x13ccd4,t(670),t(500)+s))}).catch(e=>{var n=r;console.error(n(632),e),unityInstance[n(639)](_0x13ccd4,n(670),n(537)+s)}):(console[r(616)](r(676)),unityInstance[r(639)](_0x13ccd4,r(670),r(546)+s))})[a(576)](e=>{var n=a;console[n(616)](n(731),e),unityInstance[n(639)](_0x13ccd4,"OnSetDataNew","Failed&"+s)})}function removePlayerFromClan(c,o,s,a){const r=_0x4ceff7,i=_0x18e573.ref(r(510)).child(c),d=i.child(r(684)),l=i.child(r(540));l.once("value")[r(596)](e=>{const t=r,n=e[t(719)]();n===o?i.remove()[t(596)](()=>{const r=t;console[r(652)](r(515)+o+r(669)+c+r(630)),d[r(501)](r(601))[r(596)](e=>{const t=r;e[t(531)](e=>{var n=t;_0x18e573.ref(n(701)+e.key+n(710)).remove()})})[r(596)](()=>{var e=r;unityInstance[e(639)](_0x13ccd4,"OnSetDataNew",e(558)+a)}).catch(e=>{var n=r;console.error("Error removing 'clan' property for members: ",e),unityInstance[n(639)](_0x13ccd4,n(670),"Failed&"+a)})})[t(576)](e=>{var n=t;console[n(616)](n(737),e),unityInstance[n(639)](_0x13ccd4,n(670),n(537)+a)}):d[t(553)](o)[t(501)](t(601))[t(596)](e=>{const r=t;e[r(729)]()?_0x18e573.ref(r(701)+o+"/public/clan")[r(698)]()[r(596)](()=>{const t=r;e[t(545)][t(698)]()[t(596)](()=>{const r=t;d[r(501)](r(601)).then(e=>{const t=r;e[t(729)]()?l[t(474)](s)[t(596)](()=>{var e=t;console.log(e(515)+o+e(590)+c+e(615)+s+"."),unityInstance[e(639)](_0x13ccd4,e(670),e(558)+a)})[t(576)](e=>{var n=t;console[n(616)]("Error setting new leader: ",e),unityInstance.SendMessage(_0x13ccd4,n(670),"Failed&"+a)}):i[t(698)]()[t(596)](()=>{var e=t;console[e(652)](e(515)+o+" removed from clan "+c+", clan deleted."),unityInstance.SendMessage(_0x13ccd4,e(670),e(558)+a)})[t(576)](e=>{var n=t;console[n(616)](n(737),e),unityInstance[n(639)](_0x13ccd4,n(670),"Failed&"+a)})})[r(576)](e=>{var n=r;console[n(616)](n(727),e),unityInstance[n(639)](_0x13ccd4,n(670),n(537)+a)})}).catch(e=>{var n=t;console[n(616)](n(550),e),unityInstance[n(639)](_0x13ccd4,n(670),n(537)+a)})})[r(576)](e=>{var n=r;console.error(n(661),e),unityInstance[n(639)](_0x13ccd4,n(670),n(537)+a)}):(console[r(616)]("Player is not a member of the clan."),unityInstance.SendMessage(_0x13ccd4,"OnSetDataNew",r(507)+a))})[t(576)](e=>{var n=t;console[n(616)](n(727),e),unityInstance[n(639)](_0x13ccd4,n(670),n(537)+a)})})[r(576)](e=>{var n=r;console[n(616)](n(696),e),unityInstance[n(639)](_0x13ccd4,n(670),"Failed&"+a)})}function adminSetDataOn(e,n,t,r){var c=_0x4ceff7;_0x18e573[c(545)](c(510)).child(clanName)}function declineMember(o,s,t,a){const i=_0x4ceff7,d=(console[i(652)](i(587)+o+", memberId="+s+i(754)+t+i(539)+a),_0x18e573[i(545)]("clans")[i(553)](o));d[i(553)](i(540))[i(501)](i(601))[i(596)](e=>{const r=i,n=e[r(719)]();if(n===t){const c=d.child("requests");c[r(553)](s).once(r(601))[r(596)](e=>{const t=r;e.exists()?c.child(s)[t(698)]()[t(596)](()=>{var e=t;console.log(e(722)+s+" declined in clan "+o),unityInstance.SendMessage(_0x13ccd4,"OnSetDataNew",e(558)+a)})[t(576)](e=>{var n=t;console[n(616)](n(728),e),unityInstance[n(639)](_0x13ccd4,n(670),n(537)+a)}):(console.error("User is not in the requests."),unityInstance[t(639)](_0x13ccd4,t(670),t(500)+a))})[r(576)](e=>{var n=r;console[n(616)](n(632),e),unityInstance.SendMessage(_0x13ccd4,"OnSetDataNew",n(537)+a)})}else console[r(616)](r(676)),unityInstance[r(639)](_0x13ccd4,r(670),"InvalidLeader&"+a)})[i(576)](e=>{var n=i;console[n(616)]("Error checking leader ID: ",e),unityInstance[n(639)](_0x13ccd4,n(670),n(537)+a)})}function sendMembershipRequest(c,o,s){const t=_0x4ceff7,a=(console.log("js:sendMembershipRequest:clanName:"+c+t(745)+o+"reqid:"+s),_0x18e573[t(545)](t(510))[t(553)](c));a.once(t(601))[t(596)](e=>{const r=t;if(e[r(729)]()){const n=a[r(553)](r(609));n.child(o)[r(501)](r(601))[r(596)](e=>{const t=r;e[t(729)]()?(errorStr="User "+o+" has already sent a request to clan "+c,unityInstance[t(639)](_0x13ccd4,t(670),errorStr+"&"+s)):n.child(o)[t(474)](o)[t(596)](()=>{var e=t;console.log(e(722)+o+e(578)+c),unityInstance.SendMessage(_0x13ccd4,e(670),"Success&"+s)})[t(576)](e=>{var n=t;errStr=n(529)+e,unityInstance[n(639)](_0x13ccd4,n(670),errStr+"&"+s)})})[r(576)](e=>{var n=r;errStr="Error checking for duplicate requests: "+e,unityInstance[n(639)](_0x13ccd4,"OnSetDataNew",errStr+"&"+s)})}else errorStr="Clan "+c+r(482),unityInstance[r(639)](_0x13ccd4,r(670),errorStr+"&"+s)}).catch(e=>{var n=t;errStr="Error checking for clan existence: "+e,unityInstance.SendMessage(_0x13ccd4,n(670),errStr+"&"+s)})}function _0x1d11(e,n){const t=_0x4f31();return(_0x1d11=function(e,n){return e-=472,t[e]})(e,n)}function getUserData(e,r){const c=_0x4ceff7;_0x18e573[c(545)]("users")[c(553)](e).on(c(601),e=>{var n=c;let t=JSON[n(502)](e[n(719)]());null===t&&(t="null"),unityInstance[n(639)](_0x13ccd4,"OnGotData",t+"&"+r)},e=>{var n=c;console[n(616)](n(541)+e[n(711)]),console[n(616)](e)})}function getAllOnRef(e){const r=_0x4ceff7;_0x18e573[r(545)](e).on(r(601),e=>{var n=r;let t=JSON[n(502)](e[n(719)]());t=null===t?"null":t[n(565)](),unityInstance[n(639)](_0x13ccd4,n(489),t)},e=>{var n=r;console[n(652)]("Error getting data: "+e)})}function getLeaderboard(e){const r=_0x4ceff7;console[r(652)]("js: getLeaderboard::"+e),_0x18e573.ref(e)[r(501)](r(601))[r(596)](e=>{var n=r;let t=JSON[n(502)](e[n(719)]());t=null===t?n(646):t[n(565)](),unityInstance[n(639)](_0x13ccd4,n(488),t)})[r(576)](e=>{var n=r;console.log(n(756)+e)})}function startListeningForClanChanges(e,n){const t=_0x4ceff7,r=firebase.database()[t(545)](t(701)+e+t(710));r[t(521)](),n&&""!==n[t(658)]()&&((e=firebase.database()[t(545)](t(697)+n+t(592)))[t(521)](),e.on(t(601),()=>{var e=t;unityInstance[e(639)](e(574),"OnClanDataChanged")})),r.on(t(601),()=>{var e=t;unityInstance[e(639)]("MainManager",e(622))})}function setUserData(n,e,t,r){const c=_0x4ceff7;let o=JSON[c(739)](e),s=JSON.parse(t);_0x18e573.ref(c(701)+n)[c(474)](o,e=>{const t=c;_0x18e573.ref(t(701)+n+t(706)).set(s,e=>{var n=t;console[n(652)](JSON.stringify({err2:e})),unityInstance[n(639)](_0x13ccd4,n(721),JSON.stringify({err2:e})+"&"+r)})})}function setLeaderboardRecords(n,r,t){const c=_0x4ceff7,o=[];for(let e=0;e<n[c(753)];e++){const s=n[e],a=t[e];o.push(new Promise((n,t)=>{var e=c;_0x18e573[e(545)](s+r)[e(474)](a[e(565)](),e=>{e?t("Failed to set record for "+r+" in "+s):n()})}))}return Promise[c(631)](o)[c(596)](()=>{var e=c;unityInstance[e(639)](_0x13ccd4,e(707),e(485))})[c(576)](e=>{var n=c;unityInstance[n(639)](_0x13ccd4,n(707),e)})}function getClipboard(){const t=_0x4ceff7;navigator[t(555)][t(664)]()[t(596)](e=>{var n=t;console[n(652)](n(677)+e),unityInstance[n(639)]("MainManager",n(751),e)}).catch(e=>{var n=t;console[n(616)](n(519),e)})}function getData(e,r){const c=_0x4ceff7;_0x18e573[c(545)](e).on(c(601),e=>{var n=c;let t=e.val();t=null===t?"null":t[n(565)](),unityInstance[n(639)](_0x13ccd4,n(489),t+"&"+r)})}function getDataRaw(e,n,t){const r=_0x4ceff7;n=_0x18e573[r(545)](n);e?n[r(501)](r(601))[r(596)](e=>{var n=r,e=JSON[n(502)](e.val());unityInstance.SendMessage(_0x13ccd4,n(489),e+"&"+t)})[r(576)](e=>{var n=r;console[n(616)](n(505),e),unityInstance.SendMessage(_0x13ccd4,n(489),n(646)+"&"+t)}):n.on(r(601),e=>{var n=r,e=JSON[n(502)](e[n(719)]());unityInstance[n(639)](_0x13ccd4,n(489),e+"&"+t)})}function LogoutUser(){const t=_0x4ceff7;removeFriendRequestsListener(),removeFriendsListener(),console[t(652)](t(583)),window.hasSetSession=!1,tearDownOnlineStatusTracking(),stopListeningForInvites(),firebase[t(634)]()[t(656)]()[t(596)](()=>{var e=t;unityInstance[e(639)](_0x13ccd4,e(593))})[t(576)](e=>{var n=t;console.log(n(666)+e)})}function promoteUserToAdmin(e){const t=_0x4ceff7,n=firebase[t(554)]()[t(735)]("promoteUserToAdmin");n({email:e})[t(596)](e=>{var n=t;console[n(652)](e[n(600)]),unityInstance.SendMessage(n(494),n(663),formatApiResponse(e[n(600)]))})[t(576)](e=>{var n=t;console.error(e),unityInstance[n(639)](n(494),n(663),formatApiResponse(e))})}function deleteAllAccounts(e){const t=_0x4ceff7,n=firebase.functions()[t(735)](t(654));n({besidesUserUID:e})[t(596)](e=>{var n=t;console[n(652)](e.data[n(581)]),unityInstance.SendMessage(n(494),n(518),formatApiResponse(e.data))})[t(576)](e=>{var n=t;console.error(e[n(581)]),unityInstance[n(639)](n(494),"OnDeleteAccounts",formatApiResponse(e[n(600)]))})}function deleteAccount(e){const t=_0x4ceff7,n=firebase[t(554)]()[t(735)](t(569));n({mail:e})[t(596)](e=>{var n=t;unityInstance[n(639)](n(494),n(744),formatApiResponse(e[n(600)]))})[t(576)](e=>{var n=t;unityInstance[n(639)](n(494),n(744),formatApiResponse(e[n(600)]))})}function getUIDByEmail(e){const t=_0x4ceff7,n=firebase[t(554)]().httpsCallable(t(653));n({email:e})[t(596)](e=>{var n=t;unityInstance[n(639)](_0x13ccd4,n(547),formatApiResponse(e[n(600)]))})[t(576)](e=>{var n=t;console[n(616)](e),unityInstance[n(639)](_0x13ccd4,"OnGotUserUID",formatApiResponse(e))})}function addcc(e){var n=_0x4ceff7;firebase[n(598)]()[n(545)]("users/"+e+n(629))[n(474)]("1")}function formatApiResponse(e){var n=_0x4ceff7,n=Object[n(562)](e)[0];return n+": "+e[n]}function generateSessionId(){var n=_0x4ceff7,t=n(538);let r="";for(let e=0;e<6;e++){var c=Math[n(520)](Math[n(577)]()*t.length);r+=t[n(671)](c)}return r}firebase[_0x4ceff7(634)]()[_0x4ceff7(645)](e=>{e&&showUserDetails("",e)});let _0x34135d=!1,_0x289f5b=null;function getAndListenForFriends(e){const r=_0x4ceff7;_0x34135d&&_0x289f5b&&_0x289f5b.key===e?console[r(652)](r(679)):(_0x289f5b&&(_0x289f5b[r(521)](r(601)),_0x34135d=!1),(_0x289f5b=_0x18e573.ref(r(701)+e+r(564))).on(r(601),e=>{var n=r,e=e[n(719)](),t="";e&&(t=Object[n(562)](e)[n(528)](",")),unityInstance[n(639)](_0x13ccd4,"OnFriendsUpdate",t)},e=>{var n=r;unityInstance[n(639)](_0x13ccd4,n(624),e[n(581)])}),_0x34135d=!0)}function removeFriendsListener(){var e=_0x4ceff7;_0x34135d&&_0x289f5b?(_0x289f5b[e(521)](e(601)),_0x34135d=!1,_0x289f5b=null):console[e(652)](e(621))}let _0x53aea3=!1,_0x12155b=null;function getAndListenForFriendRequests(e){const r=_0x4ceff7;_0x53aea3&&_0x12155b&&_0x12155b[r(599)]===e?console.log("Listener for friend requests already set for this UID."):(_0x12155b&&(_0x12155b[r(521)](r(601)),_0x53aea3=!1),(_0x12155b=_0x18e573.ref("users/"+e+r(534))).on(r(601),e=>{var n=r,e=e[n(719)](),t="";e&&(t=Object[n(562)](e).join(",")),unityInstance[n(639)](_0x13ccd4,"OnFriendRequestsUpdate",t)},e=>{var n=r;unityInstance.SendMessage(_0x13ccd4,n(624),e[n(581)])}),_0x53aea3=!0)}function removeFriendRequestsListener(){var e=_0x4ceff7;_0x53aea3&&_0x12155b?(_0x12155b[e(521)]("value"),_0x53aea3=!1,_0x12155b=null):console.log(e(557))}function deleteUID(e){const t=_0x4ceff7;console[t(652)](t(575)),firebase[t(554)]()[t(735)]("delUser")({email:e})[t(596)](e=>{var n=t;e[n(600)]&&e[n(600)][n(618)]?(unityInstance[n(639)]("MainManager",n(551),"Success"),console[n(652)](n(486),e[n(600)].message),alert(n(703)+e.data[n(581)])):(unityInstance[n(639)](n(574),n(551),"Unknown error occurred."),console[n(652)](n(571),e[n(600)][n(616)]||"Unknown error occurred."),alert("Error: "+(e.data[n(616)]||n(720))))})[t(576)](e=>{var n=t;unityInstance[n(639)](n(574),"ShowMessageCustom",n(526)),console[n(616)](n(473),e),alert(n(665)+(e[n(581)]||"Unknown error occurred."))})}function sendFriendRequest(n,o){const s=_0x4ceff7,e=_0x18e573[s(545)](s(701)+n+s(612)+o);e[s(501)](s(601),e=>{const t=s;if(e[t(729)]())unityInstance[t(639)](_0x13ccd4,t(563),t(610));else{const r=_0x18e573[t(545)](t(701)+o+t(724)+n),c=_0x18e573[t(545)](t(701)+n+t(724)+o);r[t(501)](t(601),e=>{const n=t;e[n(729)]()?unityInstance[n(639)](_0x13ccd4,n(563),n(736)):c.once(n(601),e=>{const t=n;e[t(729)]()?unityInstance[t(639)](_0x13ccd4,t(563),"<color=yellow>Request Already Received!"):r[t(474)](!0)[t(596)](()=>{var e=t;unityInstance[e(639)](_0x13ccd4,e(563),"<color=green>Success")}).catch(e=>{var n=t;console[n(616)](n(705),e),unityInstance.SendMessage(_0x13ccd4,n(563),n(747)+e[n(581)]),unityInstance[n(639)](_0x13ccd4,n(624),e[n(581)])})})})}})}function respondToFriendRequest(e,n,t){const r=_0x4ceff7,c=_0x18e573[r(545)]("users/"+e+r(724)+n),o=_0x18e573[r(545)]("users/"+e+r(612)+n),s=_0x18e573[r(545)]("users/"+n+r(612)+e);"ok"===t?Promise[r(631)]([o[r(474)](!0),s[r(474)](!0)])[r(596)](()=>{var e=r;return c[e(698)]()})[r(596)](()=>{var e=r;console[e(652)]("Friend request accepted.")})[r(576)](e=>{var n=r,e=e.message;unityInstance[n(639)](_0x13ccd4,"OnFriendError",e)}):c[r(698)]()[r(596)](()=>console[r(652)](r(748)))[r(576)](e=>{var n=r,e=e[n(581)];unityInstance[n(639)](_0x13ccd4,n(624),e)})}function _0x4f31(){const e=["AIzaSyCj_9AFDvc4uAxLBsmZjD3E2sgOPkOOyP0","click","194978vPObcc","Declining member: clanName=",", memberId=","User is not in the requests."," removed from clan ","onDisconnect","/requests","OnLoggedOutGoogle","getElementById","signInWithPopup","then","36hVatqR","database","key","data","value","linkWithCredential","kourio-2dc0d.appspot.com","GET","lb/","true","signInWithEmailAndPassword","href","requests","<color=yellow>Already Friends!","replace","/friends/","appendChild","timestamp",", new leader is ","error","/invites/","success","revokeObjectURL","Error sending invite:","No friends listener to remove.","OnClanDataChanged","displayName","OnFriendError","1:45440111818:web:c53fb4b1516807e8b85033","\n        position: fixed;\n        left: 0;\n        top: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.5);\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        z-index: 1000;\n    ","Logged in from another device","no-cache, no-store, must-revalidate","/cc",". Clan deleted.","all","Error checking requests: ","createUserWithEmailAndPassword","auth","Error listening for friend presence:","45440111818","body","Error checking if the clan exists: ","SendMessage","file","134276wsWpyG","application/json","/session","2118BteiIQ","onAuthStateChanged","null","must update!","GoogleAuthProvider","There was a problem with your fetch operation:","createObjectURL","now","log","getUserId","deleteAllAccounts","OnReceivedIsAdmin","signOut","TIMESTAMP","trim","Cancelled-UserClosedCaptcha","OnNewVersionDetected","Error removing 'clan' property for user: ","toUpperCase","OnPromoted","readText","Function Error: ","An error happened : ","onload","no-store"," is the leader of clan ","OnSetDataNew","charAt","/invites","stopPropagation","uid","UsernameLoginResultJS","Provided leaderID does not match the clan's leader.","clipboard: ","setAttribute","Listener for friend s already set for this UID.","TwitterAuthProvider","Clan with the same name already exists.",", Actual: ","no-cache","members","auth/user-not-found","6nawxhE","admin","offline","Clan creation failed.","3735214AcHXkh","8236232zcNLWb",". Logging out user.","Invalid session ID detected, but one or both IDs are null or whitespace.","accept","undefined","Error checking clan leader: ","clans/","remove","email","ClanExists","users/","cancel","Success: ","includes","Error sending friend request:","/public","OnAddedPoints","credential","FirebasePlayerPrefs2023","/public/clan","code","Error setting email consent:","reload","Error setting user clan: ","firebaseSessionId","Error creating clan: ","NoUsername","online","val","Unknown error occurred.","OnSetData","Request from ","'s friend list.","/friendRequests/","hasSetSession","OnInvite","Error checking clan members: ","Error removing request: ","exists","slice","Error checking leader ID: ","kourio-2dc0d","currentUser","Error removing friend from user's friend list:","httpsCallable","<color=yellow>Request Already Sent!","Error deleting clan: ","map","parse","Error removing user from friend's friend list:","removeChild","toLowerCase"," added to clan ","OnDeleteAccount",", senderUserID: ","kourio-2dc0d.firebaseapp.com","<color=red>","Friend request declined.","target","map.kour","OnGotClipboard","UsernameRegisterResultJS","length",", leaderID=","Error accepting all invites:","Error getting data: ","style","recaptchaContainer","json","Error calling the delUser function:","set","input","/presence/","light","files","Twitter Login Error:","type","https://kourio-2dc0d-default-rtdb.firebaseio.com/"," does not exist","FriendStatusUpdate","@example.com","Success","Success:","createElement","OnGotLeaderboard","OnGotData","split","accessToken","Facebook account linked successfully","GameManager","AdminManager","https://kour.io/api/signup","download","render","ServerValue","Login failed:","UserNotInRequests&","once","stringify","recaptchaModal","2534850kSCPyD","Error fetching data:","3336644tfoJLF","PlayerNotInClan&","FacebookAuthProvider","POST","clans","codes/","7255ciqlLe"," from ","OnSessionError","Player ","OnMapLoaded","addEventListener","OnDeleteAccounts","Failed to read clipboard:","floor","off","Email and Password Login Error:","div","update",".info/connected","'Error calling the delUser function","No file selected.","join","Error sending membership request: ","MapBuilder","forEach","cssText","OnGetPromoCode","/friendRequests","Twitter Login Success!","user","Failed&","ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",", reqID=","leader","The read failed: ","roomName","emails/","Invalid session ID detected. Expected: ","ref","InvalidLeader&","OnGotUserUID","OnLoggedInGoogle","getIdTokenResult","Error removing player from clan: ","ShowMessageCustom","Removed ","child","functions","clipboard",". error: ","No friend requests listener to remove.","Success&",".kour","FriendButton_","readAsText","keys","OnSentFriendRequest","/friends","toString","Failed-","claims","reject","delUser","has","Error:","Facebook Login Error:","URL","MainManager","deleting...","catch","random"," sent to clan ","loginData","G-VGVP085QMS","message","onchange","LogoutUser called from JS"];return(_0x4f31=function(){return e})()}function removeFriend(e,n){const t=_0x4ceff7,r=_0x18e573[t(545)]("users/"+e+t(612)+n),c=_0x18e573[t(545)]("users/"+n+t(612)+e);r[t(698)]().then(()=>console[t(652)](t(552)+n+t(513)+e+"'s friend list."))[t(576)](e=>console[t(616)](t(734),e)),c[t(698)]()[t(596)](()=>console[t(652)](t(552)+e+t(513)+n+t(723))).catch(e=>console[t(616)](t(740),e))}const _0x4b3ad1=new Set;function listenForFriendPresence(t){const r=_0x4ceff7;_0x4b3ad1[r(570)](t)||(_0x18e573.ref(r(476)+t).on(r(601),e=>{var n=r,e=e[n(719)](),e=n(e?718:688);unityInstance.SendMessage(n(560)+t,n(483),e)},e=>{var n=r;console[n(616)](n(635),e)}),_0x4b3ad1.add(t))}function removeListenerForFriendPresence(e){var n=_0x4ceff7;_0x4b3ad1[n(570)](e)&&(_0x18e573.ref(n(476)+e).off(n(601)),_0x4b3ad1.delete(e))}function sendInvite(e,n,t){const r=_0x4ceff7,c=_0x18e573[r(545)]("users/"+n+r(617)+e);c.set({timestamp:firebase[r(598)][r(498)][r(657)],roomName:t})[r(596)](()=>{})[r(576)](e=>console[r(616)](r(620),e))}let _0x5751da=null;function listenForInvites(e){const t=_0x4ceff7;_0x5751da||(_0x5751da=_0x18e573[t(545)](t(701)+e+t(672))).on(t(601),e=>{const r=t,c=e[r(719)]();if(c){const o=Date[r(651)]();Object[r(562)](c)[r(531)](e=>{var n=r,t=c[e];6e4<o-t[n(614)]?_0x5751da[n(553)](e).remove()[n(576)](e=>console.error("Error deleting expired invite:",e)):unityInstance[n(639)](_0x13ccd4,n(726),e+":"+t[n(542)])})}},e=>{var n=t;console[n(616)]("Error listening for invites:",e)})}function stopListeningForInvites(){_0x5751da&&(_0x5751da.off("value"),_0x5751da=null)}function acceptAllInvites(e){const r=_0x4ceff7,c=_0x18e573[r(545)]("users/"+e+r(672));c[r(501)](r(601))[r(596)](e=>{const t=r,n=e[t(719)]();if(n)return e=Object[t(562)](n)[t(738)](e=>{var n=t;return c.child(e)[n(698)]()}),Promise[t(631)](e)})[r(596)](()=>{})[r(576)](e=>{var n=r;console[n(616)](n(755),e)})}function checkVersion(t){const r=_0x4ceff7,e={method:r(604),cache:r(668),headers:new Headers({"Cache-Control":r(628),Pragma:r(683),Expires:"0"})};fetch("version.txt",e)[r(596)](e=>{if(e.ok)return e.text();throw new Error("Network response was not ok")})[r(596)](e=>{var n=r,e=e[n(742)]()[n(611)](/\s/g,"");e!==t[n(742)]().replace(/\s/g,"")&&(console[n(652)](n(647)),unityInstance.SendMessage("MainManager",n(660),""+e))})[r(576)](e=>{var n=r;console[n(616)](n(649),e)})}function deleteAtPath(e){var n=_0x4ceff7;_0x18e573[n(545)](e)[n(698)]()}function replb(e){var n=_0x4ceff7;firebase.database()[n(545)](n(605)+e)[n(474)](!0)}function saveMap(e){var n=_0x4ceff7,e=new Blob([e],{type:n(642)}),e=window.URL[n(650)](e),t=document[n(487)]("a");t[n(608)]=e,t[n(496)]=n(750),document[n(637)].appendChild(t),t[n(585)](),document.body[n(741)](t),window[n(573)][n(619)](e)}function loadMap(){const r=_0x4ceff7,e=document.createElement(r(475));e[r(480)]=r(640),e[r(694)]=r(559),e[r(582)]=e=>{const t=r,n=e[t(749)][t(478)][0];n?((e=new FileReader)[t(667)]=e=>{var n=t;console[n(652)](e[n(749)].result),unityInstance.SendMessage(n(530),n(516),e[n(749)].result)},e[t(561)](n)):console[t(652)](t(527))},e[r(585)]()}